{
  "name": "Candev.VolunteerRegistrationForm",
  "displayName": "Volunteer Registration Form",
  "description": "Creates a registration form for volunteers.",
  "author": "StatCan Digital Innovation",
  "website": "digital.statcan.gc.ca",
  "version": "1.0.0",
  "issetuprecipe": false,
  "categories": [],
  "tags": [],
  "steps": [
    {
      "name": "Content",
      "data": [
        {
          "ContentItemId": "4jjje1q162zaay11nbf3w2634h",
          "ContentItemVersionId": "4a3ffebr7c9xp1g970jg94b2cv",
          "ContentType": "VueForm",
          "DisplayText": "VolunteerRegistrationForm",
          "Latest": true,
          "Published": true,
          "ModifiedUtc": "2021-07-30T19:18:19.3729757Z",
          "PublishedUtc": "2021-07-30T19:18:19.4046761Z",
          "CreatedUtc": "2020-12-02T20:48:02.4224369Z",
          "Owner": "[js: parameters('AdminUserId')]",
          "Author": "[js: parameters('AdminUsername')]",
          "TitlePart": {
            "Title": "VolunteerRegistrationForm"
          },
          "VueForm": {
            "Enabled": null,
            "DisabledHtml": {
              "Html": "<div class=\"container text-center mt-2\">\n  [locale en]The Volunteer registration form is currently disabled.[/locale]\n  [locale fr]Le formulaire d'enreigstrement est présentement désactivé[/locale]\n</div>"
            },
            "SuccessMessage": {
              "Text": "{{ \"successMessage\" | localize }}"
            },
            "RenderAs": {
              "Text": null
            },
            "Template": {
              "Text": "<v-container >\r\n  <v-card-text>\r\n    <v-row justify=\"center\">\r\n      <v-col cols=\"10\">\r\n        <h1>[locale en]Partner and volunteer registration form[/locale][locale fr]Formulaire d'inscription des partenaires et des bénévoles[/locale]</h1>\r\n      </v-col>\r\n{% assign isInRole = User | is_in_role: \"Volunteer\" %}\r\n{% if User.Identity.Name == null %}\r\n      <v-col cols=\"10\">\r\n        [locale en]Please <a href=\"{{ '~/login' | return_url }}\">login</a> before registering to this event.[/locale]\r\n        [locale fr]Veuillez vous <a href=\"{{ '~/login' | return_url }}\">connecter</a> avant de vous inscrire à cet événement.[/locale]\r\n      </v-col>\r\n{% elsif isInRole %}\r\n      <v-col cols=\"10\">\r\n        [locale en]You are registered to this event, which gives you access to My portal and Archive tabs.[/locale]\r\n        [locale fr]Vous êtes inscrit à cet événement, ce qui vous donne accès aux onglets Mon portail et Archive.[/locale]\r\n      </v-col>\r\n{% else %}\r\n      <v-col cols=\"10\">\r\n        <validation-provider name=\"{{ \"firstNameLabel\" | localize }}\" rules=\"required\" v-slot=\"{ errors, valid }\">\r\n          <v-text-field name=\"firstName\" v-model=\"firstName\" :success=\"valid\" :error-messages=\"errors\" filled=\"filled\" label=\"{{ \"firstNameLabel\" | localize }}\"></v-text-field>\r\n        </validation-provider>\r\n      </v-col>\r\n      <v-col cols=\"10\">\r\n        <validation-provider name=\"{{ \"lastNameLabel\" | localize  }}\" rules=\"required\" v-slot=\"{ errors, valid }\">\r\n          <v-text-field name=\"lastName\" v-model=\"lastName\" :success=\"valid\" :error-messages=\"errors\" filled=\"filled\" label=\"{{ \"lastNameLabel\" | localize }}\"></v-text-field>\r\n        </validation-provider>\r\n      </v-col>\r\n      <v-col cols=\"10\">\r\n        <validation-provider name=\"{{ \"emailLabel\" | localize }}\" rules=\"required|email\" v-slot=\"{ errors, valid }\">\r\n          <v-text-field name=\"email\" v-model=\"email\" :success=\"valid\" :error-messages=\"errors\" filled=\"filled\" label=\"{{ \"emailLabel\" | localize }}\"></v-text-field>\r\n        </validation-provider>\r\n      </v-col>\r\n      <v-col cols=\"10\">\r\n        <p>[locale en]Role(s)[/locale][locale fr]Rôle(s)[/locale]</p>\r\n        <v-row>\r\n        <v-col>\r\n          <v-checkbox name=\"mentor\" v-model=\"mentor\" label=\"{{ \"mentorLabel\" | localize }}\"></v-checkbox>\r\n          <v-checkbox name=\"judge\" v-model=\"judge\" label=\"{{ \"judgeLabel\" | localize }}\"></v-checkbox>\r\n        </v-col>  \r\n        <v-col>\r\n          <v-checkbox name=\"agencyRepresentative\" v-model=\"agencyRepresentative\" label=\"{{ \"agencyRepresentativeLabel\" | localize }}\"></v-checkbox>\r\n          <v-checkbox name=\"workshopPresenter\" v-model=\"workshopPresenter\" label=\"{{ \"workshopPresenterLabel\" | localize }}\"></v-checkbox>\r\n        </v-col>\r\n        <v-col>\r\n          <v-checkbox name=\"technicalAdvisor\" v-model=\"technicalAdvisor\" label=\"{{ \"technicalAdvisorLabel\" | localize }}\"></v-checkbox>\r\n       \t  <v-checkbox name=\"keynoteSpeaker\" v-model=\"keynoteSpeaker\" label=\"{{ \"keynoteSpeakerLabel\" | localize }}\"></v-checkbox>\r\n        </v-col>\r\n        <v-col>\r\n          <v-checkbox name=\"observer\" v-model=\"observer\" label=\"{{ \"observerLabel\" | localize }}\"></v-checkbox>\r\n          <v-checkbox name=\"organizer\" v-model=\"organizer\" label=\"{{ \"organizerLabel\" | localize }}\"></v-checkbox>\r\n        </v-col>\r\n          </v-row>\r\n      </v-col>\r\n      <v-col cols=\"10\">      \r\n        <p>{{ \"languageLabel\" | localize }}</p>\r\n        <v-radio-group name=\"language\" v-model=\"language\" row >\r\n          <v-radio label=\"{{ \"languageEnglishLabel\" | localize }}\" value=\"en\" ></v-radio>\r\n          <v-radio label=\"{{ \"languageFrenchLabel\" | localize }}\" value=\"fr\" ></v-radio>\r\n          <v-radio label=\"{{ \"languageBothLabel\" | localize }}\" value=\"both\" ></v-radio>\r\n        </v-radio-group>    \r\n      </v-col>\r\n      <v-col cols=\"10\">\r\n        <validation-provider name=\"{{ \"departmentLabel\" | localize }}\" rules=\"required\" v-slot=\"{ errors, valid }\">     \r\n          <v-text-field  name=\"department\" v-model=\"department\" :success=\"valid\" :error-messages=\"errors\" filled=\"filled\" label=\"{{ \"departmentLabel\" | localize }}\"></v-text-field>\r\n        </validation-provider>\r\n      </v-col>\r\n      <v-col cols=\"10\">\r\n        [locale en]<a href=\"/terms-and-conditions-volunteers/\" target=\"_blank\">Terms and conditions</a>[/locale]\r\n        [locale fr]<a href=\"/termes-et-conditions-volontaires/\" target=\"_blank\">Termes et conditions</a>[/locale]\r\n        <validation-provider name=\"{{ \"termsAndConditionsLabel\" | localize }}\" rules=\"required\" v-slot=\"{ errors, valid }\">\r\n          <v-checkbox name=\"termsAndConditions\" v-model=\"termsAndConditions\" :success=\"valid\" :error-messages=\"errors\" filled=\"filled\" label=\"{{ \"termsAndConditionsLabel\" | localize }}\"></v-checkbox>\r\n        </validation-provider>\r\n      </v-col>\r\n      <v-col cols=\"10\">\r\n        <v-text-field name=\"comments\" v-model=\"comments\" filled=\"filled\" label=\"{{ \"commentsLabel\" | localize }}\"></v-text-field>\r\n      </v-col>\r\n      <v-col cols=\"10\">\r\n        <v-alert type=\"success\" v-if=\"form.successMessage\">\r\n          {% raw %}{{ form.successMessage }}{% endraw %}\r\n        </v-alert>\r\n        <v-alert type=\"error\" v-if=\"form.serverValidationMessage\">\r\n          {% raw %}{{ form.serverValidationMessage[0] }}{% endraw %}\r\n        </v-alert>\r\n      </v-col>\r\n      <v-col cols=\"10\">\r\n    \t<v-btn type=\"submit\" depressed block @click=\"formHandleSubmit\" :disabled=\"form.submitting\">[locale en]Register[/locale][locale fr]S'enregistrer[/locale]</v-btn>\r\n      </v-col>\r\n{% endif %}\r\n    </v-row>\r\n  </v-card-text>\r\n</v-container>\r\n\r\n"
            },
            "Disabled": {
              "Value": false
            },
            "Debug": {
              "Value": false
            }
          },
          "VueFormScripts": {
            "ClientInit": {
              "Text": "VeeValidate.setInteractionMode('passive');"
            },
            "OnValidation": {
              "Text": "var data = requestFormAsJsonObject();\r\nvar localizedText = getLocalizedTextValues(getFormContentItem());\r\n\r\nif(data.termsAndConditions == \"false\"){\r\n  addError('serverValidationMessage', localizedText.termsAndConditionsError);\r\n}\r\n\r\nif(!isAuthenticated() || data.firstName == \"\" || data.lastName == \"\" || data.email == \"\" || data.language == \"\" || !validateEmail(data.email)) {\r\n  addError('serverValidationMessage', localizedText.serverValidationError);\r\n}\r\n\r\nif(httpContext().User.IsInRole(\"Volunteer\")){\r\n  addError('serverValidationMessage', localizedText.alreadyRegisteredError); \r\n}"
            },
            "OnSubmitted": {
              "Text": "var data = requestFormAsJsonObject();\r\nvar localizedText = getLocalizedTextValues(getFormContentItem());\r\n\r\nvar updateSettingsResult = updateCustomUserSettings(\"ParticipantProfile\", {\r\n  \"ParticipantProfile\" : {\r\n     \"FirstName\": {\r\n       \"Text\": data.firstName\r\n     },\r\n     \"LastName\": {\r\n       \"Text\": data.lastName\r\n     },\r\n     \"Email\": {\r\n       \"Text\": data.email\r\n     },\r\n     \"Language\": {\r\n       \"Text\": data.language\r\n     },\r\n     \"TermsAndConditions\": {\r\n       \"Value\": data.termsAndConditions\r\n     },\r\n     \"Comments\": {\r\n      \"Text\": data.comments\r\n     }\r\n  }\r\n});\r\n\r\nvar updateVolunteerSettingsResult = updateCustomUserSettings(\"Volunteer\", {\r\n  \"Volunteer\" : {\r\n    \"Mentor\" : {\r\n      \"Value\" : data.mentor\r\n    },\r\n    \"AgencyRepresentative\" : {\r\n      \"Value\" : data.agencyRepresentative\r\n    },\r\n    \"WorkshopPresenter\" : {\r\n      \"Value\" : data.workshopPresenter\r\n    },\r\n    \"TechnicalAdvisor\" : {\r\n      \"Value\" : data.technicalAdvisor\r\n    },\r\n    \"KeynoteSpeaker\" : {\r\n      \"Value\" : data.keynoteSpeaker\r\n    },\r\n    \"Observer\" : {\r\n      \"Value\" : data.observer\r\n    },\r\n    \"Organizer\" : {\r\n      \"Value\" : data.organizer\r\n    },\r\n    \"Judge\" : {\r\n      \"Value\" : data.judge\r\n    },\r\n    \"Department\": {\r\n      \"Text\": data.department\r\n    }\r\n  }\r\n});\r\n\r\nvar httpContext = httpContext();\r\nvar setUserRoleResult = setUserRole(httpContext.User.Identity.Name, \"Volunteer\");\r\n\r\nif(updateSettingsResult == 1 || updateSettingsResult == 2 || updateVolunteerSettingsResult == 1 || updateVolunteerSettingsResult == 2) \r\n{\r\n  addError(\"serverValidationMessage\", localizedText.updateSettingsError);  \r\n}\r\n// success message displayed\r\n"
            },
            "ComponentOptions": {
              "Text": "{\r\n  data: () => ({\r\n    firstName: \"\",\r\n\tlastName: \"\", \r\n    email: \"\",\r\n    language: \"\",\r\n    mentor: false,\r\n    agencyRepresentative: false,\r\n    workshopPresenter: false,\r\n    technicalAdvisor: false,\r\n    keynoteSpeaker: false,\r\n    observer: false,\r\n    organizer: false,\r\n    judge: false,\r\n    department: \"\",\r\n    termsAndConditions: null,\r\n    comments: \"\"\r\n  })\r\n}"
            }
          },
          "LocalizedTextPart": {
            "Data": [
              {
                "Name": "firstNameLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Prénom"
                  },
                  {
                    "Culture": "en",
                    "Value": "First name"
                  }
                ]
              },
              {
                "Name": "lastNameLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Nom"
                  },
                  {
                    "Culture": "en",
                    "Value": "Last name"
                  }
                ]
              },
              {
                "Name": "emailLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Adresse courriel"
                  },
                  {
                    "Culture": "en",
                    "Value": "Email address"
                  }
                ]
              },
              {
                "Name": "languageLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Langue"
                  },
                  {
                    "Culture": "en",
                    "Value": "Language"
                  }
                ]
              },
              {
                "Name": "languageEnglishLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Anglais"
                  },
                  {
                    "Culture": "en",
                    "Value": "English"
                  }
                ]
              },
              {
                "Name": "languageFrenchLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Français"
                  },
                  {
                    "Culture": "en",
                    "Value": "French"
                  }
                ]
              },
              {
                "Name": "languageBothLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Les deux"
                  },
                  {
                    "Culture": "en",
                    "Value": "Both"
                  }
                ]
              },
              {
                "Name": "serverValidationError",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Une erreure est survenue lors de la soumission. Veuillez nous contacter."
                  },
                  {
                    "Culture": "en",
                    "Value": "An error occurred during submission. Please contact us."
                  }
                ]
              },
              {
                "Name": "alreadyRegisteredError",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Vous êtes inscrit à cet événement, ce qui vous donne accès aux onglets Archive et Mon portail."
                  },
                  {
                    "Culture": "en",
                    "Value": "You are registered to this event, which gives access to the Archive and My portal tabs."
                  }
                ]
              },
              {
                "Name": "successMessage",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Vous êtes inscrit avec succès! Veuillez rafraîchir la page pour accéder au contenu exclusif des partenaires et bénévoles."
                  },
                  {
                    "Culture": "en",
                    "Value": "You have successfully registered! Please refresh the page to access content exclusive to partners and volunteers."
                  }
                ]
              },
              {
                "Name": "updateSettingsError",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Une erreure est survenue lors de la mise-à-jour de votre profil. Veuillez contacter l'administrateur"
                  },
                  {
                    "Culture": "en",
                    "Value": "An error occurred while updating your profile. Please contact the site admin."
                  }
                ]
              },
              {
                "Name": "mentorLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Mentor"
                  },
                  {
                    "Culture": "en",
                    "Value": "Mentor"
                  }
                ]
              },
              {
                "Name": "judgeLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Juge"
                  },
                  {
                    "Culture": "en",
                    "Value": "Judge"
                  }
                ]
              },
              {
                "Name": "agencyRepresentativeLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Représentant"
                  },
                  {
                    "Culture": "en",
                    "Value": "Agency representative"
                  }
                ]
              },
              {
                "Name": "workshopPresenterLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Présenteur d'atelier"
                  },
                  {
                    "Culture": "en",
                    "Value": "Workshop presenter"
                  }
                ]
              },
              {
                "Name": "technicalAdvisorLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Conseiller technique"
                  },
                  {
                    "Culture": "en",
                    "Value": "Technical advisor"
                  }
                ]
              },
              {
                "Name": "keynoteSpeakerLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Conférencier"
                  },
                  {
                    "Culture": "en",
                    "Value": "Keynote speaker"
                  }
                ]
              },
              {
                "Name": "observerLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Observateur"
                  },
                  {
                    "Culture": "en",
                    "Value": "Observer"
                  }
                ]
              },
              {
                "Name": "organizerLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Organisateur / bénévole"
                  },
                  {
                    "Culture": "en",
                    "Value": "Organizer/Volunteer"
                  }
                ]
              },
              {
                "Name": "departmentLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Ministère / agence"
                  },
                  {
                    "Culture": "en",
                    "Value": "Department/Agency"
                  }
                ]
              },
              {
                "Name": "termsAndConditionsLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "J'ai lu et j'accepte les termes et conditions."
                  },
                  {
                    "Culture": "en",
                    "Value": "I have read and I agree to the terms and conditions."
                  }
                ]
              },
              {
                "Name": "commentsLabel",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Commentaires (optionnel)"
                  },
                  {
                    "Culture": "en",
                    "Value": "Comments (optional)"
                  }
                ]
              },
              {
                "Name": "termsAndConditionsError",
                "LocalizedItems": [
                  {
                    "Culture": "fr",
                    "Value": "Veuillez accepter les termes et conditions."
                  },
                  {
                    "Culture": "en",
                    "Value": "Please accept the terms and conditions."
                  }
                ]
              }
            ]
          },
          "ContentPermissionsPart": {
            "Roles": [],
            "Enabled": false
          },
          "AliasPart": {
            "Alias": "volunteerregistrationform"
          }
        }
      ]
    }
  ]
}
