@model IEnumerable<dynamic>

<style asp-src="~/StatCan.OrchardCore.Radar/css/list-view.css"></style>
<style asp-src="~/StatCan.OrchardCore.Radar/css/table.css"></style>

<script asp-src="/StatCan.OrchardCore.Radar/js/table.js" at="Head"></script>

<zone name="Header">
  <div class="details-section">
    <div class="list-header">
      <v-container>
        <v-row justify="space-between">
          <v-col md="4">
            <div class="title-container">
              <div class="text-h2 list-title">@T["Communities"]</div>
              <div class="bubble">
                <div class="bubble-text" id="bubble-text">
                  @Model.Count()
                </div>
              </div>
            </div>
            <div class="search-container">
              <v-icon class="search-icon">
                mdi-magnify
              </v-icon>
              <form id="search-form" asp-controller="List" asp-action="Search" method="post" autocomplete="off">
                <input class="search-input" id="search-input" inputmode="search" type="search" name="searchText"
                  value=@ViewData["searchText"]>
                <input type="text" name="type" value="Communities" style="display:none" />
                <input type="submit" style="display:none" />
              </form>
              <v-btn elevation="0" icon id="search-clear-button">
                <v-icon>
                  mdi-close
                </v-icon>
              </v-btn>
            </div>
          </v-col>
          <v-col md="1">
            <div style="width: 7rem; height: 7rem">
              <v-img src=@Orchard.AssetUrl("icon_communities.svg")>
              </v-img>
            </div>
          </v-col>
        </v-row>
      </v-container>
    </div>
    <div class="zigzag-container">
      <div class="zigzag zigzag-white"></div>
    </div>
  </div>
</zone>

<div class="table-container">
  <table class="table" id="entity-table">
    <thead class="table-header">
      <tr>
        <th class="name-col" data-type="name">@T["Name"]</th>
        <th data-type="number">@T["Members"]</th>
        <th>@T["Owner"]</th>
        <th>@T["Type"]</th>

      </tr>
    </thead>
    <tbody>
      @foreach (var shape in Model)
      {
        @if(shape.Properties["ContentItem"].Content.LocalizationPart.Culture == "en") 
        {
          @await DisplayAsync(shape)
        }
      }
    </tbody>
  </table>
</div>

<script type="application/javascript">
  window.addEventListener("DOMContentLoaded", function () {
    attachSorter();
    attachSearchClear();
  });
</script>