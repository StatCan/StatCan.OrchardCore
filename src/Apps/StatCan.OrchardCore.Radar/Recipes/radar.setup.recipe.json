{
  "name": "radar-setup",
  "displayName": "Radar Setup",
  "description": "Recipe used to setup the Radar application.",
  "author": "Digital Innovation Team",
  "website": "https://digital.statcan.gc.ca",
  "version": "1.0",
  "issetuprecipe": true,
  "categories": ["radar"],
  "tags": ["innovation", "inno"],
  "steps": [
    {
      "name": "recipes",
      "Values": [
        {
          "executionid": "ThemeSetup",
          "name": "vuetify-theme-setup"
        }
      ]
    },
    {
      "name": "feature",
      "disable": [],
      "enable": [
        "OrchardCore.Users.CustomUserSettings",
        "OrchardCore.Users.Registration",
        "OrchardCore.Lucene",
        "StatCan.OrchardCore.Radar"
      ]
    },
    {
      "name": "media",
      "Files": [
        {
          "SourcePath": "../wwwroot/images/radar-icon-white.svg",
          "TargetPath": "radar-icon-white.svg"
        },
        {
          "SourcePath": "../wwwroot/images/icon_communities.svg",
          "TargetPath": "icon_communities.svg"
        },
        {
          "SourcePath": "../wwwroot/images/icon_events.svg",
          "TargetPath": "icon_events.svg"
        },
        {
          "SourcePath": "../wwwroot/images/icon_experiments.svg",
          "TargetPath": "icon_experiments.svg"
        },
        {
          "SourcePath": "../wwwroot/images/icon_opportunities.svg",
          "TargetPath": "icon_opportunities.svg"
        },
        {
          "SourcePath": "../wwwroot/images/icon_topics.svg",
          "TargetPath": "icon_topics.svg"
        }
      ]
    },
    {
      "name": "custom-settings",
      "VuetifyThemeSettings": {
        "ContentItemId": "[js: uuid()]",
        "ContentItemVersionId": null,
        "ContentType": "VuetifyThemeSettings",
        "DisplayText": "",
        "Latest": false,
        "Published": false,
        "ModifiedUtc": null,
        "PublishedUtc": null,
        "CreatedUtc": null,
        "Owner": "[js: parameters('AdminUserId')]",
        "Author": "[js: parameters('AdminUsername')]",
        "VuetifyThemeSettings": {
          "DisplayName": {
            "Text": "Radar"
          },
          "Logo": {
            "Paths": ["radar-icon-white.svg"],
            "MediaTexts": [""]
          },
          "DisplayMode": {
            "Text": "light"
          },
          "ThemeOptions": {
            "Text": null
          }
        }
      }
    },
    {
      "name": "content",
      "data": [
        {
          "ContentItemId": "[js: uuid()]",
          "ContentItemVersionId": null,
          "ContentType": "LandingPage",
          "DisplayText": "Digital Radar",
          "Latest": true,
          "Published": true,
          "ModifiedUtc": null,
          "PublishedUtc": null,
          "CreatedUtc": null,
          "Owner": "[js: parameters('AdminUserId')]",
          "Author": "[js: parameters('AdminUsername')]",
          "LandingPage": {
            "Description": {
              "Text": "Explore, manage and discover insights across your projects"
            }
          },
          "AutoroutePart": {
            "Path": "digital-radar",
            "SetHomepage": true,
            "Disabled": false,
            "RouteContainedItems": false,
            "Absolute": false
          },
          "LocalizationPart": {
            "LocalizationSet": "4xwnrm19d4119rg6szffxkfpwt",
            "Culture": "en"
          },
          "TitlePart": {
            "Title": "Digital Radar"
          },
          "HeaderList": {
            "ContentItems": [
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "LandingPageHeaderList",
                "DisplayText": null,
                "Latest": false,
                "Published": false,
                "ModifiedUtc": null,
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "[js: parameters('AdminUserId')]",
                "Author": "[js: parameters('AdminUsername')]",
                "LandingPageHeaderList": {
                  "Caption": {
                    "Text": "Discover pathfinding projects"
                  }
                }
              },
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "LandingPageHeaderList",
                "DisplayText": null,
                "Latest": false,
                "Published": false,
                "ModifiedUtc": null,
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "[js: parameters('AdminUserId')]",
                "Author": "[js: parameters('AdminUsername')]",
                "LandingPageHeaderList": {
                  "Caption": {
                    "Text": "Explore technologies and topics"
                  }
                }
              },
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "LandingPageHeaderList",
                "DisplayText": null,
                "Latest": false,
                "Published": false,
                "ModifiedUtc": null,
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "[js: parameters('AdminUserId')]",
                "Author": "[js: parameters('AdminUsername')]",
                "LandingPageHeaderList": {
                  "Caption": {
                    "Text": "Share your team's work"
                  }
                }
              }
            ]
          },
          "Activities": {
            "ContentItems": [
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "EntityCard",
                "DisplayText": "Projects",
                "Latest": false,
                "Published": false,
                "ModifiedUtc": null,
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "[js: parameters('AdminUserId')]",
                "Author": "[js: parameters('AdminUsername')]",
                "EntityCard": {
                  "Type": {
                    "Text": "Project"
                  },
                  "Limit": {
                    "Value": 5.0
                  },
                  "Caption": {
                    "Text": "In-flight projects"
                  },
                  "Icon": {
                    "Text": "mdi-flask-outline"
                  },
                  "ButtonText": {
                    "Text": "All Projects"
                  },
                  "ButtonLink": {
                    "Text": "projects"
                  }
                },
                "LocalizationPart": {
                  "LocalizationSet": "4egqzgdmmhkcqvxb5qzbah8hdp",
                  "Culture": "en"
                },
                "TitlePart": {
                  "Title": "Projects"
                }
              },
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "EntityCard",
                "DisplayText": "Events",
                "Latest": false,
                "Published": false,
                "ModifiedUtc": null,
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "[js: parameters('AdminUserId')]",
                "Author": "[js: parameters('AdminUsername')]",
                "EntityCard": {
                  "Type": {
                    "Text": "Event"
                  },
                  "Limit": {
                    "Value": 5.0
                  },
                  "Caption": {
                    "Text": "Upcoming events"
                  },
                  "Icon": {
                    "Text": "mdi-calendar"
                  },
                  "ButtonText": {
                    "Text": "All Events"
                  },
                  "ButtonLink": {
                    "Text": "events"
                  }
                },
                "LocalizationPart": {
                  "LocalizationSet": "4g33gt5aan2pdxyad05r5ergcn",
                  "Culture": "en"
                },
                "TitlePart": {
                  "Title": "Events"
                }
              },
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "EntityCard",
                "DisplayText": "Committees",
                "Latest": false,
                "Published": false,
                "ModifiedUtc": null,
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "[js: parameters('AdminUserId')]",
                "Author": "[js: parameters('AdminUsername')]",
                "EntityCard": {
                  "Type": {
                    "Text": "Community"
                  },
                  "Limit": {
                    "Value": 5.0
                  },
                  "Caption": {
                    "Text": "Latest committees"
                  },
                  "Icon": {
                    "Text": "mdi-account-multiple"
                  },
                  "ButtonText": {
                    "Text": "All Communities"
                  },
                  "ButtonLink": {
                    "Text": "communities"
                  }
                },
                "LocalizationPart": {
                  "LocalizationSet": "4hj956jn7axdywb3vr7fp9pcdc",
                  "Culture": "en"
                },
                "TitlePart": {
                  "Title": "Committees"
                }
              },
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "EntityCard",
                "DisplayText": "Proposals",
                "Latest": false,
                "Published": false,
                "ModifiedUtc": null,
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "[js: parameters('AdminUserId')]",
                "Author": "[js: parameters('AdminUsername')]",
                "EntityCard": {
                  "Type": {
                    "Text": "Proposal"
                  },
                  "Limit": {
                    "Value": 5.0
                  },
                  "Caption": {
                    "Text": "Current proposals"
                  },
                  "Icon": {
                    "Text": "mdi-alert-circle-outline"
                  },
                  "ButtonText": {
                    "Text": "All Proposals"
                  },
                  "ButtonLink": {
                    "Text": "proposals"
                  }
                },
                "LocalizationPart": {
                  "LocalizationSet": "444sm3q8x1m6mv4cnk8b23vacc",
                  "Culture": "en"
                },
                "TitlePart": {
                  "Title": "Proposals"
                }
              }
            ]
          },
          "Trends": {
            "ContentItems": [
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "TrendingCard",
                "DisplayText": "Topics",
                "Latest": false,
                "Published": false,
                "ModifiedUtc": null,
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "[js: parameters('AdminUserId')]",
                "Author": "[js: parameters('AdminUsername')]",
                "TrendingCard": {
                  "Caption": {
                    "Text": "Most used topics across all activities"
                  },
                  "Type": {
                    "Text": "Topics"
                  },
                  "Icon": {
                    "Text": "mdi-pound"
                  },
                  "ButtonText": {
                    "Text": "All Topics"
                  }
                },
                "LocalizationPart": {
                  "LocalizationSet": "4nmfph1ps5dd80b7n9et6dyvxn",
                  "Culture": "en"
                },
                "TitlePart": {
                  "Title": "Topics"
                }
              }
            ]
          },
          "Footer": {
            "ContentItems": [
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "LandingPageFooterCard",
                "DisplayText": "User guide",
                "Latest": false,
                "Published": false,
                "ModifiedUtc": "2021-09-24T18:52:05.0220266Z",
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "[js: parameters('AdminUserId')]",
                "Author": "[js: parameters('AdminUsername')]",
                "LandingPageFooterCard": {
                  "Icon": {
                    "Text": "mdi-book-open-variant"
                  },
                  "Link": {
                    "Text": "#"
                  },
                  "Caption": {
                    "Text": "Learn more about the Radar"
                  }
                },
                "TitlePart": {
                  "Title": "User guide"
                }
              },
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "LandingPageFooterCard",
                "DisplayText": "Contact us",
                "Latest": false,
                "Published": false,
                "ModifiedUtc": "2021-09-24T18:52:05.0220266Z",
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "[js: parameters('AdminUserId')]",
                "Author": "[js: parameters('AdminUsername')]",
                "LandingPageFooterCard": {
                  "Icon": {
                    "Text": "mdi-email"
                  },
                  "Link": {
                    "Text": "#"
                  },
                  "Caption": {
                    "Text": "Ask questions and send feedback"
                  }
                },
                "TitlePart": {
                  "Title": "Contact us"
                }
              }
            ]
          }
        },
        {
          "ContentItemId": "[js: uuid()]",
          "ContentItemVersionId": null,
          "ContentType": "VAppBar",
          "DisplayText": null,
          "Latest": true,
          "Published": true,
          "ModifiedUtc": null,
          "PublishedUtc": null,
          "CreatedUtc": null,
          "Owner": "[js: parameters('AdminUserId')]",
          "Author": "[js: parameters('AdminUsername')]",
          "VAppBar": {
            "Props": {
              "Values": ["dark"]
            },
            "Color": {
              "Text": "#009688"
            },
            "Elevation": {
              "Value": 10.0
            },
            "ExtensionHeight": {
              "Value": 48.0
            },
            "ScrollThreshold": {
              "Value": null
            },
            "BackgroundImage": {
              "Paths": [],
              "MediaTexts": []
            },
            "Height": {
              "Value": null
            },
            "Width": {
              "Value": null
            }
          },
          "LayerMetadata": {
            "RenderTitle": false,
            "Position": 1.0,
            "Zone": "Header",
            "Layer": "All"
          }
        }
      ]
    },
    {
      "name": "Templates",
      "Templates": {
        "Content__LandingPage": {
          "Description": "A template for the Landing Page content type",
          "Content": "[file:text('Snippets/landingpage.liquid')]"
        }
      }
    },
    {
      "name": "lucene-index",
      "Indices": [
        {
          "search": {
            "AnalyzerName": "standardanalyzer",
            "IndexLatest": true,
            "IndexedContentTypes": [
              "Community",
              "Event",
              "Project",
              "Proposal",
              "Topic"
            ],
            "Culture": "any"
          }
        }
      ]
    },
    {
      "name": "Queries",
      "Queries": [
        {
          "Template": "select DocumentId\r\n    from ContentItemIndex \r\n    where ContentType = @contentType",
          "ReturnDocuments": true,
          "Name": "AllEntitiesSQL",
          "Source": "Sql",
          "Schema": null
        },
        {
          "Template": "select DocumentId\r\n    from ContentItemIndex \r\n    where ContentType = 'EntityList' and DisplayText = @name",
          "ReturnDocuments": true,
          "Name": "EntityListSQL",
          "Source": "Sql",
          "Schema": null
        },
        {
          "Template": "select DocumentId\r\n    from ContentItemIndex \r\n    where ContentType = @contentType and Published = true and Latest = true\r\n\tlimit @num",
          "ReturnDocuments": true,
          "Name": "AllEntitiesWithLimitSQL",
          "Source": "Sql",
          "Schema": null
        },
        {
          "Template": "select ContentType\r\n\tfrom TaxonomyIndex \r\n\twhere ContentField = @type and TermContentItemId = @id",
          "ReturnDocuments": false,
          "Name": "TaxonomyEntityCountSQL",
          "Source": "Sql",
          "Schema": null
        },
        {
          "Template": "select DocumentId from ContentItemIndex where DisplayText = 'Topics' and latest = true;",
          "ReturnDocuments": true,
          "Name": "AllTaxonomiesSQL",
          "Source": "Sql",
          "Schema": null
        },
        {
          "Template": "(\r\n  select TermContentItemId, count(TermContentItemId) as popularity \r\n  \tfrom TaxonomyIndex \r\n  \twhere ContentField = 'Topics' \r\n  \tgroup by TermContentItemId \r\n  \torder by popularity desc \r\n  \tlimit 3\r\n)\r\nunion all\r\n(\r\n  select TermContentItemId, count(TermContentItemId) as popularity \r\n  \tfrom TaxonomyIndex \r\n  \twhere ContentField = 'Topics' \r\n  \tgroup by TermContentItemId \r\n  \torder by popularity asc\r\n  \tlimit 3\r\n)",
          "ReturnDocuments": false,
          "Name": "TaxonomyPopularitySQL",
          "Source": "Sql",
          "Schema": null
        },
        {
          "Template": "select TermContentItemId, count(TermContentItemId) as popularity \r\n  \tfrom TaxonomyIndex \r\n  \twhere ContentField = 'Topics' \r\n  \tgroup by TermContentItemId \r\n  \torder by popularity desc \r\n  \tlimit 3",
          "ReturnDocuments": false,
          "Name": "TopicTrendingUpSQL",
          "Source": "Sql",
          "Schema": null
        },
        {
          "Template": "select TermContentItemId, count(TermContentItemId) as popularity \r\n  \tfrom TaxonomyIndex \r\n  \twhere ContentField = 'Topics' \r\n  \tgroup by TermContentItemId \r\n  \torder by popularity asc \r\n  \tlimit 3",
          "ReturnDocuments": false,
          "Name": "TopicTrendingDownSQL",
          "Source": "Sql",
          "Schema": null
        },
        {
          "Template": "select DocumentId\r\n\tfrom TaxonomyIndex \r\n\twhere ContentField = @type and TermContentItemId = @id",
          "ReturnDocuments": true,
          "Name": "TaxonomyEntitiesSQL",
          "Source": "Sql",
          "Schema": null
        },
        {
          "Index": "search",
          "Template": "{\r\n  \"query\": {\r\n    \"bool\": {\r\n      \"must\": [\r\n        {\r\n          \"wildcard\": {\r\n            \"Content.ContentItem.FullText\": \"{{ Term }}\"\r\n          }\r\n        },\r\n        {\r\n          \"wildcard\": {\r\n            \"Content.ContentItem.ContentType\": \"{{ Type }}\"\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}",
          "ReturnContentItems": true,
          "Name": "EntitySearchLucene",
          "Source": "Lucene",
          "Schema": null
        }
      ]
    }
  ]
}
