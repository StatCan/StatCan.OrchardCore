{
  "name": "radar-setup",
  "displayName": "Radar Setup",
  "description": "Recipe used to setup the Radar application.",
  "author": "Digital Innovation Team",
  "website": "https://digital.statcan.gc.ca",
  "version": "1.0",
  "issetuprecipe": true,
  "categories": ["radar"],
  "tags": ["innovation", "inno"],
  "steps": [
    {
      "name": "feature",
      "disable": [],
      "enable": [
        "StatCan.OrchardCore.Radar"
      ]
    },
    {
      "name": "recipes",
      "Values": [
        {
          "executionid": "ThemeSetup",
          "name": "vuetify-theme-setup"
        }
      ]
    },
    {
      "name": "media",
      "Files": [
        {
          "SourcePath": "../wwwroot/images/radar-icon-white.svg",
          "TargetPath": "radar-icon-white.svg"
        },
        {
          "SourcePath": "../wwwroot/images/icon_communities.svg",
          "TargetPath": "icon_communities.svg"
        },
        {
          "SourcePath": "../wwwroot/images/icon_events.svg",
          "TargetPath": "icon_events.svg"
        },
        {
          "SourcePath": "../wwwroot/images/icon_experiments.svg",
          "TargetPath": "icon_experiments.svg"
        },
        {
          "SourcePath": "../wwwroot/images/icon_opportunities.svg",
          "TargetPath": "icon_opportunities.svg"
        }
      ]
    },
    {
      "name": "custom-settings",
      "VuetifyThemeSettings": {
        "ContentItemId": "[js: uuid()]",
        "ContentItemVersionId": null,
        "ContentType": "VuetifyThemeSettings",
        "DisplayText": "",
        "Latest": false,
        "Published": false,
        "ModifiedUtc": null,
        "PublishedUtc": null,
        "CreatedUtc": null,
        "Owner": "[js: parameters('AdminUserId')]",
        "Author": "[js: parameters('AdminUsername')]",
        "VuetifyThemeSettings": {
          "DisplayName": {
            "Text": "Radar"
          },
          "Logo": {
            "Paths": [ "radar-icon-white.svg" ],
            "MediaTexts": [ "" ]
          },
          "DisplayMode": {
            "Text": "light"
          },
          "ThemeOptions": {
            "Text": null
          }
        }
      }
    },
    {
      "name": "content",
      "data": [
        {
          "ContentItemId": "[js: uuid()]",
          "ContentItemVersionId": null,
          "ContentType": "LandingPage",
          "DisplayText": "Digital Radar",
          "Latest": true,
          "Published": true,
          "ModifiedUtc": null,
          "PublishedUtc": null,
          "CreatedUtc": null,
          "Owner": "[js: parameters('AdminUserId')]",
          "Author": "[js: parameters('AdminUsername')]",
          "LandingPage": {
            "Description": {
              "Text": "Explore, manage and discover insights across your projects"
            },
            "Headerlist": {
              "Html": "\n  <ul>\n    <li>\n    \tDiscover pathfinding projects\n    </li>\n    <li>\n    \tExplore technologies and topics\n    </li>\n    <li>\n    \tShare your team's work\n    </li>\n  </ul>\n"
            }
          },
          "AutoroutePart": {
            "Path": "digital-radar",
            "SetHomepage": true,
            "Disabled": false,
            "RouteContainedItems": false,
            "Absolute": false
          },
          "LocalizationPart": {
            "LocalizationSet": "4xwnrm19d4119rg6szffxkfpwt",
            "Culture": "en"
          },
          "TitlePart": {
            "Title": "Digital Radar"
          },
          "Activities": {
            "ContentItems": [
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "Activity",
                "DisplayText": "Projects",
                "Latest": false,
                "Published": false,
                "ModifiedUtc": null,
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "",
                "Author": "admin",
                "Activity": {
                  "Icon": {
                    "Text": "mdi-flask-outline"
                  }
                },
                "HtmlBodyPart": {
                  "Html": "<div class=\"text-h5\">Projects</div><div class=\"text-h6\">In-flight projects</div>"
                },
                "LiquidPart": {
                  "Liquid": null
                },
                "TitlePart": {
                  "Title": "Projects"
                }
              },
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "Activity",
                "DisplayText": "Events",
                "Latest": false,
                "Published": false,
                "ModifiedUtc": null,
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "",
                "Author": "admin",
                "Activity": {
                  "Icon": {
                    "Text": "mdi-calendar"
                  }
                },
                "HtmlBodyPart": {
                  "Html": "<div class=\"text-h5\">Events</div><div class=\"text-h6\">Upcoming events</div>"
                },
                "LiquidPart": {
                  "Liquid": null
                },
                "TitlePart": {
                  "Title": "Events"
                }
              },
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "Activity",
                "DisplayText": "Committees",
                "Latest": false,
                "Published": false,
                "ModifiedUtc": null,
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "",
                "Author": "admin",
                "Activity": {
                  "Icon": {
                    "Text": "mdi-account-multiple"
                  }
                },
                "HtmlBodyPart": {
                  "Html": "<div class=\"text-h5\">Committees</div><div class=\"text-h6\">Latest committees</div>"
                },
                "LiquidPart": {
                  "Liquid": null
                },
                "TitlePart": {
                  "Title": "Committees"
                }
              },
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "Activity",
                "DisplayText": "Proposals",
                "Latest": false,
                "Published": false,
                "ModifiedUtc": null,
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "",
                "Author": "admin",
                "Activity": {
                  "Icon": {
                    "Text": "mdi-alert-circle-outline"
                  }
                },
                "HtmlBodyPart": {
                  "Html": "<div class=\"text-h5\">Proposals</div><div class=\"text-h6\">Current proposals</div>"
                },
                "LiquidPart": {
                  "Liquid": null
                },
                "TitlePart": {
                  "Title": "Proposals"
                }
              }
            ]
          },
          "Trends": {
            "ContentItems": [
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "Trend",
                "DisplayText": "Topics",
                "Latest": false,
                "Published": false,
                "ModifiedUtc": null,
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "",
                "Author": "admin",
                "Trend": {
                  "Icon": {
                    "Text": "mdi-pound"
                  }
                },
                "HtmlBodyPart": {
                  "Html": "<div class=\"text-h5\">Topics</div><div class=\"text-h6\">Most used topics across all activities</div>"
                },
                "LiquidPart": {
                  "Liquid": null
                },
                "TitlePart": {
                  "Title": "Topics"
                }
              }
            ]
          },
          "Footer": {
            "ContentItems": [
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "LandingPageFooterCard",
                "DisplayText": "",
                "Latest": false,
                "Published": false,
                "ModifiedUtc": null,
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "",
                "Author": "admin",
                "LandingPageFooterCard": {
                  "Icon": {
                    "Text": "mdi-book-open-variant"
                  }
                },
                "HtmlBodyPart": {
                  "Html": "<div class=\"text-h4\">User Guide</div><div class=\"text-p\">Learn more about the Radar</div>"
                }
              },
              {
                "ContentItemId": "[js: uuid()]",
                "ContentItemVersionId": null,
                "ContentType": "LandingPageFooterCard",
                "DisplayText": "",
                "Latest": false,
                "Published": false,
                "ModifiedUtc": null,
                "PublishedUtc": null,
                "CreatedUtc": null,
                "Owner": "",
                "Author": "admin",
                "LandingPageFooterCard": {
                  "Icon": {
                    "Text": "mdi-email"
                  }
                },
                "HtmlBodyPart": {
                  "Html": "<div class=\"text-h4\">Contact Us</div><div class=\"text-p\">Ask questions and send feedback</div>"
                }
              }
            ]
          }
        },
        {
          "ContentItemId": "[js: uuid()]",
          "ContentItemVersionId": null,
          "ContentType": "VAppBar",
          "DisplayText": null,
          "Latest": true,
          "Published": true,
          "ModifiedUtc": null,
          "PublishedUtc": null,
          "CreatedUtc": null,
          "Owner": "[js: parameters('AdminUserId')]",
          "Author": "[js: parameters('AdminUsername')]",
          "VAppBar": {
            "Props": {
              "Values": [ "dark" ]
            },
            "Color": {
              "Text": "#009688"
            },
            "Elevation": {
              "Value": 10.0
            },
            "ExtensionHeight": {
              "Value": 48.0
            },
            "ScrollThreshold": {
              "Value": null
            },
            "BackgroundImage": {
              "Paths": [],
              "MediaTexts": []
            },
            "Height": {
              "Value": null
            },
            "Width": {
              "Value": null
            }
          },
          "LayerMetadata": {
            "RenderTitle": false,
            "Position": 1.0,
            "Zone": "Header",
            "Layer": "All"
          }
        },
        {
          "ContentItemId": "[js: uuid()]",
          "ContentItemVersionId": null,
          "ContentType": "EntityList",
          "DisplayText": "Proposals",
          "Latest": true,
          "Published": true,
          "ModifiedUtc": null,
          "PublishedUtc": null,
          "CreatedUtc": null,
          "Owner": "[js: parameters('AdminUserId')]",
          "Author": "[js: parameters('AdminUsername')]",
          "EntityList": {
            "Image": {
              "Paths": [
                "icon_opportunities.svg"
              ],
              "MediaTexts": [
                ""
              ]
            }
          },
          "TitlePart": {
            "Title": "Proposals"
          },
          "LiquidPart": {
            "Liquid": "{% assign proposals = Queries.AllEntitiesSQL | query: contentType: \"Proposal\" %}\r\n<div class=\"table-container\">\r\n  <table class=\"table\" id=\"entity-table\">\r\n    <thead class=\"table-header\">\r\n      <tr>\r\n        <th class=\"name-col\">Name</th>\r\n        <th>Created</th>\r\n        <th>Visibility</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      {% for proposal in proposals %}\r\n      <tr class=\"table-row\">\r\n        <td class=\"name-col\">{{ proposal | display_text }}</td>\r\n        <td class=\"table-col\">\r\n          {{ proposal.CreatedUtc | local | date: \"%b %d, %Y\" }}\r\n        </td>\r\n        <td class=\"table-col\">\r\n          {% if proposal.Published %}\r\n          \tPublished\r\n          {% else %}\r\n          \tDraft\r\n          {% endif %}\r\n        </td>\r\n      </tr>\r\n      {% endfor %}\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<script type=\"application/javascript\">\r\nfunction search() {\r\n    var input, filter, table, tr, td, i, txtValue;\r\n    input = document.getElementById(\"search-input\");\r\n    filter = input.value.toLowerCase();\r\n    table = document.getElementById(\"entity-table\");\r\n    tr = table.getElementsByTagName(\"tr\");\r\n\r\n    for (i = 0; i < tr.length; i++) {\r\n        td = tr[i].getElementsByTagName(\"td\")[0]; // Filter based on the name\r\n        if (td) {\r\n            txtValue = td.textContent || td.innerText;\r\n            if (txtValue.toLowerCase().indexOf(filter) > -1) {\r\n                tr[i].style.display = \"\";\r\n            } else {\r\n                tr[i].style.display = \"none\";\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>"
          },
          "LocalizationPart": {
            "LocalizationSet": "4swd1468228sw2y908226nvsxd",
            "Culture": "en"
          },
          "AutoroutePart": {
            "Path": "proposals",
            "SetHomepage": false,
            "Disabled": false,
            "RouteContainedItems": false,
            "Absolute": false
          },
          "ContentPermissionsPart": {
            "Enabled": false,
            "Roles": []
          }
        },
        {
          "ContentItemId": "[js: uuid()]",
          "ContentItemVersionId": null,
          "ContentType": "EntityList",
          "DisplayText": "Projects",
          "Latest": true,
          "Published": true,
          "ModifiedUtc": null,
          "PublishedUtc": null,
          "CreatedUtc": null,
          "Owner": "[js: parameters('AdminUserId')]",
          "Author": "[js: parameters('AdminUsername')]",
          "EntityList": {
            "Image": {
              "Paths": [
                "icon_experiments.svg"
              ],
              "MediaTexts": [
                ""
              ]
            }
          },
          "TitlePart": {
            "Title": "Projects"
          },
          "LiquidPart": {
            "Liquid": "{% assign projects = Queries.AllEntitiesSQL | query: contentType: \"Project\" %}\r\n<div class=\"table-container\">\r\n  <table class=\"table\" id=\"entity-table\">\r\n    <thead class=\"table-header\">\r\n      <tr>\r\n        <th class=\"name-col\">Name</th>\r\n        <th>Updated</th>\r\n        <th>Registrar</th>\r\n        <th>Visibility</th>\r\n        <th>Created</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      {% for project in projects %}\r\n      <tr class=\"table-row\">\r\n        <td class=\"name-col\">{{ project | display_text }}</td>\r\n        <td class=\"table-col\">\r\n          {{ project.ModifiedUtc | local | date: \"%b %d, %Y\" }}\r\n        </td>\r\n        <td class=\"table-col\">{{ project.Owner }}</td>\r\n        <td class=\"table-col\">\r\n          {% if project.Published %}\r\n          \tPublished\r\n          {% else %}\r\n          \tDraft\r\n          {% endif %}\r\n        </td>\r\n        <td class=\"table-col\">\r\n          {{ project.CreatedUtc | local | date: \"%b %d, %Y\" }}\r\n        </td>\r\n      </tr>\r\n      {% endfor %}\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<script type=\"application/javascript\">\r\nfunction search() {\r\n    var input, filter, table, tr, td, i, txtValue;\r\n    input = document.getElementById(\"search-input\");\r\n    filter = input.value.toLowerCase();\r\n    table = document.getElementById(\"entity-table\");\r\n    tr = table.getElementsByTagName(\"tr\");\r\n\r\n    for (i = 0; i < tr.length; i++) {\r\n        td = tr[i].getElementsByTagName(\"td\")[0]; // Filter based on the name\r\n        if (td) {\r\n            txtValue = td.textContent || td.innerText;\r\n            if (txtValue.toLowerCase().indexOf(filter) > -1) {\r\n                tr[i].style.display = \"\";\r\n            } else {\r\n                tr[i].style.display = \"none\";\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>"
          },
          "LocalizationPart": {
            "LocalizationSet": "48aapabjc93c43jwbrkh5c9wwj",
            "Culture": "en"
          },
          "AutoroutePart": {
            "Path": "projects",
            "SetHomepage": false,
            "Disabled": false,
            "RouteContainedItems": false,
            "Absolute": false
          },
          "ContentPermissionsPart": {
            "Enabled": false,
            "Roles": []
          }
        },
        {
          "ContentItemId": "[js: uuid()]",
          "ContentItemVersionId": null,
          "ContentType": "EntityList",
          "DisplayText": "Communities",
          "Latest": true,
          "Published": true,
          "ModifiedUtc": null,
          "PublishedUtc": null,
          "CreatedUtc": null,
          "Owner": "[js: parameters('AdminUserId')]",
          "Author": "[js: parameters('AdminUsername')]",
          "EntityList": {
            "Image": {
              "Paths": [
                "icon_communities.svg"
              ],
              "MediaTexts": [
                ""
              ]
            }
          },
          "TitlePart": {
            "Title": "Communities"
          },
          "LiquidPart": {
            "Liquid": "{% assign communities = Queries.AllEntitiesSQL | query: contentType: \"Community\" %}\r\n<div class=\"table-container\">\r\n  <table class=\"table\" id=\"entity-table\">\r\n    <thead class=\"table-header\">\r\n      <tr>\r\n        <th class=\"name-col\">Name</th>\r\n        <th>Members</th>\r\n        <th>Owner</th>\r\n        <th>Type</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      {% for community in communities %}\r\n      <tr class=\"table-row\">\r\n        <td class=\"name-col\">{{ community | display_text }}</td>\r\n        <td class=\"table-col\">\r\n          <div class=\"icon-cell\">\r\n            <v-icon color=\"black\">mdi-account</v-icon>\r\n          \t<div>{{ community.ContentItem.Content.CommunityMember.ContentItems | size }}</div>\r\n          </div>  \r\n        </td>\r\n        <td class=\"table-col\">{{ community.Owner }}</td>\r\n        <td class=\"table-col\">{{ community.ContentItem.Content.Community.Type.TagNames.first }}</td>\r\n      </tr>\r\n      {% endfor %}\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<script type=\"application/javascript\">\r\nfunction search() {\r\n    var input, filter, table, tr, td, i, txtValue;\r\n    input = document.getElementById(\"search-input\");\r\n    filter = input.value.toLowerCase();\r\n    table = document.getElementById(\"entity-table\");\r\n    tr = table.getElementsByTagName(\"tr\");\r\n\r\n    for (i = 0; i < tr.length; i++) {\r\n        td = tr[i].getElementsByTagName(\"td\")[0]; // Filter based on the name\r\n        if (td) {\r\n            txtValue = td.textContent || td.innerText;\r\n            if (txtValue.toLowerCase().indexOf(filter) > -1) {\r\n                tr[i].style.display = \"\";\r\n            } else {\r\n                tr[i].style.display = \"none\";\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>"
          },
          "LocalizationPart": {
            "LocalizationSet": "4yhc97t6jjsq2w04xzrbe3h451",
            "Culture": "en"
          },
          "AutoroutePart": {
            "Path": "communities",
            "SetHomepage": false,
            "Disabled": false,
            "RouteContainedItems": false,
            "Absolute": false
          },
          "ContentPermissionsPart": {
            "Enabled": false,
            "Roles": []
          }
        },
        {
          "ContentItemId": "[js: uuid()]",
          "ContentItemVersionId": null,
          "ContentType": "EntityList",
          "DisplayText": "Events",
          "Latest": true,
          "Published": true,
          "ModifiedUtc": null,
          "PublishedUtc": null,
          "CreatedUtc": null,
          "Owner": "[js: parameters('AdminUserId')]",
          "Author": "[js: parameters('AdminUsername')]",
          "EntityList": {
            "Image": {
              "Paths": [
                "icon_events.svg"
              ],
              "MediaTexts": [
                ""
              ]
            }
          },
          "TitlePart": {
            "Title": "Events"
          },
          "LiquidPart": {
            "Liquid": "{% assign events = Queries.AllEntitiesSQL | query: contentType: \"Event\" %}\r\n<div class=\"table-container\">\r\n  <table class=\"table\" id=\"entity-table\">\r\n    <thead class=\"table-header\">\r\n      <tr>\r\n        <th class=\"name-col\">Name</th>\r\n        <th>Date</th>\r\n        <th>Organizer</th>\r\n        <th>Visibility</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      {% for event in events %}\r\n      <tr class=\"table-row\">\r\n        <td class=\"name-col\">{{ event | display_text }}</td>\r\n        <td class=\"table-col\">\r\n          <div>{{ event.ContentItem.Content.Event.StartDate.Value | local | date: \"%b %d, %Y\" }} - {{ event.ContentItem.Content.Event.EndDate.Value | local | date: \"%b %d, %Y\" }}</div>\r\n          <div>{{ event.ContentItem.Content.Event.StartDate.Value | local | date: \"%H:%M %p\" }} - {{ event.ContentItem.Content.Event.EndDate.Value | local | date: \"%H:%M %p\" }}</div>\r\n        </td>\r\n        <td class=\"table-col\">{{ event.ContentItem.Content.EventOrganizer.ContentItems.first.EventOrganizer.Organizer.UserNames.first }}</td>\r\n        <td class=\"table-col\">\r\n          {% if event.Published %}\r\n          \tPublished\r\n          {% else %}\r\n          \tDraft\r\n          {% endif %}\r\n        </td>\r\n      </tr>\r\n      {% endfor %}\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<script type=\"application/javascript\">\r\nfunction search() {\r\n    var input, filter, table, tr, td, i, txtValue;\r\n    input = document.getElementById(\"search-input\");\r\n    filter = input.value.toLowerCase();\r\n    table = document.getElementById(\"entity-table\");\r\n    tr = table.getElementsByTagName(\"tr\");\r\n\r\n    for (i = 0; i < tr.length; i++) {\r\n        td = tr[i].getElementsByTagName(\"td\")[0]; // Filter based on the name\r\n        if (td) {\r\n            txtValue = td.textContent || td.innerText;\r\n            if (txtValue.toLowerCase().indexOf(filter) > -1) {\r\n                tr[i].style.display = \"\";\r\n            } else {\r\n                tr[i].style.display = \"none\";\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>"
          },
          "LocalizationPart": {
            "LocalizationSet": "45btr33t81ass3eb7n7b0gsrmj",
            "Culture": "en"
          },
          "AutoroutePart": {
            "Path": "events",
            "SetHomepage": false,
            "Disabled": false,
            "RouteContainedItems": false,
            "Absolute": false
          },
          "ContentPermissionsPart": {
            "Enabled": false,
            "Roles": []
          }
        }
      ]
    },
    {
      "name": "Templates",
      "Templates": {
        "Content__LandingPage": {
          "Description": "A template for the Landing Page content type",
          "Content": "[file:text('Snippets/landingpage.liquid')]"
        }
      }
    },
    {
      "name": "Queries",
      "Queries": [
        {
          "Template": "select DocumentId\r\n    from ContentItemIndex \r\n    where ContentType = @contentType",
          "ReturnDocuments": true,
          "Name": "AllEntitiesSQL",
          "Source": "Sql",
          "Schema": null
        }
      ]
    }
  ]
}
