/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

// register VeeValidate components globally
Vue.component('validation-provider', VeeValidate.ValidationProvider);
Vue.component('validation-observer', VeeValidate.ValidationObserver); // include default english and french translations.

VeeValidate.localize({
  en: {
    "code": "en",
    "messages": {
      "alpha": "The {_field_} field may only contain alphabetic characters",
      "alpha_num": "The {_field_} field may only contain alpha-numeric characters",
      "alpha_dash": "The {_field_} field may contain alpha-numeric characters as well as dashes and underscores",
      "alpha_spaces": "The {_field_} field may only contain alphabetic characters as well as spaces",
      "between": "The {_field_} field must be between {min} and {max}",
      "confirmed": "The {_field_} field confirmation does not match",
      "digits": "The {_field_} field must be numeric and exactly contain {length} digits",
      "dimensions": "The {_field_} field must be {width} pixels by {height} pixels",
      "email": "The {_field_} field must be a valid email",
      "excluded": "The {_field_} field is not a valid value",
      "ext": "The {_field_} field is not a valid file",
      "image": "The {_field_} field must be an image",
      "integer": "The {_field_} field must be an integer",
      "length": "The {_field_} field must be {length} long",
      "max_value": "The {_field_} field must be {max} or less",
      "max": "The {_field_} field may not be greater than {length} characters",
      "mimes": "The {_field_} field must have a valid file type",
      "min_value": "The {_field_} field must be {min} or more",
      "min": "The {_field_} field must be at least {length} characters",
      "numeric": "The {_field_} field may only contain numeric characters",
      "oneOf": "The {_field_} field is not a valid value",
      "regex": "The {_field_} field format is invalid",
      "required_if": "The {_field_} field is required",
      "required": "The {_field_} field is required",
      "size": "The {_field_} field size must be less than {size}KB"
    }
  },
  fr: {
    "code": "fr",
    "messages": {
      "alpha": "Le champ {_field_} ne peut contenir que des lettres",
      "alpha_num": "Le champ {_field_} ne peut contenir que des caractères alpha-numériques",
      "alpha_dash": "Le champ {_field_} ne peut contenir que des caractères alpha-numériques, tirets ou soulignés",
      "alpha_spaces": "Le champ {_field_} ne peut contenir que des lettres ou des espaces",
      "between": "Le champ {_field_} doit être compris entre {min} et {max}",
      "confirmed": "Le champ {_field_} ne correspond pas",
      "digits": "Le champ {_field_} doit être un nombre entier de {length} chiffres",
      "dimensions": "Le champ {_field_} doit avoir une taille de {width} pixels par {height} pixels",
      "email": "Le champ {_field_} doit être une adresse e-mail valide",
      "excluded": "Le champ {_field_} doit être une valeur valide",
      "ext": "Le champ {_field_} doit être un fichier valide",
      "image": "Le champ {_field_} doit être une image",
      "integer": "Le champ {_field_} doit être un entier",
      "length": "Le champ {_field_} doit contenir {length} caractères",
      "max_value": "Le champ {_field_} doit avoir une valeur de {max} ou moins",
      "max": "Le champ {_field_} ne peut pas contenir plus de {length} caractères",
      "mimes": "Le champ {_field_} doit avoir un type MIME valide",
      "min_value": "Le champ {_field_} doit avoir une valeur de {min} ou plus",
      "min": "Le champ {_field_} doit contenir au minimum {length} caractères",
      "numeric": "Le champ {_field_} ne peut contenir que des chiffres",
      "oneOf": "Le champ {_field_} doit être une valeur valide",
      "regex": "Le champ {_field_} est invalide",
      "required": "Le champ {_field_} est obligatoire",
      "required_if": "Le champ {_field_} est obligatoire lorsque {target} possède cette valeur",
      "size": "Le champ {_field_} doit avoir un poids inférieur à {size}KB"
    }
  }
});
"use strict"; // run init script

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function initForm(app) {
  // Set VeeValidate language based on the lang parameter
  VeeValidate.localize(app.dataset.lang);
  var componentOptions = app.dataset.options;
  var parsedOptions = {};

  if (componentOptions) {
    var fn = new Function("return ".concat(atob(componentOptions), ";"));
    parsedOptions = fn();
  }

  var _parsedOptions = parsedOptions,
      parsedData = _parsedOptions.data,
      parsedMethods = _parsedOptions.methods,
      parsedRest = _objectWithoutProperties(_parsedOptions, ["data", "methods"]);

  var objData = parsedData;

  if (typeof parsedData === "function") {
    objData = parsedData();
  }

  var defaultFormData = {
    submitting: false,
    submitSuccess: false,
    successMessage: undefined,
    submitError: false,
    submitValidationError: false,
    errorMessage: undefined
  }; //todo component name

  Vue.component(app.dataset.name, _objectSpread(_objectSpread({}, parsedRest), {}, {
    template: "#".concat(app.dataset.name),
    data: function data() {
      return _objectSpread(_objectSpread({}, objData), {}, {
        form: _objectSpread({}, defaultFormData)
      });
    },
    methods: _objectSpread(_objectSpread({}, parsedMethods), {}, {
      formReset: function formReset() {
        Object.assign(this.$data.form, _objectSpread({}, defaultFormData)); // also reset the VeeValidate observer

        this.$refs.obs.reset();
      },
      formHandleSubmit: function formHandleSubmit(e) {
        e.preventDefault();
        var vm = this; // keep a reference to the VeeValidate observer

        var observer = vm.$refs.obs;
        observer.validate().then(function (valid) {
          if (valid) {
            var action = vm.$refs.form.getAttribute("action");
            var token = vm.$refs.form.querySelector('input[name="__RequestVerificationToken"]');
            ;
            vm.form.submitting = true;
            $.ajax({
              type: "POST",
              url: action,
              data: _objectSpread(_objectSpread({}, vm.$data), {}, {
                __RequestVerificationToken: token.value
              }),
              cache: false,
              dataType: "json",
              success: function success(data) {
                Object.assign(vm.$data.form, _objectSpread({}, defaultFormData)); // if there are validation errors on the form, display them.

                if (data.validationError) {
                  vm.form.submitValidationError = true;
                  vm.form.errorMessage = data.errorMessage;
                  observer.setErrors(data.errors);
                  return;
                } // if the server sends a redirect, reload the window


                if (data.redirect) {
                  window.location.href = data.redirect;
                  return;
                } //success, set the form success message 


                if (data.success) {
                  vm.form.submitSuccess = true;
                  vm.form.successMessage = data.successMessage;
                  return;
                }

                vm.form.submitError = true; // something went wrong, dev issue

                vm.form.errorMessage = "Something wen't wrong. Please report this to your site administrators. Error code: `VueForms.AjaxHandler`";
              },
              error: function error(xhr, statusText) {
                Object.assign(vm.$data.form, _objectSpread({}, defaultFormData));
                vm.form.submitError = true;
                vm.form.errorMessage = "".concat(xhr.status, " ").concat(statusText);
              }
            });
          }
        });
        return false;
      }
    })
  })); // run the vue-form init script provided in the OC admin ui

  var initScript = app.dataset.initScript;

  if (initScript) {
    var initFn = new Function(atob(initScript));
    initFn();
  }
}

document.addEventListener("DOMContentLoaded", function (event) {
  // look for all vue forms when this script is loaded and initialize them
  document.querySelectorAll(".vue-form").forEach(initForm);
  var formLoadedEvent = new Event('vue-form-component-loaded');
  document.dispatchEvent(formLoadedEvent);
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlZXZhbGlkYXRlLXNldHVwLmpzIiwidnVlLWZvcm1zLmpzIl0sIm5hbWVzIjpbIlZ1ZSIsImNvbXBvbmVudCIsIlZlZVZhbGlkYXRlIiwiVmFsaWRhdGlvblByb3ZpZGVyIiwiVmFsaWRhdGlvbk9ic2VydmVyIiwibG9jYWxpemUiLCJlbiIsImZyIiwiaW5pdEZvcm0iLCJhcHAiLCJkYXRhc2V0IiwibGFuZyIsImNvbXBvbmVudE9wdGlvbnMiLCJvcHRpb25zIiwicGFyc2VkT3B0aW9ucyIsImZuIiwiRnVuY3Rpb24iLCJhdG9iIiwicGFyc2VkRGF0YSIsImRhdGEiLCJwYXJzZWRNZXRob2RzIiwibWV0aG9kcyIsInBhcnNlZFJlc3QiLCJvYmpEYXRhIiwiZGVmYXVsdEZvcm1EYXRhIiwic3VibWl0dGluZyIsInN1Ym1pdFN1Y2Nlc3MiLCJzdWNjZXNzTWVzc2FnZSIsInVuZGVmaW5lZCIsInN1Ym1pdEVycm9yIiwic3VibWl0VmFsaWRhdGlvbkVycm9yIiwiZXJyb3JNZXNzYWdlIiwibmFtZSIsInRlbXBsYXRlIiwiZm9ybSIsImZvcm1SZXNldCIsIk9iamVjdCIsImFzc2lnbiIsIiRkYXRhIiwiJHJlZnMiLCJvYnMiLCJyZXNldCIsImZvcm1IYW5kbGVTdWJtaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJ2bSIsIm9ic2VydmVyIiwidmFsaWRhdGUiLCJ0aGVuIiwidmFsaWQiLCJhY3Rpb24iLCJnZXRBdHRyaWJ1dGUiLCJ0b2tlbiIsInF1ZXJ5U2VsZWN0b3IiLCIkIiwiYWpheCIsInR5cGUiLCJ1cmwiLCJfX1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbiIsInZhbHVlIiwiY2FjaGUiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJ2YWxpZGF0aW9uRXJyb3IiLCJzZXRFcnJvcnMiLCJlcnJvcnMiLCJyZWRpcmVjdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImVycm9yIiwieGhyIiwic3RhdHVzVGV4dCIsInN0YXR1cyIsImluaXRTY3JpcHQiLCJpbml0Rm4iLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZm9ybUxvYWRlZEV2ZW50IiwiRXZlbnQiLCJkaXNwYXRjaEV2ZW50Il0sIm1hcHBpbmdzIjoiOzs7OztBQUNBO0FBQ0FBLEdBQUcsQ0FBQ0MsU0FBSixDQUFjLHFCQUFkLEVBQXFDQyxXQUFXLENBQUNDLGtCQUFqRDtBQUNBSCxHQUFHLENBQUNDLFNBQUosQ0FBYyxxQkFBZCxFQUFxQ0MsV0FBVyxDQUFDRSxrQkFBakQsRSxDQUVBOztBQUNBRixXQUFXLENBQUNHLFFBQVosQ0FBcUI7QUFDbkJDLEVBQUFBLEVBQUUsRUFBQztBQUNELFlBQVEsSUFEUDtBQUVELGdCQUFZO0FBQ1YsZUFBUyw0REFEQztBQUVWLG1CQUFhLCtEQUZIO0FBR1Ysb0JBQWMsNEZBSEo7QUFJVixzQkFBZ0IsOEVBSk47QUFLVixpQkFBVyxxREFMRDtBQU1WLG1CQUFhLGlEQU5IO0FBT1YsZ0JBQVUseUVBUEE7QUFRVixvQkFBYywrREFSSjtBQVNWLGVBQVMsMkNBVEM7QUFVVixrQkFBWSwwQ0FWRjtBQVdWLGFBQU8seUNBWEc7QUFZVixlQUFTLHNDQVpDO0FBYVYsaUJBQVcsd0NBYkQ7QUFjVixnQkFBVSwyQ0FkQTtBQWVWLG1CQUFhLDJDQWZIO0FBZ0JWLGFBQU8saUVBaEJHO0FBaUJWLGVBQVMsaURBakJDO0FBa0JWLG1CQUFhLDJDQWxCSDtBQW1CVixhQUFPLDBEQW5CRztBQW9CVixpQkFBVyx5REFwQkQ7QUFxQlYsZUFBUywwQ0FyQkM7QUFzQlYsZUFBUyx1Q0F0QkM7QUF1QlYscUJBQWUsaUNBdkJMO0FBd0JWLGtCQUFZLGlDQXhCRjtBQXlCVixjQUFRO0FBekJFO0FBRlgsR0FEZ0I7QUErQm5CQyxFQUFBQSxFQUFFLEVBQUU7QUFDRixZQUFRLElBRE47QUFFRixnQkFBWTtBQUNWLGVBQVMscURBREM7QUFFVixtQkFBYSx5RUFGSDtBQUdWLG9CQUFjLDhGQUhKO0FBSVYsc0JBQWdCLG9F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QVQsRUFBZ0I7QUFDNUQ7QUFDQUYsRUFBQUEsUUFBUSxDQUFDRyxnQkFBVCxDQUEwQixXQUExQixFQUF1Q0MsT0FBdkMsQ0FBK0N4RSxRQUEvQztBQUNBLE1BQU15RSxlQUFlLEdBQUcsSUFBSUMsS0FBSixDQUFVLDJCQUFWLENBQXhCO0FBQ0FOLEVBQUFBLFFBQVEsQ0FBQ08sYUFBVCxDQUF1QkYsZUFBdkI7QUFDRCxDQUxEIiwiZmlsZSI6InZ1ZS1mb3Jtcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuLy8gcmVnaXN0ZXIgVmVlVmFsaWRhdGUgY29tcG9uZW50cyBnbG9iYWxseVxuVnVlLmNvbXBvbmVudCgndmFsaWRhdGlvbi1wcm92aWRlcicsIFZlZVZhbGlkYXRlLlZhbGlkYXRpb25Qcm92aWRlcik7XG5WdWUuY29tcG9uZW50KCd2YWxpZGF0aW9uLW9ic2VydmVyJywgVmVlVmFsaWRhdGUuVmFsaWRhdGlvbk9ic2VydmVyKTsgXG5cbi8vIGluY2x1ZGUgZGVmYXVsdCBlbmdsaXNoIGFuZCBmcmVuY2ggdHJhbnNsYXRpb25zLlxuVmVlVmFsaWRhdGUubG9jYWxpemUoe1xuICBlbjp7XG4gICAgXCJjb2RlXCI6IFwiZW5cIixcbiAgICBcIm1lc3NhZ2VzXCI6IHtcbiAgICAgIFwiYWxwaGFcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG1heSBvbmx5IGNvbnRhaW4gYWxwaGFiZXRpYyBjaGFyYWN0ZXJzXCIsXG4gICAgICBcImFscGhhX251bVwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbWF5IG9ubHkgY29udGFpbiBhbHBoYS1udW1lcmljIGNoYXJhY3RlcnNcIixcbiAgICAgIFwiYWxwaGFfZGFzaFwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbWF5IGNvbnRhaW4gYWxwaGEtbnVtZXJpYyBjaGFyYWN0ZXJzIGFzIHdlbGwgYXMgZGFzaGVzIGFuZCB1bmRlcnNjb3Jlc1wiLFxuICAgICAgXCJhbHBoYV9zcGFjZXNcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG1heSBvbmx5IGNvbnRhaW4gYWxwaGFiZXRpYyBjaGFyYWN0ZXJzIGFzIHdlbGwgYXMgc3BhY2VzXCIsXG4gICAgICBcImJldHdlZW5cIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgYmUgYmV0d2VlbiB7bWlufSBhbmQge21heH1cIixcbiAgICAgIFwiY29uZmlybWVkXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBjb25maXJtYXRpb24gZG9lcyBub3QgbWF0Y2hcIixcbiAgICAgIFwiZGlnaXRzXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBtdXN0IGJlIG51bWVyaWMgYW5kIGV4YWN0bHkgY29udGFpbiB7bGVuZ3RofSBkaWdpdHNcIixcbiAgICAgIFwiZGltZW5zaW9uc1wiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbXVzdCBiZSB7d2lkdGh9IHBpeGVscyBieSB7aGVpZ2h0fSBwaXhlbHNcIixcbiAgICAgIFwiZW1haWxcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgYmUgYSB2YWxpZCBlbWFpbFwiLFxuICAgICAgXCJleGNsdWRlZFwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgaXMgbm90IGEgdmFsaWQgdmFsdWVcIixcbiAgICAgIFwiZXh0XCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBpcyBub3QgYSB2YWxpZCBmaWxlXCIsXG4gICAgICBcImltYWdlXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBtdXN0IGJlIGFuIGltYWdlXCIsXG4gICAgICBcImludGVnZXJcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgYmUgYW4gaW50ZWdlclwiLFxuICAgICAgXCJsZW5ndGhcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgYmUge2xlbmd0aH0gbG9uZ1wiLFxuICAgICAgXCJtYXhfdmFsdWVcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgYmUge21heH0gb3IgbGVzc1wiLFxuICAgICAgXCJtYXhcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG1heSBub3QgYmUgZ3JlYXRlciB0aGFuIHtsZW5ndGh9IGNoYXJhY3RlcnNcIixcbiAgICAgIFwibWltZXNcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgaGF2ZSBhIHZhbGlkIGZpbGUgdHlwZVwiLFxuICAgICAgXCJtaW5fdmFsdWVcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgYmUge21pbn0gb3IgbW9yZVwiLFxuICAgICAgXCJtaW5cIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgYmUgYXQgbGVhc3Qge2xlbmd0aH0gY2hhcmFjdGVyc1wiLFxuICAgICAgXCJudW1lcmljXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBtYXkgb25seSBjb250YWluIG51bWVyaWMgY2hhcmFjdGVyc1wiLFxuICAgICAgXCJvbmVPZlwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgaXMgbm90IGEgdmFsaWQgdmFsdWVcIixcbiAgICAgIFwicmVnZXhcIjogXCJUaGUge19maWVsZF99IGZpZWxkIGZvcm1hdCBpcyBpbnZhbGlkXCIsXG4gICAgICBcInJlcXVpcmVkX2lmXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBpcyByZXF1aXJlZFwiLFxuICAgICAgXCJyZXF1aXJlZFwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgaXMgcmVxdWlyZWRcIixcbiAgICAgIFwic2l6ZVwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgc2l6ZSBtdXN0IGJlIGxlc3MgdGhhbiB7c2l6ZX1LQlwiXG4gICAgfVxuICB9LFxuICBmcjoge1xuICAgIFwiY29kZVwiOiBcImZyXCIsXG4gICAgXCJtZXNzYWdlc1wiOiB7XG4gICAgICBcImFscGhhXCI6IFwiTGUgY2hhbXAge19maWVsZF99IG5lIHBldXQgY29udGVuaXIgcXVlIGRlcyBsZXR0cmVzXCIsXG4gICAgICBcImFscGhhX251bVwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBuZSBwZXV0IGNvbnRlbmlyIHF1ZSBkZXMgY2FyYWN0w6hyZXMgYWxwaGEtbnVtw6lyaXF1ZXNcIixcbiAgICAgIFwiYWxwaGFfZGFzaFwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBuZSBwZXV0IGNvbnRlbmlyIHF1ZSBkZXMgY2FyYWN0w6hyZXMgYWxwaGEtbnVtw6lyaXF1ZXMsIHRpcmV0cyBvdSBzb3VsaWduw6lzXCIsXG4gICAgICBcImFscGhhX3NwYWNlc1wiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBuZSBwZXV0IGNvbnRlbmlyIHF1ZSBkZXMgbGV0dHJlcyBvdSBkZXMgZXNwYWNlc1wiLFxuICAgICAgXCJiZXR3ZWVuXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgw6p0cmUgY29tcHJpcyBlbnRyZSB7bWlufSBldCB7bWF4fVwiLFxuICAgICAgXCJjb25maXJtZWRcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gbmUgY29ycmVzcG9uZCBwYXNcIixcbiAgICAgIFwiZGlnaXRzXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgw6p0cmUgdW4gbm9tYnJlIGVudGllciBkZSB7bGVuZ3RofSBjaGlmZnJlc1wiLFxuICAgICAgXCJkaW1lbnNpb25zXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgYXZvaXIgdW5lIHRhaWxsZSBkZSB7d2lkdGh9IHBpeGVscyBwYXIge2hlaWdodH0gcGl4ZWxzXCIsXG4gICAgICBcImVtYWlsXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgw6p0cmUgdW5lIGFkcmVzc2UgZS1tYWlsIHZhbGlkZVwiLFxuICAgICAgXCJleGNsdWRlZFwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBkb2l0IMOqdHJlIHVuZSB2YWxldXIgdmFsaWRlXCIsXG4gICAgICBcImV4dFwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBkb2l0IMOqdHJlIHVuIGZpY2hpZXIgdmFsaWRlXCIsXG4gICAgICBcImltYWdlXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgw6p0cmUgdW5lIGltYWdlXCIsXG4gICAgICBcImludGVnZXJcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZG9pdCDDqnRyZSB1biBlbnRpZXJcIixcbiAgICAgIFwibGVuZ3RoXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgY29udGVuaXIge2xlbmd0aH0gY2FyYWN0w6hyZXNcIixcbiAgICAgIFwibWF4X3ZhbHVlXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgYXZvaXIgdW5lIHZhbGV1ciBkZSB7bWF4fSBvdSBtb2luc1wiLFxuICAgICAgXCJtYXhcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gbmUgcGV1dCBwYXMgY29udGVuaXIgcGx1cyBkZSB7bGVuZ3RofSBjYXJhY3TDqHJlc1wiLFxuICAgICAgXCJtaW1lc1wiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBkb2l0IGF2b2lyIHVuIHR5cGUgTUlNRSB2YWxpZGVcIixcbiAgICAgIFwibWluX3ZhbHVlXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgYXZvaXIgdW5lIHZhbGV1ciBkZSB7bWlufSBvdSBwbHVzXCIsXG4gICAgICBcIm1pblwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBkb2l0IGNvbnRlbmlyIGF1IG1pbmltdW0ge2xlbmd0aH0gY2FyYWN0w6hyZXNcIixcbiAgICAgIFwibnVtZXJpY1wiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBuZSBwZXV0IGNvbnRlbmlyIHF1ZSBkZXMgY2hpZmZyZXNcIixcbiAgICAgIFwib25lT2ZcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZG9pdCDDqnRyZSB1bmUgdmFsZXVyIHZhbGlkZVwiLFxuICAgICAgXCJyZWdleFwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBlc3QgaW52YWxpZGVcIixcbiAgICAgIFwicmVxdWlyZWRcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZXN0IG9ibGlnYXRvaXJlXCIsXG4gICAgICBcInJlcXVpcmVkX2lmXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGVzdCBvYmxpZ2F0b2lyZSBsb3JzcXVlIHt0YXJnZXR9IHBvc3PDqGRlIGNldHRlIHZhbGV1clwiLFxuICAgICAgXCJzaXplXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgYXZvaXIgdW4gcG9pZHMgaW5mw6lyaWV1ciDDoCB7c2l6ZX1LQlwiXG4gICAgfVxuICB9LFxufSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLy8gcnVuIGluaXQgc2NyaXB0XG5mdW5jdGlvbiBpbml0Rm9ybShhcHApIHtcblxuICAvLyBTZXQgVmVlVmFsaWRhdGUgbGFuZ3VhZ2UgYmFzZWQgb24gdGhlIGxhbmcgcGFyYW1ldGVyXG4gIFZlZVZhbGlkYXRlLmxvY2FsaXplKGFwcC5kYXRhc2V0LmxhbmcpO1xuXG4gIGxldCBjb21wb25lbnRPcHRpb25zID0gYXBwLmRhdGFzZXQub3B0aW9ucztcblxuICBsZXQgcGFyc2VkT3B0aW9ucyA9IHt9O1xuICBpZihjb21wb25lbnRPcHRpb25zKSAge1xuICAgIGNvbnN0IGZuID0gbmV3IEZ1bmN0aW9uKGByZXR1cm4gJHthdG9iKGNvbXBvbmVudE9wdGlvbnMpfTtgKTtcbiAgICBwYXJzZWRPcHRpb25zID0gZm4oKTtcbiAgfVxuXG4gIGNvbnN0IHsgZGF0YTogcGFyc2VkRGF0YSwgbWV0aG9kczogcGFyc2VkTWV0aG9kcywgLi4ucGFyc2VkUmVzdCB9ID0gcGFyc2VkT3B0aW9ucztcbiAgbGV0IG9iakRhdGEgPSBwYXJzZWREYXRhO1xuICBpZih0eXBlb2YgcGFyc2VkRGF0YSA9PT0gXCJmdW5jdGlvblwiKVxuICB7XG4gICAgb2JqRGF0YSA9IHBhcnNlZERhdGEoKTtcbiAgfVxuICBjb25zdCBkZWZhdWx0Rm9ybURhdGEgPSB7XG4gICAgc3VibWl0dGluZzogZmFsc2UsXG4gICAgc3VibWl0U3VjY2VzczogZmFsc2UsXG4gICAgc3VjY2Vzc01lc3NhZ2U6IHVuZGVmaW5lZCxcbiAgICBzdWJtaXRFcnJvcjogZmFsc2UsXG4gICAgc3VibWl0VmFsaWRhdGlvbkVycm9yOiBmYWxzZSxcbiAgICBlcnJvck1lc3NhZ2U6IHVuZGVmaW5lZFxuICB9XG5cbiAgLy90b2RvIGNvbXBvbmVudCBuYW1lXG4gIFZ1ZS5jb21wb25lbnQoYXBwLmRhdGFzZXQubmFtZSwge1xuICAgIC8vIEZpcnN0IGJlY2F1c2UgdGhlIGVsZW1lbnRzIGJlbG93IHdpbGwgb3ZlcnJpZGVcbiAgICAuLi5wYXJzZWRSZXN0LFxuICAgIHRlbXBsYXRlOiBgIyR7YXBwLmRhdGFzZXQubmFtZX1gLFxuICAgIGRhdGE6IGZ1bmN0aW9uICgpIHsgXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5vYmpEYXRhLFxuICAgICAgICBmb3JtOiB7Li4uZGVmYXVsdEZvcm1EYXRhfVxuICAgICAgfTtcbiAgICB9LFxuICAgIG1ldGhvZHM6IHtcbiAgICAgIC4uLnBhcnNlZE1ldGhvZHMsXG4gICAgICBmb3JtUmVzZXQoKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy4kZGF0YS5mb3JtLCB7Li4uZGVmYXVsdEZvcm1EYXRhfSk7XG4gICAgICAgIC8vIGFsc28gcmVzZXQgdGhlIFZlZVZhbGlkYXRlIG9ic2VydmVyXG4gICAgICAgIHRoaXMuJHJlZnMub2JzLnJlc2V0KCk7XG4gICAgICB9LFxuICAgICAgZm9ybUhhbmRsZVN1Ym1pdChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xuICAgICAgICAvLyBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBWZWVWYWxpZGF0ZSBvYnNlcnZlclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IHZtLiRyZWZzLm9icztcbiAgICAgICAgb2JzZXJ2ZXIudmFsaWRhdGUoKS50aGVuKCh2YWxpZCkgPT4ge1xuICAgICAgICAgIGlmICh2YWxpZCkge1xuICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gdm0uJHJlZnMuZm9ybS5nZXRBdHRyaWJ1dGUoXCJhY3Rpb25cIik7XG4gICAgICAgICAgICB2YXIgdG9rZW4gPSB2bS4kcmVmcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJfX1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlblwiXScpOztcbiAgICAgICAgICAgIHZtLmZvcm0uc3VibWl0dGluZyA9IHRydWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICB1cmw6IGFjdGlvbixcbiAgICAgICAgICAgICAgZGF0YTogey4uLnZtLiRkYXRhLCBfX1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbjogdG9rZW4udmFsdWUgfSxcbiAgICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxuICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XG5cbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHZtLiRkYXRhLmZvcm0sIHsuLi5kZWZhdWx0Rm9ybURhdGF9KTtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgdmFsaWRhdGlvbiBlcnJvcnMgb24gdGhlIGZvcm0sIGRpc3BsYXkgdGhlbS5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS52YWxpZGF0aW9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgIHZtLmZvcm0uc3VibWl0VmFsaWRhdGlvbkVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIHZtLmZvcm0uZXJyb3JNZXNzYWdlID0gZGF0YS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICBvYnNlcnZlci5zZXRFcnJvcnMoZGF0YS5lcnJvcnMpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBzZXJ2ZXIgc2VuZHMgYSByZWRpcmVjdCwgcmVsb2FkIHRoZSB3aW5kb3dcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZWRpcmVjdCkge1xuICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBkYXRhLnJlZGlyZWN0O1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vc3VjY2Vzcywgc2V0IHRoZSBmb3JtIHN1Y2Nlc3MgbWVzc2FnZSBcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICB2bS5mb3JtLnN1Ym1pdFN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgdm0uZm9ybS5zdWNjZXNzTWVzc2FnZSA9IGRhdGEuc3VjY2Vzc01lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZtLmZvcm0uc3VibWl0RXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nLCBkZXYgaXNzdWVcbiAgICAgICAgICAgICAgICB2bS5mb3JtLmVycm9yTWVzc2FnZSA9IFwiU29tZXRoaW5nIHdlbid0IHdyb25nLiBQbGVhc2UgcmVwb3J0IHRoaXMgdG8geW91ciBzaXRlIGFkbWluaXN0cmF0b3JzLiBFcnJvciBjb2RlOiBgVnVlRm9ybXMuQWpheEhhbmRsZXJgXCI7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXNUZXh0KSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih2bS4kZGF0YS5mb3JtLCB7Li4uZGVmYXVsdEZvcm1EYXRhfSk7XG4gICAgICAgICAgICAgICAgdm0uZm9ybS5zdWJtaXRFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgdm0uZm9ybS5lcnJvck1lc3NhZ2UgPSBgJHt4aHIuc3RhdHVzfSAke3N0YXR1c1RleHR9YDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gcnVuIHRoZSB2dWUtZm9ybSBpbml0IHNjcmlwdCBwcm92aWRlZCBpbiB0aGUgT0MgYWRtaW4gdWlcbiAgbGV0IGluaXRTY3JpcHQgPSBhcHAuZGF0YXNldC5pbml0U2NyaXB0O1xuICBpZiAoaW5pdFNjcmlwdCkge1xuICAgIGNvbnN0IGluaXRGbiA9IG5ldyBGdW5jdGlvbihhdG9iKGluaXRTY3JpcHQpKTtcbiAgICBpbml0Rm4oKTtcbiAgfVxufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbihldmVudCkgeyBcbiAgLy8gbG9vayBmb3IgYWxsIHZ1ZSBmb3JtcyB3aGVuIHRoaXMgc2NyaXB0IGlzIGxvYWRlZCBhbmQgaW5pdGlhbGl6ZSB0aGVtXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudnVlLWZvcm1cIikuZm9yRWFjaChpbml0Rm9ybSk7XG4gIGNvbnN0IGZvcm1Mb2FkZWRFdmVudCA9IG5ldyBFdmVudCgndnVlLWZvcm0tY29tcG9uZW50LWxvYWRlZCcpO1xuICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGZvcm1Mb2FkZWRFdmVudCk7XG59KTtcbiJdfQ==
