/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

(function () {
  var isUndefined = function isUndefined(value) {
    return value === undefined;
  };

  var isNull = function isNull(value) {
    return value === null;
  };

  var isBoolean = function isBoolean(value) {
    return typeof value === 'boolean';
  };

  var isObject = function isObject(value) {
    return value === Object(value);
  };

  var isArray = function isArray(value) {
    return Array.isArray(value);
  };

  var isDate = function isDate(value) {
    return value instanceof Date;
  };

  var isBlob = function isBlob(value) {
    return value && typeof value.size === 'number' && typeof value.type === 'string' && typeof value.slice === 'function';
  };

  var isFile = function isFile(value) {
    return isBlob(value) && typeof value.name === 'string' && (_typeof(value.lastModifiedDate) === 'object' || typeof value.lastModified === 'number');
  };

  var serialize = function serialize(obj, cfg, fd, pre) {
    cfg = cfg || {};
    cfg.indices = isUndefined(cfg.indices) ? false : cfg.indices;
    cfg.nullsAsUndefineds = isUndefined(cfg.nullsAsUndefineds) ? false : cfg.nullsAsUndefineds;
    cfg.booleansAsIntegers = isUndefined(cfg.booleansAsIntegers) ? false : cfg.booleansAsIntegers;
    cfg.allowEmptyArrays = isUndefined(cfg.allowEmptyArrays) ? false : cfg.allowEmptyArrays;
    fd = fd || new FormData();

    if (isUndefined(obj)) {
      return fd;
    } else if (isNull(obj)) {
      if (!cfg.nullsAsUndefineds) {
        fd.append(pre, '');
      }
    } else if (isBoolean(obj)) {
      if (cfg.booleansAsIntegers) {
        fd.append(pre, obj ? 1 : 0);
      } else {
        fd.append(pre, obj);
      }
    } else if (isArray(obj)) {
      if (obj.length) {
        obj.forEach(function (value, index) {
          var key = pre + '[' + (cfg.indices ? index : '') + ']';
          serialize(value, cfg, fd, key);
        });
      } else if (cfg.allowEmptyArrays) {
        fd.append(pre + '[]', '');
      }
    } else if (isDate(obj)) {
      fd.append(pre, obj.toISOString());
    } else if (isObject(obj) && !isFile(obj) && !isBlob(obj)) {
      Object.keys(obj).forEach(function (prop) {
        var value = obj[prop];

        if (isArray(value)) {
          while (prop.length > 2 && prop.lastIndexOf('[]') === prop.length - 2) {
            prop = prop.substring(0, prop.length - 2);
          }
        }

        var key = pre ? pre + '[' + prop + ']' : prop;
        serialize(value, cfg, fd, key);
      });
    } else {
      fd.append(pre, obj);
    }

    return fd;
  };

  window.serializeToFormData = serialize;
})();
// register VeeValidate components globally
Vue.component('validation-provider', VeeValidate.ValidationProvider);
Vue.component('validation-observer', VeeValidate.ValidationObserver); // include default english and french translations.

VeeValidate.localize({
  en: {
    "code": "en",
    "messages": {
      "alpha": "The {_field_} field may only contain alphabetic characters",
      "alpha_num": "The {_field_} field may only contain alpha-numeric characters",
      "alpha_dash": "The {_field_} field may contain alpha-numeric characters as well as dashes and underscores",
      "alpha_spaces": "The {_field_} field may only contain alphabetic characters as well as spaces",
      "between": "The {_field_} field must be between {min} and {max}",
      "confirmed": "The {_field_} field confirmation does not match",
      "digits": "The {_field_} field must be numeric and exactly contain {length} digits",
      "dimensions": "The {_field_} field must be {width} pixels by {height} pixels",
      "email": "The {_field_} field must be a valid email",
      "excluded": "The {_field_} field is not a valid value",
      "ext": "The {_field_} field is not a valid file",
      "image": "The {_field_} field must be an image",
      "integer": "The {_field_} field must be an integer",
      "length": "The {_field_} field must be {length} long",
      "max_value": "The {_field_} field must be {max} or less",
      "max": "The {_field_} field may not be greater than {length} characters",
      "mimes": "The {_field_} field must have a valid file type",
      "min_value": "The {_field_} field must be {min} or more",
      "min": "The {_field_} field must be at least {length} characters",
      "numeric": "The {_field_} field may only contain numeric characters",
      "oneOf": "The {_field_} field is not a valid value",
      "regex": "The {_field_} field format is invalid",
      "required_if": "The {_field_} field is required",
      "required": "The {_field_} field is required",
      "size": "The {_field_} field size must be less than {size}KB"
    }
  },
  fr: {
    "code": "fr",
    "messages": {
      "alpha": "Le champ {_field_} ne peut contenir que des lettres",
      "alpha_num": "Le champ {_field_} ne peut contenir que des caractères alpha-numériques",
      "alpha_dash": "Le champ {_field_} ne peut contenir que des caractères alpha-numériques, tirets ou soulignés",
      "alpha_spaces": "Le champ {_field_} ne peut contenir que des lettres ou des espaces",
      "between": "Le champ {_field_} doit être compris entre {min} et {max}",
      "confirmed": "Le champ {_field_} ne correspond pas",
      "digits": "Le champ {_field_} doit être un nombre entier de {length} chiffres",
      "dimensions": "Le champ {_field_} doit avoir une taille de {width} pixels par {height} pixels",
      "email": "Le champ {_field_} doit être une adresse e-mail valide",
      "excluded": "Le champ {_field_} doit être une valeur valide",
      "ext": "Le champ {_field_} doit être un fichier valide",
      "image": "Le champ {_field_} doit être une image",
      "integer": "Le champ {_field_} doit être un entier",
      "length": "Le champ {_field_} doit contenir {length} caractères",
      "max_value": "Le champ {_field_} doit avoir une valeur de {max} ou moins",
      "max": "Le champ {_field_} ne peut pas contenir plus de {length} caractères",
      "mimes": "Le champ {_field_} doit avoir un type MIME valide",
      "min_value": "Le champ {_field_} doit avoir une valeur de {min} ou plus",
      "min": "Le champ {_field_} doit contenir au minimum {length} caractères",
      "numeric": "Le champ {_field_} ne peut contenir que des chiffres",
      "oneOf": "Le champ {_field_} doit être une valeur valide",
      "regex": "Le champ {_field_} est invalide",
      "required": "Le champ {_field_} est obligatoire",
      "required_if": "Le champ {_field_} est obligatoire lorsque {target} possède cette valeur",
      "size": "Le champ {_field_} doit avoir un poids inférieur à {size}KB"
    }
  }
});
"use strict";

function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function decodeUnicode(str) {
  return decodeURIComponent(atob(str).split("").map(function (c) {
    return "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2);
  }).join(""));
} // run init script


function initForm(app) {
  // Set VeeValidate language based on the lang parameter
  VeeValidate.localize(app.dataset.lang);
  var componentOptions = app.dataset.options;
  var parsedOptions = {};

  if (componentOptions) {
    var fn = new Function("return (".concat(decodeUnicode(componentOptions), ");"));
    parsedOptions = fn();

    if (!parsedOptions) {
      console.log("Could not parse the componentOptions object. Make sure your object is well formed.");
    }
  }

  var _parsedOptions = parsedOptions,
      parsedData = _parsedOptions.data,
      parsedMethods = _parsedOptions.methods,
      parsedRest = _objectWithoutProperties(_parsedOptions, ["data", "methods"]);

  var objData = parsedData;

  if (typeof parsedData === "function") {
    objData = parsedData();
  }

  var defaultFormData = {
    submitting: false,
    submitSuccess: false,
    successMessage: undefined,
    submitError: false,
    submitValidationErrors: false,
    serverValidationMessage: undefined,
    serverErrorMessage: undefined,
    responseData: undefined
  };
  var componentTemplate = decodeUnicode(app.dataset.template);
  Vue.component(app.dataset.name, function (resolve) {
    resolve(_objectSpread(_objectSpread({}, parsedRest), {}, {
      template: "".concat(componentTemplate),
      data: function data() {
        return _objectSpread(_objectSpread({}, objData), {}, {
          form: _objectSpread({}, defaultFormData)
        });
      },
      methods: _objectSpread(_objectSpread({
        // default method that return the data to be submitted to the server
        // this was added first to allow the Administrator to edit this function on the OC Admin
        submitData: function submitData() {
          var clonedData = _objectSpread({}, this.$data);

          delete clonedData.form;
          return clonedData;
        }
      }, parsedMethods), {}, {
        formReset: function formReset() {
          this.form = _objectSpread({}, defaultFormData); // also reset the VeeValidate observer

          this.$refs.obs.reset();
        },
        formHandleSubmit: function formHandleSubmit(e) {
          var _this = this;

          e.preventDefault();
          var vm = this; // keep a reference to the VeeValidate observer

          var observer = vm.$refs.obs;
          observer.validate().then(function (valid) {
            if (valid) {
              var action = vm.$refs.form.getAttribute("action"); // set form vue data

              vm.form.submitting = true;
              var frmData = vm.submitData();
              frmData.__RequestVerificationToken = vm.$refs.form.querySelector('input[name="__RequestVerificationToken"]').value;

              if ((typeof grecaptcha === "undefined" ? "undefined" : _typeof(grecaptcha)) == "object") {
                frmData.recaptcha = grecaptcha.getResponse();
              }

              var formData = window.serializeToFormData(frmData); // iterate all file inputs and add the files to the request

              $(_this.$refs.form).find("input[type=file]").each(function () {
                var _iterator = _createForOfIteratorHelper(this.files),
                    _step;

                try {
                  for (_iterator.s(); !(_step = _iterator.n()).done;) {
                    var file = _step.value;
                    formData.append(file.name, file);
                  }
                } catch (err) {
                  _iterator.e(err);
                } finally {
                  _iterator.f();
                }
              });
              $.ajax({
                type: "POST",
                url: action,
                data: formData,
                cache: false,
                dataType: "json",
                // expect json from the server
                processData: false,
                //tell jquery not to process data
                contentType: false,
                //tell jquery not to set content-type
                success: function success(responseData) {
                  vm.form = _objectSpread({}, defaultFormData);
                  vm.form.responseData = responseData;

                  if (responseData.debug) {
                    console.log("Debug object: ", responseData.debug);
                  } // if there are validation errors on the form, display them.


                  if (responseData.validationError) {
                    //legacy
                    if (responseData.errors["serverValidationMessage"] != null) {
                      vm.form.serverValidationMessage = responseData.errors["serverValidationMessage"];
                    }

                    vm.form.submitValidationError = true;
                    observer.setErrors(responseData.errors);
                    return;
                  } // if the server sends a redirect, reload the window


                  if (responseData.redirect) {
                    window.location.href = responseData.redirect;
                    return;
                  }

                  vm.form.submitSuccess = true;
                  vm.form.successMessage = responseData.successMessage;
                  return;
                },
                error: function error(xhr, statusText) {
                  vm.form = _objectSpread({}, defaultFormData);
                  vm.form.submitError = true;
                  vm.form.serverErrorMessage = "".concat(xhr.status, " ").concat(statusText);
                  var regex = /\\n|\\r\\n|\\n\\r|\\r/g;
                  vm.form.serverResponseError = xhr.responseText.replace(regex, '<br>');
                }
              });
            }
          });
          return false;
        }
      })
    }));
  }); // run the vue-form init script provided in the OC admin ui

  var initScript = app.dataset.initScript;

  if (initScript) {
    var initFn = new Function(decodeUnicode(initScript));
    initFn();
  }
} // look for all vue forms when this script is loaded and initialize them


document.querySelectorAll(".vue-form").forEach(initForm);
document.addEventListener("DOMContentLoaded", function (event) {
  document.querySelectorAll(".vue-app-instance").forEach(function (elem) {
    new Vue({
      el: elem
    });
  });
  document.querySelectorAll(".vuetify-app-instance").forEach(function (elem) {
    new Vue({
      el: elem,
      vuetify: new Vuetify()
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9iamVjdFRvRm9ybURhdGEuanMiLCJ2ZWV2YWxpZGF0ZS1zZXR1cC5qcyIsInZ1ZS1mb3Jtcy5qcyJdLCJuYW1lcyI6WyJpc1VuZGVmaW5lZCIsInZhbHVlIiwidW5kZWZpbmVkIiwiaXNOdWxsIiwiaXNCb29sZWFuIiwiaXNPYmplY3QiLCJPYmplY3QiLCJpc0FycmF5IiwiQXJyYXkiLCJpc0RhdGUiLCJEYXRlIiwiaXNCbG9iIiwic2l6ZSIsInR5cGUiLCJzbGljZSIsImlzRmlsZSIsIm5hbWUiLCJsYXN0TW9kaWZpZWREYXRlIiwibGFzdE1vZGlmaWVkIiwic2VyaWFsaXplIiwib2JqIiwiY2ZnIiwiZmQiLCJwcmUiLCJpbmRpY2VzIiwibnVsbHNBc1VuZGVmaW5lZHMiLCJib29sZWFuc0FzSW50ZWdlcnMiLCJhbGxvd0VtcHR5QXJyYXlzIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJsZW5ndGgiLCJmb3JFYWNoIiwiaW5kZXgiLCJrZXkiLCJ0b0lTT1N0cmluZyIsImtleXMiLCJwcm9wIiwibGFzdEluZGV4T2YiLCJzdWJzdHJpbmciLCJ3aW5kb3ciLCJzZXJpYWxpemVUb0Zvcm1EYXRhIiwiVnVlIiwiY29tcG9uZW50IiwiVmVlVmFsaWRhdGUiLCJWYWxpZGF0aW9uUHJvdmlkZXIiLCJWYWxpZGF0aW9uT2JzZXJ2ZXIiLCJsb2NhbGl6ZSIsImVuIiwiZnIiLCJkZWNvZGVVbmljb2RlIiwic3RyIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiYXRvYiIsInNwbGl0IiwibWFwIiwiYyIsImNoYXJDb2RlQXQiLCJ0b1N0cmluZyIsImpvaW4iLCJpbml0Rm9ybSIsImFwcCIsImRhdGFzZXQiLCJsYW5nIiwiY29tcG9uZW50T3B0aW9ucyIsIm9wdGlvbnMiLCJwYXJzZWRPcHRpb25zIiwiZm4iLCJGdW5jdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJwYXJzZWREYXRhIiwiZGF0YSIsInBhcnNlZE1ldGhvZHMiLCJtZXRob2RzIiwicGFyc2VkUmVzdCIsIm9iakRhdGEiLCJkZWZhdWx0Rm9ybURhdGEiLCJzdWJtaXR0aW5nIiwic3VibWl0U3VjY2VzcyIsInN1Y2Nlc3NNZXNzYWdlIiwic3VibWl0RXJyb3IiLCJzdWJtaXRWYWxpZGF0aW9uRXJyb3JzIiwic2VydmVyVmFsaWRhdGlvbk1lc3NhZ2UiLCJzZXJ2ZXJFcnJvck1lc3NhZ2UiLCJyZXNwb25zZURhdGEiLCJjb21wb25lbnRUZW1wbGF0ZSIsInRlbXBsYXRlIiwicmVzb2x2ZSIsImZvcm0iLCJzdWJtaXREYXRhIiwiY2xvbmVkRGF0YSIsIiRkYXRhIiwiZm9ybVJlc2V0IiwiJHJlZnMiLCJvYnMiLCJyZXNldCIsImZvcm1IYW5kbGVTdWJtaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJ2bSIsIm9ic2VydmVyIiwidmFsaWRhdGUiLCJ0aGVuIiwidmFsaWQiLCJhY3Rpb24iLCJnZXRBdHRyaWJ1dGUiLCJmcm1EYXRhIiwiX19SZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW4iLCJxdWVyeVNlbGVjdG9yIiwiZ3JlY2FwdGNoYSIsInJlY2FwdGNoYSIsImdldFJlc3BvbnNlIiwiZm9ybURhdGEiLCIkIiwiZmluZCIsImVhY2giLCJmaWxlcyIsImZpbGUiLCJhamF4IiwidXJsIiwiY2FjaGUiLCJkYXRhVHlwZSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwiZGVidWciLCJ2YWxpZGF0aW9uRXJyb3IiLCJlcnJvcnMiLCJzdWJtaXRWYWxpZGF0aW9uRXJyb3IiLCJzZXRFcnJvcnMiLCJyZWRpcmVjdCIsImxvY2F0aW9uIiwiaHJlZiIsImVycm9yIiwieGhyIiwic3RhdHVzVGV4dCIsInN0YXR1cyIsInJlZ2V4Iiwic2VydmVyUmVzcG9uc2VFcnJvciIsInJlc3BvbnNlVGV4dCIsInJlcGxhY2UiLCJpbml0U2NyaXB0IiwiaW5pdEZuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZWxlbSIsImVsIiwidnVldGlmeSIsIlZ1ZXRpZnkiXSwi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ZjtBQUNBQyxJQUFBQSxNQUFNO0FBQ1A7QUFDRixDLENBRUQ7OztBQUNBQyxRQUFRLENBQUNDLGdCQUFULENBQTBCLFdBQTFCLEVBQXVDakgsT0FBdkMsQ0FBK0M0QixRQUEvQztBQUVBb0YsUUFBUSxDQUFDRSxnQkFBVCxDQUEwQixrQkFBMUIsRUFBOEMsVUFBVUMsS0FBVixFQUFpQjtBQUU3REgsRUFBQUEsUUFBUSxDQUFDQyxnQkFBVCxDQUEwQixtQkFBMUIsRUFBK0NqSCxPQUEvQyxDQUF1RCxVQUFVb0gsSUFBVixFQUFnQjtBQUNyRSxRQUFJMUcsR0FBSixDQUFRO0FBQ04yRyxNQUFBQSxFQUFFLEVBQUVEO0FBREUsS0FBUjtBQUdELEdBSkQ7QUFNQUosRUFBQUEsUUFBUSxDQUFDQyxnQkFBVCxDQUEwQix1QkFBMUIsRUFBbURqSCxPQUFuRCxDQUEyRCxVQUFVb0gsSUFBVixFQUFnQjtBQUN6RSxRQUFJMUcsR0FBSixDQUFRO0FBQ04yRyxNQUFBQSxFQUFFLEVBQUVELElBREU7QUFFTkUsTUFBQUEsT0FBTyxFQUFFLElBQUlDLE9BQUo7QUFGSCxLQUFSO0FBSUQsR0FMRDtBQU9ELENBZkQiLCJmaWxlIjoidnVlLWZvcm1zLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBpc1VuZGVmaW5lZCA9ICh2YWx1ZSkgPT4gdmFsdWUgPT09IHVuZGVmaW5lZDtcclxuXHJcbiAgY29uc3QgaXNOdWxsID0gKHZhbHVlKSA9PiB2YWx1ZSA9PT0gbnVsbDtcclxuXHJcbiAgY29uc3QgaXNCb29sZWFuID0gKHZhbHVlKSA9PiB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJztcclxuXHJcbiAgY29uc3QgaXNPYmplY3QgPSAodmFsdWUpID0+IHZhbHVlID09PSBPYmplY3QodmFsdWUpO1xyXG5cclxuICBjb25zdCBpc0FycmF5ID0gKHZhbHVlKSA9PiBBcnJheS5pc0FycmF5KHZhbHVlKTtcclxuXHJcbiAgY29uc3QgaXNEYXRlID0gKHZhbHVlKSA9PiB2YWx1ZSBpbnN0YW5jZW9mIERhdGU7XHJcblxyXG4gIGNvbnN0IGlzQmxvYiA9ICh2YWx1ZSkgPT5cclxuICAgIHZhbHVlICYmXHJcbiAgICB0eXBlb2YgdmFsdWUuc2l6ZSA9PT0gJ251bWJlcicgJiZcclxuICAgIHR5cGVvZiB2YWx1ZS50eXBlID09PSAnc3RyaW5nJyAmJlxyXG4gICAgdHlwZW9mIHZhbHVlLnNsaWNlID09PSAnZnVuY3Rpb24nO1xyXG5cclxuICBjb25zdCBpc0ZpbGUgPSAodmFsdWUpID0+XHJcbiAgICBpc0Jsb2IodmFsdWUpICYmXHJcbiAgICB0eXBlb2YgdmFsdWUubmFtZSA9PT0gJ3N0cmluZycgJiZcclxuICAgICh0eXBlb2YgdmFsdWUubGFzdE1vZGlmaWVkRGF0ZSA9PT0gJ29iamVjdCcgfHxcclxuICAgICAgdHlwZW9mIHZhbHVlLmxhc3RNb2RpZmllZCA9PT0gJ251bWJlcicpO1xyXG5cclxuICBjb25zdCBzZXJpYWxpemUgPSAob2JqLCBjZmcsIGZkLCBwcmUpID0+IHtcclxuICAgIGNmZyA9IGNmZyB8fCB7fTtcclxuXHJcbiAgICBjZmcuaW5kaWNlcyA9IGlzVW5kZWZpbmVkKGNmZy5pbmRpY2VzKSA/IGZhbHNlIDogY2ZnLmluZGljZXM7XHJcblxyXG4gICAgY2ZnLm51bGxzQXNVbmRlZmluZWRzID0gaXNVbmRlZmluZWQoY2ZnLm51bGxzQXNVbmRlZmluZWRzKVxyXG4gICAgICA/IGZhbHNlXHJcbiAgICAgIDogY2ZnLm51bGxzQXNVbmRlZmluZWRzO1xyXG5cclxuICAgIGNmZy5ib29sZWFuc0FzSW50ZWdlcnMgPSBpc1VuZGVmaW5lZChjZmcuYm9vbGVhbnNBc0ludGVnZXJzKVxyXG4gICAgICA/IGZhbHNlXHJcbiAgICAgIDogY2ZnLmJvb2xlYW5zQXNJbnRlZ2VycztcclxuXHJcbiAgICBjZmcuYWxsb3dFbXB0eUFycmF5cyA9IGlzVW5kZWZpbmVkKGNmZy5hbGxvd0VtcHR5QXJyYXlzKVxyXG4gICAgICA/IGZhbHNlXHJcbiAgICAgIDogY2ZnLmFsbG93RW1wdHlBcnJheXM7XHJcblxyXG4gICAgZmQgPSBmZCB8fCBuZXcgRm9ybURhdGEoKTtcclxuXHJcbiAgICBpZiAoaXNVbmRlZmluZWQob2JqKSkge1xyXG4gICAgICByZXR1cm4gZmQ7XHJcbiAgICB9IGVsc2UgaWYgKGlzTnVsbChvYmopKSB7XHJcbiAgICAgIGlmICghY2ZnLm51bGxzQXNVbmRlZmluZWRzKSB7XHJcbiAgICAgICAgZmQuYXBwZW5kKHByZSwgJycpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGlzQm9vbGVhbihvYmopKSB7XHJcbiAgICAgIGlmIChjZmcuYm9vbGVhbnNBc0ludGVnZXJzKSB7XHJcbiAgICAgICAgZmQuYXBwZW5kKHByZSwgb2JqID8gMSA6IDApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZkLmFwcGVuZChwcmUsIG9iaik7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoaXNBcnJheShvYmopKSB7XHJcbiAgICAgIGlmIChvYmoubGVuZ3RoKSB7XHJcbiAgICAgICAgb2JqLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qga2V5ID0gcHJlICsgJ1snICsgKGNmZy5pbmRpY2VzID8gaW5kZXggOiAnJykgKyAnXSc7XHJcblxyXG4gICAgICAgICAgc2VyaWFsaXplKHZhbHVlLCBjZmcsIGZkLCBrZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2UgaWYgKGNmZy5hbGxvd0VtcHR5QXJyYXlzKSB7XHJcbiAgICAgICAgZmQuYXBwZW5kKHByZSArICdbXScsICcnKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChpc0RhdGUob2JqKSkge1xyXG4gICAgICBmZC5hcHBlbmQocHJlLCBvYmoudG9JU09TdHJpbmcoKSk7XHJcbiAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KG9iaikgJiYgIWlzRmlsZShvYmopICYmICFpc0Jsb2Iob2JqKSkge1xyXG4gICAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goKHByb3ApID0+IHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IG9ialtwcm9wXTtcclxuXHJcbiAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICB3aGlsZSAocHJvcC5sZW5ndGggPiAyICYmIHByb3AubGFzdEluZGV4T2YoJ1tdJykgPT09IHByb3AubGVuZ3RoIC0gMikge1xyXG4gICAgICAgICAgICBwcm9wID0gcHJvcC5zdWJzdHJpbmcoMCwgcHJvcC5sZW5ndGggLSAyKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGtleSA9IHByZSA/IHByZSArICdbJyArIHByb3AgKyAnXScgOiBwcm9wO1xyXG5cclxuICAgICAgICBzZXJpYWxpemUodmFsdWUsIGNmZywgZmQsIGtleSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZmQuYXBwZW5kKHByZSwgb2JqKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmQ7XHJcbiAgfTtcclxuICB3aW5kb3cuc2VyaWFsaXplVG9Gb3JtRGF0YSA9IHNlcmlhbGl6ZTtcclxufSkoKTtcclxuIiwiXHJcbi8vIHJlZ2lzdGVyIFZlZVZhbGlkYXRlIGNvbXBvbmVudHMgZ2xvYmFsbHlcclxuVnVlLmNvbXBvbmVudCgndmFsaWRhdGlvbi1wcm92aWRlcicsIFZlZVZhbGlkYXRlLlZhbGlkYXRpb25Qcm92aWRlcik7XHJcblZ1ZS5jb21wb25lbnQoJ3ZhbGlkYXRpb24tb2JzZXJ2ZXInLCBWZWVWYWxpZGF0ZS5WYWxpZGF0aW9uT2JzZXJ2ZXIpOyBcclxuXHJcbi8vIGluY2x1ZGUgZGVmYXVsdCBlbmdsaXNoIGFuZCBmcmVuY2ggdHJhbnNsYXRpb25zLlxyXG5WZWVWYWxpZGF0ZS5sb2NhbGl6ZSh7XHJcbiAgZW46e1xyXG4gICAgXCJjb2RlXCI6IFwiZW5cIixcclxuICAgIFwibWVzc2FnZXNcIjoge1xyXG4gICAgICBcImFscGhhXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBtYXkgb25seSBjb250YWluIGFscGhhYmV0aWMgY2hhcmFjdGVyc1wiLFxyXG4gICAgICBcImFscGhhX251bVwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbWF5IG9ubHkgY29udGFpbiBhbHBoYS1udW1lcmljIGNoYXJhY3RlcnNcIixcclxuICAgICAgXCJhbHBoYV9kYXNoXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBtYXkgY29udGFpbiBhbHBoYS1udW1lcmljIGNoYXJhY3RlcnMgYXMgd2VsbCBhcyBkYXNoZXMgYW5kIHVuZGVyc2NvcmVzXCIsXHJcbiAgICAgIFwiYWxwaGFfc3BhY2VzXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBtYXkgb25seSBjb250YWluIGFscGhhYmV0aWMgY2hhcmFjdGVycyBhcyB3ZWxsIGFzIHNwYWNlc1wiLFxyXG4gICAgICBcImJldHdlZW5cIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgYmUgYmV0d2VlbiB7bWlufSBhbmQge21heH1cIixcclxuICAgICAgXCJjb25maXJtZWRcIjogXCJUaGUge19maWVsZF99IGZpZWxkIGNvbmZpcm1hdGlvbiBkb2VzIG5vdCBtYXRjaFwiLFxyXG4gICAgICBcImRpZ2l0c1wiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbXVzdCBiZSBudW1lcmljIGFuZCBleGFjdGx5IGNvbnRhaW4ge2xlbmd0aH0gZGlnaXRzXCIsXHJcbiAgICAgIFwiZGltZW5zaW9uc1wiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbXVzdCBiZSB7d2lkdGh9IHBpeGVscyBieSB7aGVpZ2h0fSBwaXhlbHNcIixcclxuICAgICAgXCJlbWFpbFwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbXVzdCBiZSBhIHZhbGlkIGVtYWlsXCIsXHJcbiAgICAgIFwiZXhjbHVkZWRcIjogXCJUaGUge19maWVsZF99IGZpZWxkIGlzIG5vdCBhIHZhbGlkIHZhbHVlXCIsXHJcbiAgICAgIFwiZXh0XCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBpcyBub3QgYSB2YWxpZCBmaWxlXCIsXHJcbiAgICAgIFwiaW1hZ2VcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgYmUgYW4gaW1hZ2VcIixcclxuICAgICAgXCJpbnRlZ2VyXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBtdXN0IGJlIGFuIGludGVnZXJcIixcclxuICAgICAgXCJsZW5ndGhcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgYmUge2xlbmd0aH0gbG9uZ1wiLFxyXG4gICAgICBcIm1heF92YWx1ZVwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbXVzdCBiZSB7bWF4fSBvciBsZXNzXCIsXHJcbiAgICAgIFwibWF4XCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBtYXkgbm90IGJlIGdyZWF0ZXIgdGhhbiB7bGVuZ3RofSBjaGFyYWN0ZXJzXCIsXHJcbiAgICAgIFwibWltZXNcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgaGF2ZSBhIHZhbGlkIGZpbGUgdHlwZVwiLFxyXG4gICAgICBcIm1pbl92YWx1ZVwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbXVzdCBiZSB7bWlufSBvciBtb3JlXCIsXHJcbiAgICAgIFwibWluXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBtdXN0IGJlIGF0IGxlYXN0IHtsZW5ndGh9IGNoYXJhY3RlcnNcIixcclxuICAgICAgXCJudW1lcmljXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBtYXkgb25seSBjb250YWluIG51bWVyaWMgY2hhcmFjdGVyc1wiLFxyXG4gICAgICBcIm9uZU9mXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBpcyBub3QgYSB2YWxpZCB2YWx1ZVwiLFxyXG4gICAgICBcInJlZ2V4XCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBmb3JtYXQgaXMgaW52YWxpZFwiLFxyXG4gICAgICBcInJlcXVpcmVkX2lmXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBpcyByZXF1aXJlZFwiLFxyXG4gICAgICBcInJlcXVpcmVkXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBpcyByZXF1aXJlZFwiLFxyXG4gICAgICBcInNpemVcIjogXCJUaGUge19maWVsZF99IGZpZWxkIHNpemUgbXVzdCBiZSBsZXNzIHRoYW4ge3NpemV9S0JcIlxyXG4gICAgfVxyXG4gIH0sXHJcbiAgZnI6IHtcclxuICAgIFwiY29kZVwiOiBcImZyXCIsXHJcbiAgICBcIm1lc3NhZ2VzXCI6IHtcclxuICAgICAgXCJhbHBoYVwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBuZSBwZXV0IGNvbnRlbmlyIHF1ZSBkZXMgbGV0dHJlc1wiLFxyXG4gICAgICBcImFscGhhX251bVwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBuZSBwZXV0IGNvbnRlbmlyIHF1ZSBkZXMgY2FyYWN0w6hyZXMgYWxwaGEtbnVtw6lyaXF1ZXNcIixcclxuICAgICAgXCJhbHBoYV9kYXNoXCI6IFwiTGUgY2hhbXAge19maWVsZF99IG5lIHBldXQgY29udGVuaXIgcXVlIGRlcyBjYXJhY3TDqHJlcyBhbHBoYS1udW3DqXJpcXVlcywgdGlyZXRzIG91IHNvdWxpZ27DqXNcIixcclxuICAgICAgXCJhbHBoYV9zcGFjZXNcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gbmUgcGV1dCBjb250ZW5pciBxdWUgZGVzIGxldHRyZXMgb3UgZGVzIGVzcGFjZXNcIixcclxuICAgICAgXCJiZXR3ZWVuXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgw6p0cmUgY29tcHJpcyBlbnRyZSB7bWlufSBldCB7bWF4fVwiLFxyXG4gICAgICBcImNvbmZpcm1lZFwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBuZSBjb3JyZXNwb25kIHBhc1wiLFxyXG4gICAgICBcImRpZ2l0c1wiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBkb2l0IMOqdHJlIHVuIG5vbWJyZSBlbnRpZXIgZGUge2xlbmd0aH0gY2hpZmZyZXNcIixcclxuICAgICAgXCJkaW1lbnNpb25zXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgYXZvaXIgdW5lIHRhaWxsZSBkZSB7d2lkdGh9IHBpeGVscyBwYXIge2hlaWdodH0gcGl4ZWxzXCIsXHJcbiAgICAgIFwiZW1haWxcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZG9pdCDDqnRyZSB1bmUgYWRyZXNzZSBlLW1haWwgdmFsaWRlXCIsXHJcbiAgICAgIFwiZXhjbHVkZWRcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZG9pdCDDqnRyZSB1bmUgdmFsZXVyIHZhbGlkZVwiLFxyXG4gICAgICBcImV4dFwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBkb2l0IMOqdHJlIHVuIGZpY2hpZXIgdmFsaWRlXCIsXHJcbiAgICAgIFwiaW1hZ2VcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZG9pdCDDqnRyZSB1bmUgaW1hZ2VcIixcclxuICAgICAgXCJpbnRlZ2VyXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgw6p0cmUgdW4gZW50aWVyXCIsXHJcbiAgICAgIFwibGVuZ3RoXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgY29udGVuaXIge2xlbmd0aH0gY2FyYWN0w6hyZXNcIixcclxuICAgICAgXCJtYXhfdmFsdWVcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZG9pdCBhdm9pciB1bmUgdmFsZXVyIGRlIHttYXh9IG91IG1vaW5zXCIsXHJcbiAgICAgIFwibWF4XCI6IFwiTGUgY2hhbXAge19maWVsZF99IG5lIHBldXQgcGFzIGNvbnRlbmlyIHBsdXMgZGUge2xlbmd0aH0gY2FyYWN0w6hyZXNcIixcclxuICAgICAgXCJtaW1lc1wiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBkb2l0IGF2b2lyIHVuIHR5cGUgTUlNRSB2YWxpZGVcIixcclxuICAgICAgXCJtaW5fdmFsdWVcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZG9pdCBhdm9pciB1bmUgdmFsZXVyIGRlIHttaW59IG91IHBsdXNcIixcclxuICAgICAgXCJtaW5cIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZG9pdCBjb250ZW5pciBhdSBtaW5pbXVtIHtsZW5ndGh9IGNhcmFjdMOocmVzXCIsXHJcbiAgICAgIFwibnVtZXJpY1wiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBuZSBwZXV0IGNvbnRlbmlyIHF1ZSBkZXMgY2hpZmZyZXNcIixcclxuICAgICAgXCJvbmVPZlwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBkb2l0IMOqdHJlIHVuZSB2YWxldXIgdmFsaWRlXCIsXHJcbiAgICAgIFwicmVnZXhcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZXN0IGludmFsaWRlXCIsXHJcbiAgICAgIFwicmVxdWlyZWRcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZXN0IG9ibGlnYXRvaXJlXCIsXHJcbiAgICAgIFwicmVxdWlyZWRfaWZcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZXN0IG9ibGlnYXRvaXJlIGxvcnNxdWUge3RhcmdldH0gcG9zc8OoZGUgY2V0dGUgdmFsZXVyXCIsXHJcbiAgICAgIFwic2l6ZVwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBkb2l0IGF2b2lyIHVuIHBvaWRzIGluZsOpcmlldXIgw6Age3NpemV9S0JcIlxyXG4gICAgfVxyXG4gIH0sXHJcbn0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gZGVjb2RlVW5pY29kZShzdHIpIHtcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChcbiAgICBhdG9iKHN0cilcbiAgICAgIC5zcGxpdChcIlwiKVxuICAgICAgLm1hcChmdW5jdGlvbiAoYykge1xuICAgICAgICByZXR1cm4gXCIlXCIgKyAoXCIwMFwiICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xuICAgICAgfSlcbiAgICAgIC5qb2luKFwiXCIpXG4gICk7XG59XG5cbi8vIHJ1biBpbml0IHNjcmlwdFxuZnVuY3Rpb24gaW5pdEZvcm0oYXBwKSB7XG4gIC8vIFNldCBWZWVWYWxpZGF0ZSBsYW5ndWFnZSBiYXNlZCBvbiB0aGUgbGFuZyBwYXJhbWV0ZXJcbiAgVmVlVmFsaWRhdGUubG9jYWxpemUoYXBwLmRhdGFzZXQubGFuZyk7XG5cbiAgbGV0IGNvbXBvbmVudE9wdGlvbnMgPSBhcHAuZGF0YXNldC5vcHRpb25zO1xuXG4gIGxldCBwYXJzZWRPcHRpb25zID0ge307XG4gIGlmIChjb21wb25lbnRPcHRpb25zKSB7XG4gICAgY29uc3QgZm4gPSBuZXcgRnVuY3Rpb24oYHJldHVybiAoJHtkZWNvZGVVbmljb2RlKGNvbXBvbmVudE9wdGlvbnMpfSk7YCk7XG4gICAgcGFyc2VkT3B0aW9ucyA9IGZuKCk7XG4gICAgaWYgKCFwYXJzZWRPcHRpb25zKSB7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCJDb3VsZCBub3QgcGFyc2UgdGhlIGNvbXBvbmVudE9wdGlvbnMgb2JqZWN0LiBNYWtlIHN1cmUgeW91ciBvYmplY3QgaXMgd2VsbCBmb3JtZWQuXCJcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgY29uc3Qge1xuICAgIGRhdGE6IHBhcnNlZERhdGEsXG4gICAgbWV0aG9kczogcGFyc2VkTWV0aG9kcyxcbiAgICAuLi5wYXJzZWRSZXN0XG4gIH0gPSBwYXJzZWRPcHRpb25zO1xuICBsZXQgb2JqRGF0YSA9IHBhcnNlZERhdGE7XG4gIGlmICh0eXBlb2YgcGFyc2VkRGF0YSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgb2JqRGF0YSA9IHBhcnNlZERhdGEoKTtcbiAgfVxuICBjb25zdCBkZWZhdWx0Rm9ybURhdGEgPSB7XG4gICAgc3VibWl0dGluZzogZmFsc2UsXG4gICAgc3VibWl0U3VjY2VzczogZmFsc2UsXG4gICAgc3VjY2Vzc01lc3NhZ2U6IHVuZGVmaW5lZCxcbiAgICBzdWJtaXRFcnJvcjogZmFsc2UsXG4gICAgc3VibWl0VmFsaWRhdGlvbkVycm9yczogZmFsc2UsXG4gICAgc2VydmVyVmFsaWRhdGlvbk1lc3NhZ2U6IHVuZGVmaW5lZCxcbiAgICBzZXJ2ZXJFcnJvck1lc3NhZ2U6IHVuZGVmaW5lZCxcbiAgICByZXNwb25zZURhdGE6IHVuZGVmaW5lZCxcbiAgfTtcblxuICBjb25zdCBjb21wb25lbnRUZW1wbGF0ZSA9IGRlY29kZVVuaWNvZGUoYXBwLmRhdGFzZXQudGVtcGxhdGUpO1xuXG4gIFZ1ZS5jb21wb25lbnQoYXBwLmRhdGFzZXQubmFtZSwgZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICByZXNvbHZlKHtcbiAgICAgIC8vIEZpcnN0IGJlY2F1c2UgdGhlIGVsZW1lbnRzIGJlbG93IHdpbGwgb3ZlcnJpZGVcbiAgICAgIC4uLnBhcnNlZFJlc3QsXG4gICAgICB0ZW1wbGF0ZTogYCR7Y29tcG9uZW50VGVtcGxhdGV9YCxcbiAgICAgIGRhdGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5vYmpEYXRhLFxuICAgICAgICAgIGZvcm06IHsgLi4uZGVmYXVsdEZvcm1EYXRhIH1cbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBtZXRob2RzOiB7XG4gICAgICAgIC8vIGRlZmF1bHQgbWV0aG9kIHRoYXQgcmV0dXJuIHRoZSBkYXRhIHRvIGJlIHN1Ym1pdHRlZCB0byB0aGUgc2VydmVyXG4gICAgICAgIC8vIHRoaXMgd2FzIGFkZGVkIGZpcnN0IHRvIGFsbG93IHRoZSBBZG1pbmlzdHJhdG9yIHRvIGVkaXQgdGhpcyBmdW5jdGlvbiBvbiB0aGUgT0MgQWRtaW5cbiAgICAgICAgc3VibWl0RGF0YSgpIHtcbiAgICAgICAgICBsZXQgY2xvbmVkRGF0YSA9IHsgLi4udGhpcy4kZGF0YSB9O1xuICAgICAgICAgIGRlbGV0ZSBjbG9uZWREYXRhLmZvcm07XG4gICAgICAgICAgcmV0dXJuIGNsb25lZERhdGE7XG4gICAgICAgIH0sXG4gICAgICAgIC4uLnBhcnNlZE1ldGhvZHMsXG4gICAgICAgIGZvcm1SZXNldCgpIHtcbiAgICAgICAgICB0aGlzLmZvcm0gPSB7IC4uLmRlZmF1bHRGb3JtRGF0YSB9O1xuICAgICAgICAgIC8vIGFsc28gcmVzZXQgdGhlIFZlZVZhbGlkYXRlIG9ic2VydmVyXG4gICAgICAgICAgdGhpcy4kcmVmcy5vYnMucmVzZXQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZm9ybUhhbmRsZVN1Ym1pdChlKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGNvbnN0IHZtID0gdGhpcztcbiAgICAgICAgICAvLyBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBWZWVWYWxpZGF0ZSBvYnNlcnZlclxuICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gdm0uJHJlZnMub2JzO1xuICAgICAgICAgIG9ic2VydmVyLnZhbGlkYXRlKCkudGhlbigodmFsaWQpID0+IHtcbiAgICAgICAgICAgIGlmICh2YWxpZCkge1xuICAgICAgICAgICAgICBjb25zdCBhY3Rpb24gPSB2bS4kcmVmcy5mb3JtLmdldEF0dHJpYnV0ZShcImFjdGlvblwiKTtcbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBzZXQgZm9ybSB2dWUgZGF0YVxuICAgICAgICAgICAgICB2bS5mb3JtLnN1Ym1pdHRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICAgIGxldCBmcm1EYXRhID0gdm0uc3VibWl0RGF0YSgpO1xuICAgICAgICAgICAgICBmcm1EYXRhLl9fUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuID0gdm0uJHJlZnMuZm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgICdpbnB1dFtuYW1lPVwiX19SZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW5cIl0nXG4gICAgICAgICAgICAgICkudmFsdWU7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgZ3JlY2FwdGNoYSA9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgZnJtRGF0YS5yZWNhcHRjaGEgPSBncmVjYXB0Y2hhLmdldFJlc3BvbnNlKCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBsZXQgZm9ybURhdGEgPSB3aW5kb3cuc2VyaWFsaXplVG9Gb3JtRGF0YShmcm1EYXRhKTtcblxuICAgICAgICAgICAgICAvLyBpdGVyYXRlIGFsbCBmaWxlIGlucHV0cyBhbmQgYWRkIHRoZSBmaWxlcyB0byB0aGUgcmVxdWVzdFxuICAgICAgICAgICAgICAkKHRoaXMuJHJlZnMuZm9ybSkuZmluZChcImlucHV0W3R5cGU9ZmlsZV1cIikuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiB0aGlzLmZpbGVzKSB7XG4gICAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoZmlsZS5uYW1lLCBmaWxlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICB1cmw6IGFjdGlvbixcbiAgICAgICAgICAgICAgICBkYXRhOiBmb3JtRGF0YSxcbiAgICAgICAgICAgICAgICBjYWNoZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLCAvLyBleHBlY3QganNvbiBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsIC8vdGVsbCBqcXVlcnkgbm90IHRvIHByb2Nlc3MgZGF0YVxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBmYWxzZSwgLy90ZWxsIGpxdWVyeSBub3QgdG8gc2V0IGNvbnRlbnQtdHlwZVxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZURhdGEpIHtcbiAgICAgICAgICAgICAgICAgIHZtLmZvcm0gPSB7IC4uLmRlZmF1bHRGb3JtRGF0YSB9O1xuICAgICAgICAgICAgICAgICAgdm0uZm9ybS5yZXNwb25zZURhdGEgPSByZXNwb25zZURhdGE7XG5cbiAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlRGF0YS5kZWJ1ZylcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJEZWJ1ZyBvYmplY3Q6IFwiLCByZXNwb25zZURhdGEuZGVidWcpO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgdmFsaWRhdGlvbiBlcnJvcnMgb24gdGhlIGZvcm0sIGRpc3BsYXkgdGhlbS5cbiAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZURhdGEudmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vbGVnYWN5XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZURhdGEuZXJyb3JzW1wic2VydmVyVmFsaWRhdGlvbk1lc3NhZ2VcIl0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgIHZtLmZvcm0uc2VydmVyVmFsaWRhdGlvbk1lc3NhZ2UgPVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhLmVycm9yc1tcInNlcnZlclZhbGlkYXRpb25NZXNzYWdlXCJdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZtLmZvcm0uc3VibWl0VmFsaWRhdGlvbkVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuc2V0RXJyb3JzKHJlc3BvbnNlRGF0YS5lcnJvcnMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBzZXJ2ZXIgc2VuZHMgYSByZWRpcmVjdCwgcmVsb2FkIHRoZSB3aW5kb3dcbiAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZURhdGEucmVkaXJlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSByZXNwb25zZURhdGEucmVkaXJlY3Q7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgdm0uZm9ybS5zdWJtaXRTdWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIHZtLmZvcm0uc3VjY2Vzc01lc3NhZ2UgPSByZXNwb25zZURhdGEuc3VjY2Vzc01lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzVGV4dCkge1xuICAgICAgICAgICAgICAgICAgdm0uZm9ybSA9IHsgLi4uZGVmYXVsdEZvcm1EYXRhIH07XG4gICAgICAgICAgICAgICAgICB2bS5mb3JtLnN1Ym1pdEVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIHZtLmZvcm0uc2VydmVyRXJyb3JNZXNzYWdlID0gYCR7eGhyLnN0YXR1c30gJHtzdGF0dXNUZXh0fWA7XG4gICAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IC9cXFxcbnxcXFxcclxcXFxufFxcXFxuXFxcXHJ8XFxcXHIvZztcbiAgICAgICAgICAgICAgICAgIHZtLmZvcm0uc2VydmVyUmVzcG9uc2VFcnJvciA9IHhoci5yZXNwb25zZVRleHQucmVwbGFjZShyZWdleCwgJzxicj4nKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIHJ1biB0aGUgdnVlLWZvcm0gaW5pdCBzY3JpcHQgcHJvdmlkZWQgaW4gdGhlIE9DIGFkbWluIHVpXG4gIGxldCBpbml0U2NyaXB0ID0gYXBwLmRhdGFzZXQuaW5pdFNjcmlwdDtcbiAgaWYgKGluaXRTY3JpcHQpIHtcbiAgICBjb25zdCBpbml0Rm4gPSBuZXcgRnVuY3Rpb24oZGVjb2RlVW5pY29kZShpbml0U2NyaXB0KSk7XG4gICAgaW5pdEZuKCk7XG4gIH1cbn1cblxuLy8gbG9vayBmb3IgYWxsIHZ1ZSBmb3JtcyB3aGVuIHRoaXMgc2NyaXB0IGlzIGxvYWRlZCBhbmQgaW5pdGlhbGl6ZSB0aGVtXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnZ1ZS1mb3JtXCIpLmZvckVhY2goaW5pdEZvcm0pO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcblxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnZ1ZS1hcHAtaW5zdGFuY2VcIikuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xuICAgIG5ldyBWdWUoe1xuICAgICAgZWw6IGVsZW0sXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudnVldGlmeS1hcHAtaW5zdGFuY2VcIikuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkge1xuICAgIG5ldyBWdWUoe1xuICAgICAgZWw6IGVsZW0sXG4gICAgICB2dWV0aWZ5OiBuZXcgVnVldGlmeSgpLFxuICAgIH0pO1xuICB9KTtcblxufSk7XG4iXX0=
