/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

(function () {
  var isUndefined = function isUndefined(value) {
    return value === undefined;
  };

  var isNull = function isNull(value) {
    return value === null;
  };

  var isBoolean = function isBoolean(value) {
    return typeof value === "boolean";
  };

  var isObject = function isObject(value) {
    return value === Object(value);
  };

  var isArray = function isArray(value) {
    return Array.isArray(value);
  };

  var isDate = function isDate(value) {
    return value instanceof Date;
  };

  var isBlob = function isBlob(value) {
    return value && typeof value.size === "number" && typeof value.type === "string" && typeof value.slice === "function";
  };

  var isFile = function isFile(value) {
    return isBlob(value) && typeof value.name === "string" && (_typeof(value.lastModifiedDate) === "object" || typeof value.lastModified === "number");
  };

  var serialize = function serialize(obj, cfg, fd, pre) {
    cfg = cfg || {};
    cfg.withoutArrayKey = isUndefined(cfg.withoutArrayKey) ? true : cfg.withoutArrayKey;
    cfg.indices = isUndefined(cfg.indices) ? false : cfg.indices;
    cfg.nullsAsUndefineds = isUndefined(cfg.nullsAsUndefineds) ? false : cfg.nullsAsUndefineds;
    cfg.booleansAsIntegers = isUndefined(cfg.booleansAsIntegers) ? false : cfg.booleansAsIntegers;
    cfg.allowEmptyArrays = isUndefined(cfg.allowEmptyArrays) ? false : cfg.allowEmptyArrays;
    fd = fd || new FormData();

    if (isUndefined(obj)) {
      return fd;
    } else if (isNull(obj)) {
      if (!cfg.nullsAsUndefineds) {
        fd.append(pre, "");
      }
    } else if (isBoolean(obj)) {
      if (cfg.booleansAsIntegers) {
        fd.append(pre, obj ? 1 : 0);
      } else {
        fd.append(pre, obj);
      }
    } else if (isArray(obj)) {
      if (obj.length) {
        obj.forEach(function (value, index) {
          var key = cfg.withoutArrayKey ? pre : pre + "[" + (cfg.indices ? index : "") + "]";
          serialize(value, cfg, fd, key);
        });
      } else if (cfg.allowEmptyArrays) {
        var key = cfg.withoutArrayKey ? pre : pre + "[]";
        fd.append(key, "");
      }
    } else if (isDate(obj)) {
      fd.append(pre, obj.toISOString());
    } else if (isObject(obj) && !isFile(obj) && !isBlob(obj)) {
      Object.keys(obj).forEach(function (prop) {
        var value = obj[prop];

        if (isArray(value)) {
          while (prop.length > 2 && prop.lastIndexOf("[]") === prop.length - 2) {
            prop = prop.substring(0, prop.length - 2);
          }
        }

        var key = pre ? pre + "[" + prop + "]" : prop;
        serialize(value, cfg, fd, key);
      });
    } else {
      fd.append(pre, obj);
    }

    return fd;
  };

  window.serializeToFormData = serialize;
})();
// register VeeValidate components globally
Vue.component('validation-provider', VeeValidate.ValidationProvider);
Vue.component('validation-observer', VeeValidate.ValidationObserver); // include default english and french translations.

VeeValidate.localize({
  en: {
    "code": "en",
    "messages": {
      "alpha": "The {_field_} field may only contain alphabetic characters",
      "alpha_num": "The {_field_} field may only contain alpha-numeric characters",
      "alpha_dash": "The {_field_} field may contain alpha-numeric characters as well as dashes and underscores",
      "alpha_spaces": "The {_field_} field may only contain alphabetic characters as well as spaces",
      "between": "The {_field_} field must be between {min} and {max}",
      "confirmed": "The {_field_} field confirmation does not match",
      "digits": "The {_field_} field must be numeric and exactly contain {length} digits",
      "dimensions": "The {_field_} field must be {width} pixels by {height} pixels",
      "email": "The {_field_} field must be a valid email",
      "excluded": "The {_field_} field is not a valid value",
      "ext": "The {_field_} field is not a valid file",
      "image": "The {_field_} field must be an image",
      "integer": "The {_field_} field must be an integer",
      "length": "The {_field_} field must be {length} long",
      "max_value": "The {_field_} field must be {max} or less",
      "max": "The {_field_} field may not be greater than {length} characters",
      "mimes": "The {_field_} field must have a valid file type",
      "min_value": "The {_field_} field must be {min} or more",
      "min": "The {_field_} field must be at least {length} characters",
      "numeric": "The {_field_} field may only contain numeric characters",
      "oneOf": "The {_field_} field is not a valid value",
      "regex": "The {_field_} field format is invalid",
      "required_if": "The {_field_} field is required",
      "required": "The {_field_} field is required",
      "size": "The {_field_} field size must be less than {size}KB"
    }
  },
  fr: {
    "code": "fr",
    "messages": {
      "alpha": "Le champ {_field_} ne peut contenir que des lettres",
      "alpha_num": "Le champ {_field_} ne peut contenir que des caractères alpha-numériques",
      "alpha_dash": "Le champ {_field_} ne peut contenir que des caractères alpha-numériques, tirets ou soulignés",
      "alpha_spaces": "Le champ {_field_} ne peut contenir que des lettres ou des espaces",
      "between": "Le champ {_field_} doit être compris entre {min} et {max}",
      "confirmed": "Le champ {_field_} ne correspond pas",
      "digits": "Le champ {_field_} doit être un nombre entier de {length} chiffres",
      "dimensions": "Le champ {_field_} doit avoir une taille de {width} pixels par {height} pixels",
      "email": "Le champ {_field_} doit être une adresse e-mail valide",
      "excluded": "Le champ {_field_} doit être une valeur valide",
      "ext": "Le champ {_field_} doit être un fichier valide",
      "image": "Le champ {_field_} doit être une image",
      "integer": "Le champ {_field_} doit être un entier",
      "length": "Le champ {_field_} doit contenir {length} caractères",
      "max_value": "Le champ {_field_} doit avoir une valeur de {max} ou moins",
      "max": "Le champ {_field_} ne peut pas contenir plus de {length} caractères",
      "mimes": "Le champ {_field_} doit avoir un type MIME valide",
      "min_value": "Le champ {_field_} doit avoir une valeur de {min} ou plus",
      "min": "Le champ {_field_} doit contenir au minimum {length} caractères",
      "numeric": "Le champ {_field_} ne peut contenir que des chiffres",
      "oneOf": "Le champ {_field_} doit être une valeur valide",
      "regex": "Le champ {_field_} est invalide",
      "required": "Le champ {_field_} est obligatoire",
      "required_if": "Le champ {_field_} est obligatoire lorsque {target} possède cette valeur",
      "size": "Le champ {_field_} doit avoir un poids inférieur à {size}KB"
    }
  }
});
"use strict";

function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function decodeUnicode(str) {
  return decodeURIComponent(atob(str).split("").map(function (c) {
    return "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2);
  }).join(""));
} // run init script


function initForm(app) {
  // Set VeeValidate language based on the lang parameter
  VeeValidate.localize(app.dataset.lang); // options object coming from the OC admin

  var componentOptions = app.dataset.options;
  var parsedOptions = {};

  if (componentOptions) {
    var fn = new Function("return (".concat(decodeUnicode(componentOptions), ");"));
    parsedOptions = fn();

    if (!parsedOptions) {
      console.log("Could not parse the componentOptions object. Make sure your object is well formed.");
    }
  }

  var _parsedOptions = parsedOptions,
      parsedData = _parsedOptions.data,
      parsedMethods = _parsedOptions.methods,
      parsedCreated = _parsedOptions.created,
      parsedRest = _objectWithoutProperties(_parsedOptions, ["data", "methods", "created"]);

  var objData = parsedData;

  if (typeof parsedData === "function") {
    objData = parsedData();
  }

  var defaultFormData = {
    submitting: false,
    submitSuccess: false,
    successMessage: undefined,
    submitError: false,
    submitValidationErrors: false,
    serverValidationMessage: undefined,
    serverErrorMessage: undefined,
    responseData: undefined
  };
  var componentTemplate = decodeUnicode(app.dataset.template);
  var surveyJson = decodeUnicode(app.dataset.surveyJson);
  Vue.component(app.dataset.name, function (resolve) {
    resolve(_objectSpread(_objectSpread({}, parsedRest), {}, {
      template: "".concat(componentTemplate),
      data: function data() {
        var dataObj = _objectSpread(_objectSpread({}, objData), {}, {
          form: _objectSpread({}, defaultFormData)
        });

        if (surveyJson) {
          dataObj.survey = null;
        }

        return dataObj;
      },
      created: function created() {
        var _this = this;

        if (surveyJson) {
          var survey = new Survey.Model(surveyJson);
          survey.locale = app.dataset.lang;
          survey.onComplete.add(function (options) {
            // todo add logic that hides the button
            _this.submitToServer(options.showDataSavingSuccess, options.showDataSavingError);
          });
          this.survey = survey;
        } // execute the created function created in the admin


        if (typeof parsedCreated === "function") {
          parsedCreated();
        }
      },
      methods: _objectSpread(_objectSpread({
        // default method that return the data to be submitted to the server
        // this was added first to allow the Administrator to edit this function on the OC Admin
        submitData: function submitData() {
          var _this$$data = this.$data,
              parsedForm = _this$$data.form,
              parsedSurvey = _this$$data.survey,
              clonedData = _objectWithoutProperties(_this$$data, ["form", "survey"]);

          if (surveyJson) {
            clonedData["__surveyData__"] = JSON.stringify(this.survey.data);
          }

          return clonedData;
        }
      }, parsedMethods), {}, {
        formReset: function formReset() {
          this.form = _objectSpread({}, defaultFormData); // also reset the VeeValidate observer

          this.$refs.obs.reset();
        },
        formHandleSubmit: function formHandleSubmit(e) {
          e.preventDefault();
          this.submitToServer();
          return false;
        },
        submitToServer: function submitToServer() {
          var _this2 = this;

          var onSuccess = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};
          var onError = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};
          var vm = this; // keep a reference to the VeeValidate observer

          var observer = vm.$refs.obs;
          observer.validate().then(function (valid) {
            if (valid) {
              var action = vm.$refs.form.getAttribute("action"); // set form vue data

              vm.form.submitting = true;
              var frmData = vm.submitData();
              frmData.__RequestVerificationToken = vm.$refs.form.querySelector('input[name="__RequestVerificationToken"]').value;

              if ((typeof grecaptcha === "undefined" ? "undefined" : _typeof(grecaptcha)) == "object") {
                frmData.recaptcha = grecaptcha.getResponse();
              }

              var formData = window.serializeToFormData(frmData); // iterate all file inputs and add the files to the request

              $(_this2.$refs.form).find("input[type=file]").each(function () {
                var _iterator = _createForOfIteratorHelper(this.files),
                    _step;

                try {
                  for (_iterator.s(); !(_step = _iterator.n()).done;) {
                    var file = _step.value;
                    formData.append(file.name, file);
                  }
                } catch (err) {
                  _iterator.e(err);
                } finally {
                  _iterator.f();
                }
              });
              $.ajax({
                type: "POST",
                url: action,
                data: formData,
                cache: false,
                dataType: "json",
                // expect json from the server
                processData: false,
                //tell jquery not to process data
                contentType: false,
                //tell jquery not to set content-type
                success: function success(responseData) {
                  if (responseData.debug) {
                    console.log("Debug object: ", responseData.debug);
                  }

                  vm.form = _objectSpread({}, defaultFormData);
                  vm.form.responseData = responseData; // if there are validation errors on the form, display them.

                  if (responseData.validationError) {
                    //legacy
                    if (responseData.errors["serverValidationMessage"] != null) {
                      vm.form.serverValidationMessage = responseData.errors["serverValidationMessage"];
                      onError(vm.form.serverValidationMessage);
                    }

                    vm.form.submitValidationError = true;
                    observer.setErrors(responseData.errors);
                    return;
                  } // if the server sends a redirect, reload the window


                  if (responseData.redirect) {
                    window.location.href = responseData.redirect;
                    return;
                  }

                  vm.form.submitSuccess = true;
                  vm.form.successMessage = responseData.successMessage;
                  onSuccess(vm.form.successMessage);
                  return;
                },
                error: function error(xhr, statusText) {
                  vm.form = _objectSpread({}, defaultFormData);
                  vm.form.submitError = true;
                  vm.form.serverErrorMessage = "".concat(xhr.status, " ").concat(statusText);
                  var regex = /\\n|\\r\\n|\\n\\r|\\r/g;
                  vm.form.serverResponseError = xhr.responseText.replace(regex, '<br>');
                  onError(vm.form.serverResponseError);
                }
              });
            }
          });
        }
      })
    }));
  }); // run the vue-form init script provided in the OC admin ui

  var initScript = app.dataset.initScript;

  if (initScript) {
    var initFn = new Function(decodeUnicode(initScript));
    initFn();
  }
} // look for all vue forms when this script is loaded and initialize them


document.querySelectorAll(".vue-form").forEach(initForm);
document.addEventListener("DOMContentLoaded", function (event) {
  document.querySelectorAll(".vue-app-instance").forEach(function (elem) {
    new Vue({
      el: elem
    });
  });
  document.querySelectorAll(".vuetify-app-instance").forEach(function (elem) {
    new Vue({
      el: elem,
      vuetify: new Vuetify()
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9iamVjdFRvRm9ybURhdGEuanMiLCJ2ZWV2YWxpZGF0ZS1zZXR1cC5qcyIsInZ1ZS1mb3Jtcy5qcyJdLCJuYW1lcyI6WyJpc1VuZGVmaW5lZCIsInZhbHVlIiwidW5kZWZpbmVkIiwiaXNOdWxsIiwiaXNCb29sZWFuIiwiaXNPYmplY3QiLCJPYmplY3QiLCJpc0FycmF5IiwiQXJyYXkiLCJpc0RhdGUiLCJEYXRlIiwiaXNCbG9iIiwic2l6ZSIsInR5cGUiLCJzbGljZSIsImlzRmlsZSIsIm5hbWUiLCJsYXN0TW9kaWZpZWREYXRlIiwibGFzdE1vZGlmaWVkIiwic2VyaWFsaXplIiwib2JqIiwiY2ZnIiwiZmQiLCJwcmUiLCJ3aXRob3V0QXJyYXlLZXkiLCJpbmRpY2VzIiwibnVsbHNBc1VuZGVmaW5lZHMiLCJib29sZWFuc0FzSW50ZWdlcnMiLCJhbGxvd0VtcHR5QXJyYXlzIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJsZW5ndGgiLCJmb3JFYWNoIiwiaW5kZXgiLCJrZXkiLCJ0b0lTT1N0cmluZyIsImtleXMiLCJwcm9wIiwibGFzdEluZGV4T2YiLCJzdWJzdHJpbmciLCJ3aW5kb3ciLCJzZXJpYWxpemVUb0Zvcm1EYXRhIiwiVnVlIiwiY29tcG9uZW50IiwiVmVlVmFsaWRhdGUiLCJWYWxpZGF0aW9uUHJvdmlkZXIiLCJWYWxpZGF0aW9uT2JzZXJ2ZXIiLCJsb2NhbGl6ZSIsImVuIiwiZnIiLCJkZWNvZGVVbmljb2RlIiwic3RyIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiYXRvYiIsInNwbGl0IiwibWFwIiwiYyIsImNoYXJDb2RlQXQiLCJ0b1N0cmluZyIsImpvaW4iLCJpbml0Rm9ybSIsImFwcCIsImRhdGFzZXQiLCJsYW5nIiwiY29tcG9uZW50T3B0aW9ucyIsIm9wdGlvbnMiLCJwYXJzZWRPcHRpb25zIiwiZm4iLCJGdW5jdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJwYXJzZWREYXRhIiwiZGF0YSIsInBhcnNlZE1ldGhvZHMiLCJtZXRob2RzIiwicGFyc2VkQ3JlYXRlZCIsImNyZWF0ZWQiLCJwYXJzZWRSZXN0Iiwib2JqRGF0YSIsImRlZmF1bHRGb3JtRGF0YSIsInN1Ym1pdHRpbmciLCJzdWJtaXRTdWNjZXNzIiwic3VjY2Vzc01lc3NhZ2UiLCJzdWJtaXRFcnJvciIsInN1Ym1pdFZhbGlkYXRpb25FcnJvcnMiLCJzZXJ2ZXJWYWxpZGF0aW9uTWVzc2FnZSIsInNlcnZlckVycm9yTWVzc2FnZSIsInJlc3BvbnNlRGF0YSIsImNvbXBvbmVudFRlbXBsYXRlIiwidGVtcGxhdGUiLCJzdXJ2ZXlKc29uIiwicmVzb2x2ZSIsImRhdGFPYmoiLCJmb3JtIiwic3VydmV5IiwiU3VydmV5IiwiTW9kZWwiLCJsb2NhbGUiLCJvbkNvbXBsZXRlIiwiYWRkIiwic3VibWl0VG9TZXJ2ZXIiLCJzaG93RGF0YVNhdmluZ1N1Y2Nlc3MiLCJzaG93RGF0YVNhdmluZ0Vycm9yIiwic3VibWl0RGF0YSIsIiRkYXRhIiwicGFyc2VkRm9ybSIsInBhcnNlZFN1cnZleSIsImNsb25lZERhdGEiLCJKU09OIiwic3RyaW5naWZ5IiwiZm9ybVJlc2V0IiwiJHJlZnMiLCJvYnMiLCJyZXNldCIsImZvcm1IYW5kbGVTdWJtaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJvblN1Y2Nlc3MiLCJvbkVycm9yIiwidm0iLCJvYnNlcnZlciIsInZhbGlkYXRlIiwidGhlbiIsInZhbGlkIiwiYWN0aW9uIiwiZ2V0QXR0cmlidXRlIiwiZnJtRGF0YSIsIl9fUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuIiwicXVlcnlTZWxlY3RvciIsImdyZWNhcHRjaGEiLCJyZWNhcHRjaGEiLCJnZXRSZXNwb25zZSIsImZvcm1EYXRhIiwiJCIsImZpbmQiLCJlYWNoIiwiZmlsZXMiLCJmaWxlIiwiYWpheCIsInVybCIsImNhY2hlIiwiZGF0YVR5cGUiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsImRlYnVnIiwidmFsaWRhdGlvbkVycm9yIiwiZXJyb3JzIiwic3VibWl0VmFsaWRhdGlvbkVycm9yIiwic2V0RXJyb3JzIiwicmVkaXJlY3QiLCJsb2NhdGlvbiIsImhyZWYiLCJlcnJvciIsInhociIsInN0YXR1c1RleHQiLCJzdGF0dXMiLCJyZWdleCIsInNlcnZlclJlc3BvbnNlRXJyb3IiLCJyZXNwb25zZVRleHQiLCJyZXBsYWNlIiwiaW5pdFNjcmlwdCIsImluaXRGbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImVsZW0iLCJlbCIsInZ1ZXRpZnkiLCJWdWV0aWZ5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsQ0FBQyxZQUFXO0FBQ1YsTUFBTUEsV0FBVyxHQUFHLFNBQWRBLFdBQWMsQ0FBQUMsS0FBSztBQUFBLFdBQUlBLEtBQUssS0FBS0MsU0FBZDtBQUFBLEdBQXpCOztBQUNBLE1BQU1DLE1BQU0sR0FBRyxTQUFUQSxNQUFTLENBQUFGLEtBQUs7QUFBQSxXQUFJQSxLQUFLLEtBQUssSUFBZDtBQUFBLEdBQXBCOztBQUNBLE1BQU1HLFNBQVMsR0FBRyxTQUFaQSxTQUFZLENBQUFILEtBQUs7QUFBQSxXQUFJLE9BQU9BLEtBQVAsS0FBaUIsU0FBckI7QUFBQSxHQUF2Qjs7QUFDQSxNQUFNSSxRQUFRLEdBQUcsU0FBWEEsUUFBVyxDQUFBSixLQUFLO0FBQUEsV0FBSUEsS0FBSyxLQUFLSyxNQUFNLENBQUNMLEtBQUQsQ0FBcEI7QUFBQSxHQUF0Qjs7QUFDQSxNQUFNTSxPQUFPLEdBQUcsU0FBVkEsT0FBVSxDQUFBTixLQUFLO0FBQUEsV0FBSU8sS0FBSyxDQUFDRCxPQUFOLENBQWNOLEtBQWQsQ0FBSjtBQUFBLEdBQXJCOztBQUNBLE1BQU1RLE1BQU0sR0FBRyxTQUFUQSxNQUFTLENBQUFSLEtBQUs7QUFBQSxXQUFJQSxLQUFLLFlBQVlTLElBQXJCO0FBQUEsR0FBcEI7O0FBQ0EsTUFBTUMsTUFBTSxHQUFHLFNBQVRBLE1BQVMsQ0FBQVYsS0FBSztBQUFBLFdBQ2xCQSxLQUFLLElBQ0wsT0FBT0EsS0FBSyxDQUFDVyxJ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QUEwQixtQkFBMUIsRUFBK0NwSSxPQUEvQyxDQUF1RCxVQUFVdUksSUFBVixFQUFnQjtBQUNyRSxRQUFJN0gsR0FBSixDQUFRO0FBQ044SCxNQUFBQSxFQUFFLEVBQUVEO0FBREUsS0FBUjtBQUdELEdBSkQ7QUFNQUosRUFBQUEsUUFBUSxDQUFDQyxnQkFBVCxDQUEwQix1QkFBMUIsRUFBbURwSSxPQUFuRCxDQUEyRCxVQUFVdUksSUFBVixFQUFnQjtBQUN6RSxRQUFJN0gsR0FBSixDQUFRO0FBQ044SCxNQUFBQSxFQUFFLEVBQUVELElBREU7QUFFTkUsTUFBQUEsT0FBTyxFQUFFLElBQUlDLE9BQUo7QUFGSCxLQUFSO0FBSUQsR0FMRDtBQU9ELENBZkQiLCJmaWxlIjoidnVlLWZvcm1zLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xyXG4gIGNvbnN0IGlzVW5kZWZpbmVkID0gdmFsdWUgPT4gdmFsdWUgPT09IHVuZGVmaW5lZDtcclxuICBjb25zdCBpc051bGwgPSB2YWx1ZSA9PiB2YWx1ZSA9PT0gbnVsbDtcclxuICBjb25zdCBpc0Jvb2xlYW4gPSB2YWx1ZSA9PiB0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiO1xyXG4gIGNvbnN0IGlzT2JqZWN0ID0gdmFsdWUgPT4gdmFsdWUgPT09IE9iamVjdCh2YWx1ZSk7XHJcbiAgY29uc3QgaXNBcnJheSA9IHZhbHVlID0+IEFycmF5LmlzQXJyYXkodmFsdWUpO1xyXG4gIGNvbnN0IGlzRGF0ZSA9IHZhbHVlID0+IHZhbHVlIGluc3RhbmNlb2YgRGF0ZTtcclxuICBjb25zdCBpc0Jsb2IgPSB2YWx1ZSA9PlxyXG4gICAgdmFsdWUgJiZcclxuICAgIHR5cGVvZiB2YWx1ZS5zaXplID09PSBcIm51bWJlclwiICYmXHJcbiAgICB0eXBlb2YgdmFsdWUudHlwZSA9PT0gXCJzdHJpbmdcIiAmJlxyXG4gICAgdHlwZW9mIHZhbHVlLnNsaWNlID09PSBcImZ1bmN0aW9uXCI7XHJcbiAgY29uc3QgaXNGaWxlID0gdmFsdWUgPT5cclxuICAgIGlzQmxvYih2YWx1ZSkgJiZcclxuICAgIHR5cGVvZiB2YWx1ZS5uYW1lID09PSBcInN0cmluZ1wiICYmXHJcbiAgICAodHlwZW9mIHZhbHVlLmxhc3RNb2RpZmllZERhdGUgPT09IFwib2JqZWN0XCIgfHxcclxuICAgICAgdHlwZW9mIHZhbHVlLmxhc3RNb2RpZmllZCA9PT0gXCJudW1iZXJcIik7XHJcbiAgY29uc3Qgc2VyaWFsaXplID0gKG9iaiwgY2ZnLCBmZCwgcHJlKSA9PiB7XHJcbiAgICBjZmcgPSBjZmcgfHwge307XHJcbiAgICBjZmcud2l0aG91dEFycmF5S2V5ID0gaXNVbmRlZmluZWQoY2ZnLndpdGhvdXRBcnJheUtleSlcclxuICAgICAgPyB0cnVlXHJcbiAgICAgIDogY2ZnLndpdGhvdXRBcnJheUtleTtcclxuICAgIGNmZy5pbmRpY2VzID0gaXNVbmRlZmluZWQoY2ZnLmluZGljZXMpID8gZmFsc2UgOiBjZmcuaW5kaWNlcztcclxuICAgIGNmZy5udWxsc0FzVW5kZWZpbmVkcyA9IGlzVW5kZWZpbmVkKGNmZy5udWxsc0FzVW5kZWZpbmVkcylcclxuICAgICAgPyBmYWxzZVxyXG4gICAgICA6IGNmZy5udWxsc0FzVW5kZWZpbmVkcztcclxuICAgIGNmZy5ib29sZWFuc0FzSW50ZWdlcnMgPSBpc1VuZGVmaW5lZChjZmcuYm9vbGVhbnNBc0ludGVnZXJzKVxyXG4gICAgICA/IGZhbHNlXHJcbiAgICAgIDogY2ZnLmJvb2xlYW5zQXNJbnRlZ2VycztcclxuICAgIGNmZy5hbGxvd0VtcHR5QXJyYXlzID0gaXNVbmRlZmluZWQoY2ZnLmFsbG93RW1wdHlBcnJheXMpXHJcbiAgICAgID8gZmFsc2VcclxuICAgICAgOiBjZmcuYWxsb3dFbXB0eUFycmF5cztcclxuICAgIGZkID0gZmQgfHwgbmV3IEZvcm1EYXRhKCk7XHJcbiAgICBpZiAoaXNVbmRlZmluZWQob2JqKSkge1xyXG4gICAgICByZXR1cm4gZmQ7XHJcbiAgICB9IGVsc2UgaWYgKGlzTnVsbChvYmopKSB7XHJcbiAgICAgIGlmICghY2ZnLm51bGxzQXNVbmRlZmluZWRzKSB7XHJcbiAgICAgICAgZmQuYXBwZW5kKHByZSwgXCJcIik7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoaXNCb29sZWFuKG9iaikpIHtcclxuICAgICAgaWYgKGNmZy5ib29sZWFuc0FzSW50ZWdlcnMpIHtcclxuICAgICAgICBmZC5hcHBlbmQocHJlLCBvYmogPyAxIDogMCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmQuYXBwZW5kKHByZSwgb2JqKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChpc0FycmF5KG9iaikpIHtcclxuICAgICAgaWYgKG9iai5sZW5ndGgpIHtcclxuICAgICAgICBvYmouZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBrZXkgPSBjZmcud2l0aG91dEFycmF5S2V5XHJcbiAgICAgICAgICAgID8gcHJlXHJcbiAgICAgICAgICAgIDogcHJlICsgXCJbXCIgKyAoY2ZnLmluZGljZXMgPyBpbmRleCA6IFwiXCIpICsgXCJdXCI7XHJcbiAgICAgICAgICBzZXJpYWxpemUodmFsdWUsIGNmZywgZmQsIGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoY2ZnLmFsbG93RW1wdHlBcnJheXMpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBjZmcud2l0aG91dEFycmF5S2V5ID8gcHJlIDogcHJlICsgXCJbXVwiO1xyXG4gICAgICAgIGZkLmFwcGVuZChrZXksIFwiXCIpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGlzRGF0ZShvYmopKSB7XHJcbiAgICAgIGZkLmFwcGVuZChwcmUsIG9iai50b0lTT1N0cmluZygpKTtcclxuICAgIH0gZWxzZSBpZiAoaXNPYmplY3Qob2JqKSAmJiAhaXNGaWxlKG9iaikgJiYgIWlzQmxvYihvYmopKSB7XHJcbiAgICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChwcm9wID0+IHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IG9ialtwcm9wXTtcclxuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgIHdoaWxlIChcclxuICAgICAgICAgICAgcHJvcC5sZW5ndGggPiAyICYmXHJcbiAgICAgICAgICAgIHByb3AubGFzdEluZGV4T2YoXCJbXVwiKSA9PT0gcHJvcC5sZW5ndGggLSAyXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgcHJvcCA9IHByb3Auc3Vic3RyaW5nKDAsIHByb3AubGVuZ3RoIC0gMik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGtleSA9IHByZSA/IHByZSArIFwiW1wiICsgcHJvcCArIFwiXVwiIDogcHJvcDtcclxuICAgICAgICBzZXJpYWxpemUodmFsdWUsIGNmZywgZmQsIGtleSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZmQuYXBwZW5kKHByZSwgb2JqKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmZDtcclxuICB9O1xyXG4gIHdpbmRvdy5zZXJpYWxpemVUb0Zvcm1EYXRhID0gc2VyaWFsaXplO1xyXG59KSgpOyIsIlxyXG4vLyByZWdpc3RlciBWZWVWYWxpZGF0ZSBjb21wb25lbnRzIGdsb2JhbGx5XHJcblZ1ZS5jb21wb25lbnQoJ3ZhbGlkYXRpb24tcHJvdmlkZXInLCBWZWVWYWxpZGF0ZS5WYWxpZGF0aW9uUHJvdmlkZXIpO1xyXG5WdWUuY29tcG9uZW50KCd2YWxpZGF0aW9uLW9ic2VydmVyJywgVmVlVmFsaWRhdGUuVmFsaWRhdGlvbk9ic2VydmVyKTsgXHJcblxyXG4vLyBpbmNsdWRlIGRlZmF1bHQgZW5nbGlzaCBhbmQgZnJlbmNoIHRyYW5zbGF0aW9ucy5cclxuVmVlVmFsaWRhdGUubG9jYWxpemUoe1xyXG4gIGVuOntcclxuICAgIFwiY29kZVwiOiBcImVuXCIsXHJcbiAgICBcIm1lc3NhZ2VzXCI6IHtcclxuICAgICAgXCJhbHBoYVwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbWF5IG9ubHkgY29udGFpbiBhbHBoYWJldGljIGNoYXJhY3RlcnNcIixcclxuICAgICAgXCJhbHBoYV9udW1cIjogXCJUaGUge19maWVsZF99IGZpZWxkIG1heSBvbmx5IGNvbnRhaW4gYWxwaGEtbnVtZXJpYyBjaGFyYWN0ZXJzXCIsXHJcbiAgICAgIFwiYWxwaGFfZGFzaFwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbWF5IGNvbnRhaW4gYWxwaGEtbnVtZXJpYyBjaGFyYWN0ZXJzIGFzIHdlbGwgYXMgZGFzaGVzIGFuZCB1bmRlcnNjb3Jlc1wiLFxyXG4gICAgICBcImFscGhhX3NwYWNlc1wiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbWF5IG9ubHkgY29udGFpbiBhbHBoYWJldGljIGNoYXJhY3RlcnMgYXMgd2VsbCBhcyBzcGFjZXNcIixcclxuICAgICAgXCJiZXR3ZWVuXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBtdXN0IGJlIGJldHdlZW4ge21pbn0gYW5kIHttYXh9XCIsXHJcbiAgICAgIFwiY29uZmlybWVkXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBjb25maXJtYXRpb24gZG9lcyBub3QgbWF0Y2hcIixcclxuICAgICAgXCJkaWdpdHNcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgYmUgbnVtZXJpYyBhbmQgZXhhY3RseSBjb250YWluIHtsZW5ndGh9IGRpZ2l0c1wiLFxyXG4gICAgICBcImRpbWVuc2lvbnNcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgYmUge3dpZHRofSBwaXhlbHMgYnkge2hlaWdodH0gcGl4ZWxzXCIsXHJcbiAgICAgIFwiZW1haWxcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgYmUgYSB2YWxpZCBlbWFpbFwiLFxyXG4gICAgICBcImV4Y2x1ZGVkXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBpcyBub3QgYSB2YWxpZCB2YWx1ZVwiLFxyXG4gICAgICBcImV4dFwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgaXMgbm90IGEgdmFsaWQgZmlsZVwiLFxyXG4gICAgICBcImltYWdlXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBtdXN0IGJlIGFuIGltYWdlXCIsXHJcbiAgICAgIFwiaW50ZWdlclwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbXVzdCBiZSBhbiBpbnRlZ2VyXCIsXHJcbiAgICAgIFwibGVuZ3RoXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBtdXN0IGJlIHtsZW5ndGh9IGxvbmdcIixcclxuICAgICAgXCJtYXhfdmFsdWVcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgYmUge21heH0gb3IgbGVzc1wiLFxyXG4gICAgICBcIm1heFwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbWF5IG5vdCBiZSBncmVhdGVyIHRoYW4ge2xlbmd0aH0gY2hhcmFjdGVyc1wiLFxyXG4gICAgICBcIm1pbWVzXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBtdXN0IGhhdmUgYSB2YWxpZCBmaWxlIHR5cGVcIixcclxuICAgICAgXCJtaW5fdmFsdWVcIjogXCJUaGUge19maWVsZF99IGZpZWxkIG11c3QgYmUge21pbn0gb3IgbW9yZVwiLFxyXG4gICAgICBcIm1pblwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbXVzdCBiZSBhdCBsZWFzdCB7bGVuZ3RofSBjaGFyYWN0ZXJzXCIsXHJcbiAgICAgIFwibnVtZXJpY1wiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgbWF5IG9ubHkgY29udGFpbiBudW1lcmljIGNoYXJhY3RlcnNcIixcclxuICAgICAgXCJvbmVPZlwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgaXMgbm90IGEgdmFsaWQgdmFsdWVcIixcclxuICAgICAgXCJyZWdleFwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgZm9ybWF0IGlzIGludmFsaWRcIixcclxuICAgICAgXCJyZXF1aXJlZF9pZlwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgaXMgcmVxdWlyZWRcIixcclxuICAgICAgXCJyZXF1aXJlZFwiOiBcIlRoZSB7X2ZpZWxkX30gZmllbGQgaXMgcmVxdWlyZWRcIixcclxuICAgICAgXCJzaXplXCI6IFwiVGhlIHtfZmllbGRffSBmaWVsZCBzaXplIG11c3QgYmUgbGVzcyB0aGFuIHtzaXplfUtCXCJcclxuICAgIH1cclxuICB9LFxyXG4gIGZyOiB7XHJcbiAgICBcImNvZGVcIjogXCJmclwiLFxyXG4gICAgXCJtZXNzYWdlc1wiOiB7XHJcbiAgICAgIFwiYWxwaGFcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gbmUgcGV1dCBjb250ZW5pciBxdWUgZGVzIGxldHRyZXNcIixcclxuICAgICAgXCJhbHBoYV9udW1cIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gbmUgcGV1dCBjb250ZW5pciBxdWUgZGVzIGNhcmFjdMOocmVzIGFscGhhLW51bcOpcmlxdWVzXCIsXHJcbiAgICAgIFwiYWxwaGFfZGFzaFwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBuZSBwZXV0IGNvbnRlbmlyIHF1ZSBkZXMgY2FyYWN0w6hyZXMgYWxwaGEtbnVtw6lyaXF1ZXMsIHRpcmV0cyBvdSBzb3VsaWduw6lzXCIsXHJcbiAgICAgIFwiYWxwaGFfc3BhY2VzXCI6IFwiTGUgY2hhbXAge19maWVsZF99IG5lIHBldXQgY29udGVuaXIgcXVlIGRlcyBsZXR0cmVzIG91IGRlcyBlc3BhY2VzXCIsXHJcbiAgICAgIFwiYmV0d2VlblwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBkb2l0IMOqdHJlIGNvbXByaXMgZW50cmUge21pbn0gZXQge21heH1cIixcclxuICAgICAgXCJjb25maXJtZWRcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gbmUgY29ycmVzcG9uZCBwYXNcIixcclxuICAgICAgXCJkaWdpdHNcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZG9pdCDDqnRyZSB1biBub21icmUgZW50aWVyIGRlIHtsZW5ndGh9IGNoaWZmcmVzXCIsXHJcbiAgICAgIFwiZGltZW5zaW9uc1wiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBkb2l0IGF2b2lyIHVuZSB0YWlsbGUgZGUge3dpZHRofSBwaXhlbHMgcGFyIHtoZWlnaHR9IHBpeGVsc1wiLFxyXG4gICAgICBcImVtYWlsXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgw6p0cmUgdW5lIGFkcmVzc2UgZS1tYWlsIHZhbGlkZVwiLFxyXG4gICAgICBcImV4Y2x1ZGVkXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgw6p0cmUgdW5lIHZhbGV1ciB2YWxpZGVcIixcclxuICAgICAgXCJleHRcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZG9pdCDDqnRyZSB1biBmaWNoaWVyIHZhbGlkZVwiLFxyXG4gICAgICBcImltYWdlXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgw6p0cmUgdW5lIGltYWdlXCIsXHJcbiAgICAgIFwiaW50ZWdlclwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBkb2l0IMOqdHJlIHVuIGVudGllclwiLFxyXG4gICAgICBcImxlbmd0aFwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBkb2l0IGNvbnRlbmlyIHtsZW5ndGh9IGNhcmFjdMOocmVzXCIsXHJcbiAgICAgIFwibWF4X3ZhbHVlXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgYXZvaXIgdW5lIHZhbGV1ciBkZSB7bWF4fSBvdSBtb2luc1wiLFxyXG4gICAgICBcIm1heFwiOiBcIkxlIGNoYW1wIHtfZmllbGRffSBuZSBwZXV0IHBhcyBjb250ZW5pciBwbHVzIGRlIHtsZW5ndGh9IGNhcmFjdMOocmVzXCIsXHJcbiAgICAgIFwibWltZXNcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZG9pdCBhdm9pciB1biB0eXBlIE1JTUUgdmFsaWRlXCIsXHJcbiAgICAgIFwibWluX3ZhbHVlXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgYXZvaXIgdW5lIHZhbGV1ciBkZSB7bWlufSBvdSBwbHVzXCIsXHJcbiAgICAgIFwibWluXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGRvaXQgY29udGVuaXIgYXUgbWluaW11bSB7bGVuZ3RofSBjYXJhY3TDqHJlc1wiLFxyXG4gICAgICBcIm51bWVyaWNcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gbmUgcGV1dCBjb250ZW5pciBxdWUgZGVzIGNoaWZmcmVzXCIsXHJcbiAgICAgIFwib25lT2ZcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZG9pdCDDqnRyZSB1bmUgdmFsZXVyIHZhbGlkZVwiLFxyXG4gICAgICBcInJlZ2V4XCI6IFwiTGUgY2hhbXAge19maWVsZF99IGVzdCBpbnZhbGlkZVwiLFxyXG4gICAgICBcInJlcXVpcmVkXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGVzdCBvYmxpZ2F0b2lyZVwiLFxyXG4gICAgICBcInJlcXVpcmVkX2lmXCI6IFwiTGUgY2hhbXAge19maWVsZF99IGVzdCBvYmxpZ2F0b2lyZSBsb3JzcXVlIHt0YXJnZXR9IHBvc3PDqGRlIGNldHRlIHZhbGV1clwiLFxyXG4gICAgICBcInNpemVcIjogXCJMZSBjaGFtcCB7X2ZpZWxkX30gZG9pdCBhdm9pciB1biBwb2lkcyBpbmbDqXJpZXVyIMOgIHtzaXplfUtCXCJcclxuICAgIH1cclxuICB9LFxyXG59KTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5mdW5jdGlvbiBkZWNvZGVVbmljb2RlKHN0cikge1xyXG4gIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoXHJcbiAgICBhdG9iKHN0cilcclxuICAgICAgLnNwbGl0KFwiXCIpXHJcbiAgICAgIC5tYXAoZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICByZXR1cm4gXCIlXCIgKyAoXCIwMFwiICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xyXG4gICAgICB9KVxyXG4gICAgICAuam9pbihcIlwiKVxyXG4gICk7XHJcbn1cclxuXHJcbi8vIHJ1biBpbml0IHNjcmlwdFxyXG5mdW5jdGlvbiBpbml0Rm9ybShhcHApIHtcclxuICAvLyBTZXQgVmVlVmFsaWRhdGUgbGFuZ3VhZ2UgYmFzZWQgb24gdGhlIGxhbmcgcGFyYW1ldGVyXHJcbiAgVmVlVmFsaWRhdGUubG9jYWxpemUoYXBwLmRhdGFzZXQubGFuZyk7XHJcblxyXG4gIC8vIG9wdGlvbnMgb2JqZWN0IGNvbWluZyBmcm9tIHRoZSBPQyBhZG1pblxyXG4gIGxldCBjb21wb25lbnRPcHRpb25zID0gYXBwLmRhdGFzZXQub3B0aW9ucztcclxuXHJcbiAgbGV0IHBhcnNlZE9wdGlvbnMgPSB7fTtcclxuICBpZiAoY29tcG9uZW50T3B0aW9ucykge1xyXG4gICAgY29uc3QgZm4gPSBuZXcgRnVuY3Rpb24oYHJldHVybiAoJHtkZWNvZGVVbmljb2RlKGNvbXBvbmVudE9wdGlvbnMpfSk7YCk7XHJcbiAgICBwYXJzZWRPcHRpb25zID0gZm4oKTtcclxuICAgIGlmICghcGFyc2VkT3B0aW9ucykge1xyXG4gICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICBcIkNvdWxkIG5vdCBwYXJzZSB0aGUgY29tcG9uZW50T3B0aW9ucyBvYmplY3QuIE1ha2Ugc3VyZSB5b3VyIG9iamVjdCBpcyB3ZWxsIGZvcm1lZC5cIlxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3Qge1xyXG4gICAgZGF0YTogcGFyc2VkRGF0YSxcclxuICAgIG1ldGhvZHM6IHBhcnNlZE1ldGhvZHMsXHJcbiAgICBjcmVhdGVkOiBwYXJzZWRDcmVhdGVkLFxyXG4gICAgLi4ucGFyc2VkUmVzdFxyXG4gIH0gPSBwYXJzZWRPcHRpb25zO1xyXG4gIGxldCBvYmpEYXRhID0gcGFyc2VkRGF0YTtcclxuICBpZiAodHlwZW9mIHBhcnNlZERhdGEgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgb2JqRGF0YSA9IHBhcnNlZERhdGEoKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGRlZmF1bHRGb3JtRGF0YSA9IHtcclxuICAgIHN1Ym1pdHRpbmc6IGZhbHNlLFxyXG4gICAgc3VibWl0U3VjY2VzczogZmFsc2UsXHJcbiAgICBzdWNjZXNzTWVzc2FnZTogdW5kZWZpbmVkLFxyXG4gICAgc3VibWl0RXJyb3I6IGZhbHNlLFxyXG4gICAgc3VibWl0VmFsaWRhdGlvbkVycm9yczogZmFsc2UsXHJcbiAgICBzZXJ2ZXJWYWxpZGF0aW9uTWVzc2FnZTogdW5kZWZpbmVkLFxyXG4gICAgc2VydmVyRXJyb3JNZXNzYWdlOiB1bmRlZmluZWQsXHJcbiAgICByZXNwb25zZURhdGE6IHVuZGVmaW5lZCxcclxuICB9O1xyXG5cclxuICBjb25zdCBjb21wb25lbnRUZW1wbGF0ZSA9IGRlY29kZVVuaWNvZGUoYXBwLmRhdGFzZXQudGVtcGxhdGUpO1xyXG4gIGNvbnN0IHN1cnZleUpzb24gPSBkZWNvZGVVbmljb2RlKGFwcC5kYXRhc2V0LnN1cnZleUpzb24pXHJcbiAgVnVlLmNvbXBvbmVudChhcHAuZGF0YXNldC5uYW1lLCBmdW5jdGlvbiAocmVzb2x2ZSkge1xyXG4gICAgcmVzb2x2ZSh7XHJcbiAgICAgIC8vIEZpcnN0IGJlY2F1c2UgdGhlIGVsZW1lbnRzIGJlbG93IHdpbGwgb3ZlcnJpZGVcclxuICAgICAgLi4ucGFyc2VkUmVzdCxcclxuICAgICAgdGVtcGxhdGU6IGAke2NvbXBvbmVudFRlbXBsYXRlfWAsXHJcbiAgICAgIGRhdGE6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCBkYXRhT2JqID0ge1xyXG4gICAgICAgICAgLi4ub2JqRGF0YSxcclxuICAgICAgICAgIGZvcm06IHsgLi4uZGVmYXVsdEZvcm1EYXRhIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmKHN1cnZleUpzb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGF0YU9iai5zdXJ2ZXkgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGF0YU9iajtcclxuICAgICAgfSxcclxuICAgICAgY3JlYXRlZCAoKSB7XHJcbiAgICAgICAgaWYoc3VydmV5SnNvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICB2YXIgc3VydmV5ID0gbmV3IFN1cnZleS5Nb2RlbChzdXJ2ZXlKc29uKTtcclxuICAgICAgICAgIHN1cnZleS5sb2NhbGUgPSBhcHAuZGF0YXNldC5sYW5nO1xyXG4gICAgICAgICAgc3VydmV5Lm9uQ29tcGxldGUuYWRkKChvcHRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHRvZG8gYWRkIGxvZ2ljIHRoYXQgaGlkZXMgdGhlIGJ1dHRvblxyXG4gICAgICAgICAgICB0aGlzLnN1Ym1pdFRvU2VydmVyKG9wdGlvbnMuc2hvd0RhdGFTYXZpbmdTdWNjZXNzLCBvcHRpb25zLnNob3dEYXRhU2F2aW5nRXJyb3IpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICB0aGlzLnN1cnZleSA9IHN1cnZleTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZXhlY3V0ZSB0aGUgY3JlYXRlZCBmdW5jdGlvbiBjcmVhdGVkIGluIHRoZSBhZG1pblxyXG4gICAgICAgIGlmICh0eXBlb2YgcGFyc2VkQ3JlYXRlZCA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICBwYXJzZWRDcmVhdGVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBtZXRob2RzOiB7XHJcbiAgICAgICAgLy8gZGVmYXVsdCBtZXRob2QgdGhhdCByZXR1cm4gdGhlIGRhdGEgdG8gYmUgc3VibWl0dGVkIHRvIHRoZSBzZXJ2ZXJcclxuICAgICAgICAvLyB0aGlzIHdhcyBhZGRlZCBmaXJzdCB0byBhbGxvdyB0aGUgQWRtaW5pc3RyYXRvciB0byBlZGl0IHRoaXMgZnVuY3Rpb24gb24gdGhlIE9DIEFkbWluXHJcbiAgICAgICAgc3VibWl0RGF0YSgpIHtcclxuICAgICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgZm9ybTogcGFyc2VkRm9ybSxcclxuICAgICAgICAgICAgc3VydmV5OiBwYXJzZWRTdXJ2ZXksXHJcbiAgICAgICAgICAgIC4uLmNsb25lZERhdGFcclxuICAgICAgICAgIH0gPSB0aGlzLiRkYXRhO1xyXG4gICAgICAgICAgaWYoc3VydmV5SnNvbilcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgY2xvbmVkRGF0YVtcIl9fc3VydmV5RGF0YV9fXCJdID0gSlNPTi5zdHJpbmdpZnkodGhpcy5zdXJ2ZXkuZGF0YSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gY2xvbmVkRGF0YVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLi4ucGFyc2VkTWV0aG9kcyxcclxuICAgICAgICBmb3JtUmVzZXQoKSB7XHJcbiAgICAgICAgICB0aGlzLmZvcm0gPSB7IC4uLmRlZmF1bHRGb3JtRGF0YSB9O1xyXG4gICAgICAgICAgLy8gYWxzbyByZXNldCB0aGUgVmVlVmFsaWRhdGUgb2JzZXJ2ZXJcclxuICAgICAgICAgIHRoaXMuJHJlZnMub2JzLnJlc2V0KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBmb3JtSGFuZGxlU3VibWl0KGUpIHtcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIHRoaXMuc3VibWl0VG9TZXJ2ZXIoKTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1Ym1pdFRvU2VydmVyKG9uU3VjY2VzcyA9ICgpID0+IHt9LCBvbkVycm9yID0gKCkgPT4ge30pIHtcclxuICAgICAgICAgIGNvbnN0IHZtID0gdGhpcztcclxuICAgICAgICAgIC8vIGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIFZlZVZhbGlkYXRlIG9ic2VydmVyXHJcbiAgICAgICAgICBjb25zdCBvYnNlcnZlciA9IHZtLiRyZWZzLm9icztcclxuICAgICAgICAgIG9ic2VydmVyLnZhbGlkYXRlKCkudGhlbigodmFsaWQpID0+IHtcclxuICAgICAgICAgICAgaWYgKHZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gdm0uJHJlZnMuZm9ybS5nZXRBdHRyaWJ1dGUoXCJhY3Rpb25cIik7XHJcbiAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIC8vIHNldCBmb3JtIHZ1ZSBkYXRhXHJcbiAgICAgICAgICAgICAgdm0uZm9ybS5zdWJtaXR0aW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgbGV0IGZybURhdGEgPSB2bS5zdWJtaXREYXRhKCk7XHJcbiAgICAgICAgICAgICAgZnJtRGF0YS5fX1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbiA9IHZtLiRyZWZzLmZvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgICAgICAgICdpbnB1dFtuYW1lPVwiX19SZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW5cIl0nXHJcbiAgICAgICAgICAgICAgKS52YWx1ZTtcclxuICAgICAgICAgICAgICBpZiAodHlwZW9mIGdyZWNhcHRjaGEgPT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgZnJtRGF0YS5yZWNhcHRjaGEgPSBncmVjYXB0Y2hhLmdldFJlc3BvbnNlKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBsZXQgZm9ybURhdGEgPSB3aW5kb3cuc2VyaWFsaXplVG9Gb3JtRGF0YShmcm1EYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gaXRlcmF0ZSBhbGwgZmlsZSBpbnB1dHMgYW5kIGFkZCB0aGUgZmlsZXMgdG8gdGhlIHJlcXVlc3RcclxuICAgICAgICAgICAgICAkKHRoaXMuJHJlZnMuZm9ybSkuZmluZChcImlucHV0W3R5cGU9ZmlsZV1cIikuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIHRoaXMuZmlsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKGZpbGUubmFtZSwgZmlsZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgdXJsOiBhY3Rpb24sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBmb3JtRGF0YSxcclxuICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIiwgLy8gZXhwZWN0IGpzb24gZnJvbSB0aGUgc2VydmVyXHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsIC8vdGVsbCBqcXVlcnkgbm90IHRvIHByb2Nlc3MgZGF0YVxyXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGZhbHNlLCAvL3RlbGwganF1ZXJ5IG5vdCB0byBzZXQgY29udGVudC10eXBlXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2VEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICBpZihyZXNwb25zZURhdGEuZGVidWcpXHJcbiAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRlYnVnIG9iamVjdDogXCIsIHJlc3BvbnNlRGF0YS5kZWJ1Zyk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgdm0uZm9ybSA9IHsgLi4uZGVmYXVsdEZvcm1EYXRhIH07XHJcbiAgICAgICAgICAgICAgICAgIHZtLmZvcm0ucmVzcG9uc2VEYXRhID0gcmVzcG9uc2VEYXRhO1xyXG4gICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgYXJlIHZhbGlkYXRpb24gZXJyb3JzIG9uIHRoZSBmb3JtLCBkaXNwbGF5IHRoZW0uXHJcbiAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZURhdGEudmFsaWRhdGlvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9sZWdhY3lcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VEYXRhLmVycm9yc1tcInNlcnZlclZhbGlkYXRpb25NZXNzYWdlXCJdICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHZtLmZvcm0uc2VydmVyVmFsaWRhdGlvbk1lc3NhZ2UgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZURhdGEuZXJyb3JzW1wic2VydmVyVmFsaWRhdGlvbk1lc3NhZ2VcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yKHZtLmZvcm0uc2VydmVyVmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2bS5mb3JtLnN1Ym1pdFZhbGlkYXRpb25FcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuc2V0RXJyb3JzKHJlc3BvbnNlRGF0YS5lcnJvcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHNlcnZlciBzZW5kcyBhIHJlZGlyZWN0LCByZWxvYWQgdGhlIHdpbmRvd1xyXG4gICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VEYXRhLnJlZGlyZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSByZXNwb25zZURhdGEucmVkaXJlY3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICB2bS5mb3JtLnN1Ym1pdFN1Y2Nlc3MgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICB2bS5mb3JtLnN1Y2Nlc3NNZXNzYWdlID0gcmVzcG9uc2VEYXRhLnN1Y2Nlc3NNZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICBvblN1Y2Nlc3Modm0uZm9ybS5zdWNjZXNzTWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzVGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICB2bS5mb3JtID0geyAuLi5kZWZhdWx0Rm9ybURhdGEgfTtcclxuICAgICAgICAgICAgICAgICAgdm0uZm9ybS5zdWJtaXRFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgIHZtLmZvcm0uc2VydmVyRXJyb3JNZXNzYWdlID0gYCR7eGhyLnN0YXR1c30gJHtzdGF0dXNUZXh0fWA7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gL1xcXFxufFxcXFxyXFxcXG58XFxcXG5cXFxccnxcXFxcci9nO1xyXG4gICAgICAgICAgICAgICAgICB2bS5mb3JtLnNlcnZlclJlc3BvbnNlRXJyb3IgPSB4aHIucmVzcG9uc2VUZXh0LnJlcGxhY2UocmVnZXgsICc8YnI+Jyk7XHJcbiAgICAgICAgICAgICAgICAgIG9uRXJyb3Iodm0uZm9ybS5zZXJ2ZXJSZXNwb25zZUVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIHJ1biB0aGUgdnVlLWZvcm0gaW5pdCBzY3JpcHQgcHJvdmlkZWQgaW4gdGhlIE9DIGFkbWluIHVpXHJcbiAgbGV0IGluaXRTY3JpcHQgPSBhcHAuZGF0YXNldC5pbml0U2NyaXB0O1xyXG4gIGlmIChpbml0U2NyaXB0KSB7XHJcbiAgICBjb25zdCBpbml0Rm4gPSBuZXcgRnVuY3Rpb24oZGVjb2RlVW5pY29kZShpbml0U2NyaXB0KSk7XHJcbiAgICBpbml0Rm4oKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIGxvb2sgZm9yIGFsbCB2dWUgZm9ybXMgd2hlbiB0aGlzIHNjcmlwdCBpcyBsb2FkZWQgYW5kIGluaXRpYWxpemUgdGhlbVxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnZ1ZS1mb3JtXCIpLmZvckVhY2goaW5pdEZvcm0pO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcblxyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudnVlLWFwcC1pbnN0YW5jZVwiKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICBuZXcgVnVlKHtcclxuICAgICAgZWw6IGVsZW0sXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi52dWV0aWZ5LWFwcC1pbnN0YW5jZVwiKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICBuZXcgVnVlKHtcclxuICAgICAgZWw6IGVsZW0sXHJcbiAgICAgIHZ1ZXRpZnk6IG5ldyBWdWV0aWZ5KCksXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbn0pO1xyXG4iXX0=
