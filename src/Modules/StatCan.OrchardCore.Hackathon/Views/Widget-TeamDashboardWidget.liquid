{% if User | is_in_role: "Hacker" %}

  {% assign user = User | user_id | users_by_id %}
  {% assign teamContentItemId = user.Properties.Hacker.Hacker.Team.ContentItemIds | first %}
  {% assign teamMembers = Queries.GetHackersForTeam | query: teamContentItemId: teamContentItemId %}
  {% assign team = Queries.GetTeam | query: teamContentItemId: teamContentItemId %}
  
  {% if user.Properties.Hacker.Hacker.Team.ContentItemIds | first != null %}
    <v-container>
      <v-row justify="center">
        <v-col cols="8">
          <v-card>
            <v-card outlined>
              <v-card-text>
                {% if Site.Properties.HackathonCustomSettings.TeamCustomSettings.TeamEditable.Value == true %}
                  <div class="d-flex">
                    <div class="icon-col"></div>
                    <div class="col">
                      {{ Model.ContentItem.Content.TeamDashboardWidget.TeamMessage.Html | liquid | sanitize_html | raw }}
                    </div>
                  </div>
                {% endif %}
              </v-card-text>
            </v-card>

            <v-card-title>{{ team | dispaly_text }}</v-card-title>
            <v-card-text>
              {% if Site.Properties.HackathonCustomSettings.TeamCustomSettings.TeamEditable.Value == true %}
                <button class="team-clipboard" tabindex="0" onclick="select_all_and_copy(document.getElementById('team-id'));$('#clipboard-icon').addClass('fa-clipboard fa-clipboard-check');">
                  <span class="d-flex align-items-center">{{ "ID:" | t }}
                  <span id="team-id" class="mx-1">{{ user.Properties.Hacker.Hacker.Team.ContentItemIds | first }}</span>
                  <i id="clipboard-icon" class="fas fa-clipboard mx-1" aria-label="{{ "Copy team identification" | t }}"></i>
                  </span>
                </button>
              {% endif %}
            </v-card-text>

            <v-card-title>{{ "Members" | t }}</v-card-title>
            <v-card-text>
              {% for teamMember in teamMembers %}
                <li class="d-flex">
                  <div class="icon-sm-col">
                    <i class="fas fa-user-circle small"></i>
                  </div>
                  <div class="col">
                    {{ teamMember.FirstName }}
                    {{ teamMember.LastName }}
                  </div>
                </li>
              {% endfor %}

            {% if Site.Properties.HackathonCustomSettings.TeamCustomSettings.TeamEditable.Value == true %}
              <div class="d-flex">
                <div class="icon-col"></div>
                <div class="col d-flex justify-content-md-start justify-content-end">
                <form class="my-2" method="post" action="{{"~/team/leave" | href}}">
                  {% antiforgerytoken%}
                  <input type="hidden" name="returnUrl" value="{{ Model.Dashboard.Content.AutoroutePart.Path }}">
                  <v-btn type="submit">{{ "Leave team" | t }}</v-btn>
                </form>
                </div>
              </div>
            {% endif %}
            </v-card-text>
          </v-card>
        </v-col>
      </v-row>
    </v-container>
  {% else %}
    <v-container>
      <v-row justify="center">
        <v-col cols="8">
          <v-card>
            <v-card outlined>
              <v-card-text>
                {{ Model.ContentItem.Content.TeamDashboardWidget.SoloMessage.Html | liquid | sanitize_html | raw }}
              </v-card-text>
            </v-card>

            {% if Site.Properties.HackathonCustomSettings.TeamCustomSettings.TeamEditable.Value == true %}
              <v-card-text>
                <form class="my-2" method="post" action="{{"~/team/create" | href}}">
                  {% antiforgerytoken%}
                  <input type="hidden" name="returnUrl" value="{{ Model.Dashboard.Content.AutoroutePart.Path }}">
                  <v-btn type="submit">{{ "Create team" | t }}</v-btn>
                </form>

                <v-card-title>{{ "Or" | t }}</v-card-title>

                <form class="my-2" method="post" action="{{"~/team/join" | href}}">
                  {% antiforgerytoken%}
                  <div class="input-group">
                    <v-text-field id="teamId" type="text" name="teamContentItemId" class="form-control" placeholder="{{ "Team ID" | t }}" aria-label="{{ "Team  identification" | t }}" aria-describedby="team-submit"></v-text-field>
                    <input type="hidden" name="returnUrl" value="{{ Model.Dashboard.Content.AutoroutePart.Path }}">
                    <div class="input-group-append">
                      <v-btn type="submit" id="team-submit-addon">{{ "Join" | t }}</v-btn>
                    </div>
                  </div>
                </form>
              </v-card-text>
            {% endif %}
          </v-card>
        </v-col>
      </v-row>
    </v-container>
  {% endif %}
{% endif %}
{% script src:'~/OrchardCore.Workflows/Scripts/crossbrowserclipboardcopy.min.js', debug_src:'~/OrchardCore.Workflows/Scripts/crossbrowserclipboardcopy.js', at:"Foot" %}
