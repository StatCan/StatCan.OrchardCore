@using StatCan.OrchardCore.AjaxForms.Models
@{
    var contentItem = ((ContentItem)Model.ContentItem);

    var inputPart = contentItem.As<FormInput>();

    var name = inputPart.Name.Text;
    var fieldId = !string.IsNullOrEmpty(name) ? Html.GenerateIdFromName(name) : default(string);
    var type = inputPart.Type.Text;
    var value = "";

    var label = inputPart.Name.Text;
    var placeholder = inputPart.Placeholder.Text;
    var helptext = inputPart.HelpText.Text;

    var stylePart = contentItem.As<FormInputStyle>();

    // classes
    var wrapperClass = stylePart.WrapperClass?.Text ?? "form-group";;
    var labelClass = stylePart.LabelClass?.Text;
    var inputClass = stylePart.InputClass?.Text ?? "form-control";

    if(!string.IsNullOrEmpty(wrapperClass))
    {
      Model.Classes.Add(wrapperClass);
    }
    var requiredPart = contentItem.As<FormRequiredValidation>();

    if (requiredPart.Required.Value)
    {
      Model.Classes.Add("required");
    }
    if (ViewData.ModelState.TryGetValue(name, out var fieldEntry))
    {
      value = fieldEntry.AttemptedValue;
      if (fieldEntry.Errors.Count > 0)
      {
        inputClass += " is-invalid";
      }
    }
}
  <div class="form-control-wrapper @string.Join(" ", Model.Classes)" asp-validation-class-for="@name">
    <label class="@labelClass" asp-for="@name">@label</label>
    <input id="@fieldId" name="@name" type="@type" value="@value" class="@inputClass" placeholder="@placeholder" aria-describedby="@fieldId-described-by" form-required-val="@requiredPart"/>

    <div id="@fieldId-described-by">
      @if (!string.IsNullOrWhiteSpace(helptext))
      {
        <small class="form-text">@helptext</small>
      }
    </div>
    @Html.ValidationMessage(fieldId)
  </div>
