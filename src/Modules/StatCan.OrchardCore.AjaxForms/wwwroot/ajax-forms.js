/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

// Unobtrusive validation support library for jQuery and jQuery Validate
// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.
// @version <placeholder>

/*jslint white: true, browser: true, onevar: true, undef: true, nomen: true, eqeqeq: true, plusplus: true, bitwise: true, regexp: true, newcap: true, immed: true, strict: false */

/*global document: false, jQuery: false */
(function (factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module.
    define("jquery.validate.unobtrusive", ['jquery-validation'], factory);
  } else if ((typeof module === "undefined" ? "undefined" : _typeof(module)) === 'object' && module.exports) {
    // CommonJS-like environments that support module.exports     
    module.exports = factory(require('jquery-validation'));
  } else {
    // Browser global
    jQuery.validator.unobtrusive = factory(jQuery);
  }
})(function ($) {
  var $jQval = $.validator,
      adapters,
      data_validation = "unobtrusiveValidation";

  function setValidationValues(options, ruleName, value) {
    options.rules[ruleName] = value;

    if (options.message) {
      options.messages[ruleName] = options.message;
    }
  }

  function splitAndTrim(value) {
    return value.replace(/^\s+|\s+$/g, "").split(/\s*,\s*/g);
  }

  function escapeAttributeValue(value) {
    // As mentioned on http://api.jquery.com/category/selectors/
    return value.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g, "\\$1");
  }

  function getModelPrefix(fieldName) {
    return fieldName.substr(0, fieldName.lastIndexOf(".") + 1);
  }

  function appendModelPrefix(value, prefix) {
    if (value.indexOf("*.") === 0) {
      value = value.replace("*.", prefix);
    }

    return value;
  }

  function onError(error, inputElement) {
    // 'this' is the form element
    var container = $(this).find("[data-valmsg-for='" + escapeAttributeValue(inputElement[0].name) + "']"),
        replaceAttrValue = container.attr("data-valmsg-replace"),
        replace = replaceAttrValue ? $.parseJSON(replaceAttrValue) !== false : null;
    container.removeClass("field-validation-valid").addClass("field-validation-error");
    error.data("unobtrusiveContainer", container);

    if (replace) {
      container.empty();
      error.removeClass("input-validation-error").appendTo(container);
    } else {
      error.hide();
    }
  }

  function onErrors(event, validator) {
    // 'this' is the form element
    var container = $(this).find("[data-valmsg-summary=true]"),
        list = container.find("ul");

    if (list && list.length && validator.errorList.length) {
      list.empty();
      container.addClass("validation-summary-errors").removeClass("validation-summary-valid");
      $.each(validator.errorList, function () {
        $("<li />").html(this.message).appendTo(list);
      });
    }
  }

  function onSuccess(error) {
    // 'this' is the form element
    var container = error.data("unobtrusiveContainer");

    if (container) {
      var replaceAttrValue = container.attr("data-valmsg-replace"),
          replace = replaceAttrValue ? $.parseJSON(replaceAttrValue) : null;
      container.addClass("field-validation-valid").removeClass("field-validation-error");
      error.removeData("unobtrusiveContainer");

      if (replace) {
        container.empty();
      }
    }
  }

  function onReset(event) {
    // 'this' is the form element
    var $form = $(this),
        key = '__jquery_unobtrusive_validation_form_reset';

    if ($form.data(key)) {
      return;
    } // Set a flag that indicates we're currently resetting the form.


    $form.data(key, true);

    try {
      $form.data("validator").resetForm();
    } finally {
      $form.removeData(key);
    }

    $form.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors");
    $form.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*") // If we were using valmsg-replace, get the underlying error
    .removeData("unobtrusiveContainer");
  }

  function validationInfo(form) {
    var $form = $(form),
        result = $form.data(data_validation),
        onResetProxy = $.proxy(onReset, form),
        defaultOptions = $jQval.unobtrusive.options || {},
        execInContext = function execInContext(name, args) {
      var func = defaultOptions[name];
      func && $.isFunction(func) && func.apply(form, args);
    };

    if (!result) {
      result = {
        options: {
          // options structure passed to jQuery Validate's validate() method
          errorClass: defaultOptions.errorClass || "input-validation-error",
          errorElement: defaultOptions.errorElement || "span",
          errorPlacement: function errorPlacement() {
            onError.apply(form, arguments);
            execInContext("errorPlacement", arguments);
          },
          invalidHandler: function invalidHandler() {
            onErrors.apply(form, arguments);
            execInContext("invalidHandler", arguments);
          },
          messages: {},
          rules: {},
          success: function success() {
            onSuccess.apply(form, arguments);
            execInContext("success", arguments);
          }
        },
        attachValidation: function attachValidation() {
          $form.off("reset." + data_validation, onResetProxy).on("reset." + data_validation, onResetProxy).validate(this.options);
        },
        validate: function validate() {
          // a validation function that is called by unobtrusive Ajax
          $form.validate();
          return $form.valid();
        }
      };
      $form.data(data_validation, result);
    }

    return result;
  }

  $jQval.unobtrusive = {
    adapters: [],
    parseElement: function parseElement(element, skipAttach) {
      /// <summary>
      /// Parses a single HTML element for unobtrusive validation attributes.
      /// </summary>
      /// <param name="element" domElement="true">The HTML element to be parsed.</param>
      /// <param name="skipAttach" type="Boolean">[Optional] true to skip attaching the
      /// validation to the form. If parsing just this single element, you should specify true.
      /// If parsing several elements, you should specify false, and manually attach the validation
      /// to the form when you are finished. The default is false.</param>
      var $element = $(element),
          form = $element.parents("form")[0],
          valInfo,
          rules,
          messages;

      if (!form) {
        // Cannot do client-side validation without a form
        return;
      }

      valInfo = validationInfo(form);
      valInfo.options.rules[element.name] = rules = {};
      valInfo.options.messages[element.name] = messages = {};
      $.each(this.adapters, function () {
        var prefix = "data-val-" + this.name,
            message = $element.attr(prefix),
            paramValues = {};

        if (message !== undefined) {
          // Compare against undefined, because an empty message is legal (and falsy)
          prefix += "-";
          $.each(this.params, function () {
            paramValues[this] = $element.attr(prefix + this);
          });
          this.adapt({
            element: element,
            form: form,
            message: message,
            params: paramValues,
            rules: rules,
            messages: messages
          });
        }
      });
      $.extend(rules, {
        "__dummy__": true
      });

      if (!skipAttach) {
        valInfo.attachValidation();
      }
    },
    parse: function parse(selector) {
      /// <summary>
      /// Parses all the HTML elements in the specified selector. It looks for input elements decorated
      /// with the [data-val=true] attribute value and enables validation according to the data-val-*
      /// attribute values.
      /// </summary>
      /// <param name="selector" type="String">Any valid jQuery selector.</param>
      // $forms includes all forms in selector's DOM hierarchy (parent, children and self) that have at least one
      // element with data-val=true
      var $selector = $(selector),
          $forms = $selector.parents().addBack().filter("form").add($selector.find("form")).has("[data-val=true]");
      $selector.find("[data-val=true]").each(function () {
        $jQval.unobtrusive.parseElement(this, true);
      });
      $forms.each(function () {
        var info = validationInfo(this);

        if (info) {
          info.attachValidation();
        }
      });
    }
  };
  adapters = $jQval.unobtrusive.adapters;

  adapters.add = function (adapterName, params, fn) {
    /// <summary>Adds a new adapter to convert unobtrusive HTML into a jQuery Validate validation.</summary>
    /// <param name="adapterName" type="String">The name of the adapter to be added. This matches the name used
    /// in the data-val-nnnn HTML attribute (where nnnn is the adapter name).</param>
    /// <param name="params" type="Array" optional="true">[Optional] An array of parameter names (strings) that will
    /// be extracted from the data-val-nnnn-mmmm HTML attributes (where nnnn is the adapter name, and
    /// mmmm is the parameter name).</param>
    /// <param name="fn" type="Function">The function to call, which adapts the values from the HTML
    /// attributes into jQuery Validate rules and/or messages.</param>
    /// <returns type="jQuery.validator.unobtrusive.adapters" />
    if (!fn) {
      // Called with no params, just a function
      fn = params;
      params = [];
    }

    this.push({
      name: adapterName,
      params: params,
      adapt: fn
    });
    return this;
  };

  adapters.addBool = function (adapterName, ruleName) {
    /// <summary>Adds a new adapter to convert unobtrusive HTML into a jQuery Validate validation, where
    /// the jQuery Validate validation rule has no parameter values.</summary>
    /// <param name="adapterName" type="String">The name of the adapter to be added. This matches the name used
    /// in the data-val-nnnn HTML attribute (where nnnn is the adapter name).</param>
    /// <param name="ruleName" type="String" optional="true">[Optional] The name of the jQuery Validate rule. If not provided, the value
    /// of adapterName will be used instead.</param>
    /// <returns type="jQuery.validator.unobtrusive.adapters" />
    return this.add(adapterName, function (options) {
      setValidationValues(options, ruleName || adapterName, true);
    });
  };

  adapters.addMinMax = function (adapterName, minRuleName, maxRuleName, minMaxRuleName, minAttribute, maxAttribute) {
    /// <summary>Adds a new adapter to convert unobtrusive HTML into a jQuery Validate validation, where
    /// the jQuery Validate validation has three potential rules (one for min-only, one for max-only, and
    /// one for min-and-max). The HTML parameters are expected to be named -min and -max.</summary>
    /// <param name="adapterName" type="String">The name of the adapter to be added. This matches the name used
    /// in the data-val-nnnn HTML attribute (where nnnn is the adapter name).</param>
    /// <param name="minRuleName" type="String">The name of the jQuery Validate rule to be used when you only
    /// have a minimum value.</param>
    /// <param name="maxRuleName" type="String">The name of the jQuery Validate rule to be used when you only
    /// have a maximum value.</param>
    /// <param name="minMaxRuleName" type="String">The name of the jQuery Validate rule to be used when you
    /// have both a minimum and maximum value.</param>
    /// <param name="minAttribute" type="String" optional="true">[Optional] The name of the HTML attribute that
    /// contains the minimum value. The default is "min".</param>
    /// <param name="maxAttribute" type="String" optional="true">[Optional] The name of the HTML attribute that
    /// contains the maximum value. The default is "max".</param>
    /// <returns type="jQuery.validator.unobtrusive.adapters" />
    return this.add(adapterName, [minAttribute || "min", maxAttribute || "max"], function (options) {
      var min = options.params.min,
          max = options.params.max;

      if (min && max) {
        setValidationValues(options, minMaxRuleName, [min, max]);
      } else if (min) {
        setValidationValues(options, minRuleName, min);
      } else if (max) {
        setValidationValues(options, maxRuleName, max);
      }
    });
  };

  adapters.addSingleVal = function (adapterName, attribute, ruleName) {
    /// <summary>Adds a new adapter to convert unobtrusive HTML into a jQuery Validate validation, where
    /// the jQuery Validate validation rule has a single value.</summary>
    /// <param name="adapterName" type="String">The name of the adapter to be added. This matches the name used
    /// in the data-val-nnnn HTML attribute(where nnnn is the adapter name).</param>
    /// <param name="attribute" type="String">[Optional] The name of the HTML attribute that contains the value.
    /// The default is "val".</param>
    /// <param name="ruleName" type="String" optional="true">[Optional] The name of the jQuery Validate rule. If not provided, the value
    /// of adapterName will be used instead.</param>
    /// <returns type="jQuery.validator.unobtrusive.adapters" />
    return this.add(adapterName, [attribute || "val"], function (options) {
      setValidationValues(options, ruleName || adapterName, options.params[attribute]);
    });
  };

  $jQval.addMethod("__dummy__", function (value, element, params) {
    return true;
  });
  $jQval.addMethod("regex", function (value, element, params) {
    var match;

    if (this.optional(element)) {
      return true;
    }

    match = new RegExp(params).exec(value);
    return match && match.index === 0 && match[0].length === value.length;
  });
  $jQval.addMethod("nonalphamin", function (value, element, nonalphamin) {
    var match;

    if (nonalphamin) {
      match = value.match(/\W/g);
      match = match && match.length >= nonalphamin;
    }

    return match;
  });

  if ($jQval.methods.extension) {
    adapters.addSingleVal("accept", "mimtype");
    adapters.addSingleVal("extension", "extension");
  } else {
    // for backward compatibility, when the 'extension' validation method does not exist, such as with versions
    // of JQuery Validation plugin prior to 1.10, we should use the 'accept' method for
    // validating the extension, and ignore mime-type validations as they are not supported.
    adapters.addSingleVal("extension", "extension", "accept");
  }

  adapters.addSingleVal("regex", "pattern");
  adapters.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url");
  adapters.addMinMax("length", "minlength", "maxlength", "rangelength").addMinMax("range", "min", "max", "range");
  adapters.addMinMax("minlength", "minlength").addMinMax("maxlength", "minlength", "maxlength");
  adapters.add("equalto", ["other"], function (options) {
    var prefix = getModelPrefix(options.element.name),
        other = options.params.other,
        fullOtherName = appendModelPrefix(other, prefix),
        element = $(options.form).find(":input").filter("[name='" + escapeAttributeValue(fullOtherName) + "']")[0];
    setValidationValues(options, "equalTo", element);
  });
  adapters.add("required", function (options) {
    // jQuery Validate equates "required" with "mandatory" for checkbox elements
    if (options.element.tagName.toUpperCase() !== "INPUT" || options.element.type.toUpperCase() !== "CHECKBOX") {
      setValidationValues(options, "required", true);
    }
  });
  adapters.add("remote", ["url", "type", "additionalfields"], function (options) {
    var value = {
      url: options.params.url,
      type: options.params.type || "GET",
      data: {}
    },
        prefix = getModelPrefix(options.element.name);
    $.each(splitAndTrim(options.params.additionalfields || options.element.name), function (i, fieldName) {
      var paramName = appendModelPrefix(fieldName, prefix);

      value.data[paramName] = function () {
        var field = $(options.form).find(":input").filter("[name='" + escapeAttributeValue(paramName) + "']"); // For checkboxes and radio buttons, only pick up values from checked fields.

        if (field.is(":checkbox")) {
          return field.filter(":checked").val() || field.filter(":hidden").val() || '';
        } else if (field.is(":radio")) {
          return field.filter(":checked").val() || '';
        }

        return field.val();
      };
    });
    setValidationValues(options, "remote", value);
  });
  adapters.add("password", ["min", "nonalphamin", "regex"], function (options) {
    if (options.params.min) {
      setValidationValues(options, "minlength", options.params.min);
    }

    if (options.params.nonalphamin) {
      setValidationValues(options, "nonalphamin", options.params.nonalphamin);
    }

    if (options.params.regex) {
      setValidationValues(options, "regex", options.params.regex);
    }
  });
  adapters.add("fileextensions", ["extensions"], function (options) {
    setValidationValues(options, "extension", options.params.extensions);
  }); // Remove automatic parsing of document and rely on our custom JS
  //$(function () {
  //  $jQval.unobtrusive.parse(document);
  //});

  return $jQval.unobtrusive;
});
(function ($) {
  "use strict"; // set valid / error classes for the input to be bs4 classes

  var settings = {
    validClass: "is-valid",
    errorClass: "is-invalid"
  };
  $.validator.setDefaults(settings);
  $.validator.unobtrusive.options = settings; //IE Polyfill for forEach on NodeList

  if (window.NodeList && !NodeList.prototype.forEach) {
    NodeList.prototype.forEach = function (callback, thisArg) {
      thisArg = thisArg || window;

      for (var i = 0; i < this.length; i++) {
        callback.call(thisArg, this[i], i, this);
      }
    };
  }

  function initForm(form) {
    var $form = $(form); // parse the form with unobtrusive library 

    $.validator.unobtrusive.parse($form);
    var formId = $form.attr("id");
    $form.submit(function (event) {
      if ($form.valid()) {
        // form has been validated by jQuery validation
        event.preventDefault();
        event.stopPropagation(); // disable elements that have the data-disable-submit attribute

        var toDisable = form.querySelectorAll("[data-disable-submit='true']");
        toDisable.forEach(function (x) {
          return x.setAttribute('disabled', true);
        });
        var serializedForm = $form.serialize(); // Post to the form controller

        $.ajax({
          type: "POST",
          url: form.action,
          data: serializedForm,
          cache: false,
          dataType: "json",
          success: function success(data) {
            if (data.error) {
              // Server side validation can occur, form is re-rendered
              $form.replaceWith(data.html); // need to reparse the form

              initForm(document.getElementById(formId)); //TODO: focus on first error or validation summary
            } // if the server sends a redirect, reload the window


            if (data.redirect) {
              window.location.href = data.redirect;
            } //TODO: Handle default success case, maybe show some

          },
          error: function error(xhr) {
            // todo: handle this case gracefully, usually in the case of server error.
            var data = xhr.responseJSON;
            console.log("error", data);
          }
        });
      }
    });
  }

  $(document).ready(function () {
    // look for all ajax forms on load and initialize them
    document.querySelectorAll(".ajax-form").forEach(initForm);
  });
})(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS12YWxpZGF0aW9uLXVub2J0cnVzaXZlLmpzIiwiYWpheC1mb3Jtcy5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJqUXVlcnkiLCJ2YWxpZGF0b3IiLCJ1bm9idHJ1c2l2ZSIsIiQiLCIkalF2YWwiLCJhZGFwdGVycyIsImRhdGFfdmFsaWRhdGlvbiIsInNldFZhbGlkYXRpb25WYWx1ZXMiLCJvcHRpb25zIiwicnVsZU5hbWUiLCJ2YWx1ZSIsInJ1bGVzIiwibWVzc2FnZSIsIm1lc3NhZ2VzIiwic3BsaXRBbmRUcmltIiwicmVwbGFjZSIsInNwbGl0IiwiZXNjYXBlQXR0cmlidXRlVmFsdWUiLCJnZXRNb2RlbFByZWZpeCIsImZpZWxkTmFtZSIsInN1YnN0ciIsImxhc3RJbmRleE9mIiwiYXBwZW5kTW9kZWxQcmVmaXgiLCJwcmVmaXgiLCJpbmRleE9mIiwib25FcnJvciIsImVycm9yIiwiaW5wdXRFbGVtZW50IiwiY29udGFpbmVyIiwiZmluZCIsIm5hbWUiLCJyZXBsYWNlQXR0clZhbHVlIiwiYXR0ciIsInBhcnNlSlNPTiIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJkYXRhIiwiZW1wdHkiLCJhcHBlbmRUbyIsImhpZGUiLCJvbkVycm9ycyIsImV2ZW50IiwibGlzdCIsImxlbmd0aCIsImVycm9yTGlzdCIsImVhY2giLCJodG1sIiwib25TdWNjZXNzIiwicmVtb3ZlRGF0YSIsIm9uUmVzZXQiLCIkZm9ybSIsImtleSIsInJlc2V0Rm9ybSIsInZhbGlkYXRpb25JbmZvIiwiZm9ybSIsInJlc3VsdCIsIm9uUmVzZXRQcm94eSIsInByb3h5IiwiZGVmYXVsdE9wdGlvbnMiLCJleGVjSW5Db250ZXh0IiwiYXJncyIsImZ1bmMiLCJpc0Z1bmN0aW9uIiwiYXBwbHkiLCJlcnJvckNsYXNzIiwiZXJyb3JFbGVtZW50IiwiZXJyb3JQbGFjZW1lbnQiLCJhcmd1bWVudHMiLCJpbnZhbGlkSGFuZGxlciIsInN1Y2Nlc3MiLCJhdHRhY2hWYWxpZGF0aW9uIiwib2ZmIiwib24iLCJ2YWxpZGF0ZSIsInZhbGlkIiwicGFyc2VFbGVtZW50IiwiZWxlbWVudCIsInNraXBBdHRhY2giLCIkZWxlbWVudCIsInBhcmVudHMiLCJ2YWxJbmZvIiwicGFyYW1WYWx1ZXMiLCJ1bmRlZmluZWQiLCJwYXJhbXMiLCJhZGFwdCIsImV4dGVuZCIsInBhcnNlIiwic2VsZWN0b3IiLCIkc2VsZWN0b3IiLCIkZm9ybXMiLCJhZGRCYWNrIiwiZmlsdGVyIiwiYWRkIiwiaGFzIiwiaW5mbyIsImFkYXB0ZXJOYW1lIiwiZm4iLCJwdXNoIiwiYWRkQm9vbCIsImFkZE1pbk1heCIsIm1pblJ1bGVOYW1lIiwibWF4UnVsZU5hbWUiLCJtaW5NYXhSdWxlTmFtZSIsIm1pbkF0dHJpYnV0ZSIsIm1heEF0dHJpYnV0ZSIsIm1pbiIsIm1heCIsImFkZFNpbmdsZVZhbCIsImF0dHJpYnV0ZSIsImFkZE1ldGhvZCIsIm1hdGNoIiwib3B0aW9uYWwiLCJSZWdFeHAiLCJleGVjIiwiaW5kZXgiLCJub25hbHBoYW1pbiIsIm1ldGhvZHMiLCJleHRlbnNpb24iLCJvdGhlciIsImZ1bGxPdGhlck5hbWUiLCJ0YWdOYW1lIiwidG9VcHBlckNhc2UiLCJ0eXBlIiwidXJsIiwiYWRkaXRpb25hbGZpZWxkcyIsImkiLCJwYXJhbU5hbWUiLCJmaWVsZCIsImlzIiwidmFsIiwicmVnZXgiLCJleHRlbnNpb25zIiwic2V0dGluZ3MiLCJ2YWxpZENsYXNzIiwic2V0RGVmYXVsdHMiLCJ3aW5kb3ciLCJOb2RlTGlzdCIsInByb3RvdHlwZSIsImZvckVhY2giLCJjYWxsYmFjayIsInRoaXNBcmciLCJjYWxsIiwiaW5pdEZvcm0iLCJmb3JtSWQiLCJzdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInRvRGlzYWJsZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ4Iiwic2V0QXR0cmlidXRlIiwic2VyaWFsaXplZEZvcm0iLCJzZXJpYWxpemUiLCJhamF4IiwiYWN0aW9uIiwiY2FjaGUiLCJkYXRhVHlwZSIsInJlcGxhY2VXaXRoIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInJlZGlyZWN0IiwibG9jYXRpb24iLCJocmVmIiwieGhyIiwicmVzcG9uc2VKU09OIiwiY29uc29sZSIsImxvZyIsInJlYWR5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBQ0E7QUFFQyxXQUFVQSxPQUFWLEVBQW1CO0FBQ2xCLE1BQUksT0FBT0MsTUFBUCxLQUFrQixVQUFsQixJQUFnQ0EsTUFBTSxDQUFDQyxHQUEzQyxFQUFnRDtBQUM5QztBQUNBRCxJQUFBQSxNQUFNLENBQUMsNkJBQUQsRUFBZ0MsQ0FBQyxtQkFBRCxDQUFoQyxFQUF1REQsT0FBdkQsQ0FBTjtBQUNELEdBSEQsTUFHTyxJQUFJLFFBQU9HLE1BQVAseUNBQU9BLE1BQVAsT0FBa0IsUUFBbEIsSUFBOEJBLE1BQU0sQ0FBQ0MsT0FBekMsRUFBa0Q7QUFDdkQ7QUFDQUQsSUFBQUEsTUFBTSxDQUFDQyxPQUFQLEdBQWlCSixPQUFPLENBQUNLLE9BQU8sQ0FBQyxtQkFBRCxDQUFSLENBQXhCO0FBQ0QsR0FITSxNQUdBO0FBQ0w7QUFDQUMsSUFBQUEsTUFBTSxDQUFDQyxTQUFQLENBQWlCQyxXQUFqQixHQUErQlIsT0FBTyxDQUFDTSxNQUFELENBQXRDO0FBQ0Q7QUFDRixDQVhBLEVBV0MsVUFBVUcsQ0FBVixFQUFhO0FBQ2IsTUFBSUMsTUFBTSxHQUFHRCxDQUFDLENBQUNGLFNBQWY7QUFBQSxNQUNFSSxRQURGO0FBQUEsTUFFRUMsZUFBZSxHQUFHLHVCQUZwQjs7QUFJQSxXQUFTQyxtQkFBVCxDQUE2QkMsT0FBN0IsRUFBc0NDLFFBQXRDLEVBQWdEQyxLQUFoRCxFQUF1RDtBQUNyREYsSUFBQUEsT0FBTyxDQUFDRyxLQUFSLENBQWNGLFFBQWQsSUFBMEJDLEtBQTFCOztBQUNBLFFBQUlGLE9BQU8sQ0FBQ0ksT0FBWixFQUFx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ckI7QUFDRDtBQTVCSSxTQUFQO0FBOEJEO0FBQ0YsS0EzQ0g7QUE2Q0Q7O0FBRURqQyxFQUFBQSxDQUFDLENBQUMySixRQUFELENBQUQsQ0FBWVMsS0FBWixDQUFrQixZQUFZO0FBQzVCO0FBQ0FULElBQUFBLFFBQVEsQ0FBQ1YsZ0JBQVQsQ0FBMEIsWUFBMUIsRUFBd0NWLE9BQXhDLENBQWdESSxRQUFoRDtBQUNELEdBSEQ7QUFJRCxDQWhGRCxFQWdGRzlJLE1BaEZIIiwiZmlsZSI6ImFqYXgtZm9ybXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBVbm9idHJ1c2l2ZSB2YWxpZGF0aW9uIHN1cHBvcnQgbGlicmFyeSBmb3IgalF1ZXJ5IGFuZCBqUXVlcnkgVmFsaWRhdGVcclxuLy8gQ29weXJpZ2h0IChjKSAuTkVUIEZvdW5kYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxyXG4vLyBAdmVyc2lvbiA8cGxhY2Vob2xkZXI+XHJcblxyXG4vKmpzbGludCB3aGl0ZTogdHJ1ZSwgYnJvd3NlcjogdHJ1ZSwgb25ldmFyOiB0cnVlLCB1bmRlZjogdHJ1ZSwgbm9tZW46IHRydWUsIGVxZXFlcTogdHJ1ZSwgcGx1c3BsdXM6IHRydWUsIGJpdHdpc2U6IHRydWUsIHJlZ2V4cDogdHJ1ZSwgbmV3Y2FwOiB0cnVlLCBpbW1lZDogdHJ1ZSwgc3RyaWN0OiBmYWxzZSAqL1xyXG4vKmdsb2JhbCBkb2N1bWVudDogZmFsc2UsIGpRdWVyeTogZmFsc2UgKi9cclxuXHJcbihmdW5jdGlvbiAoZmFjdG9yeSkge1xyXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cclxuICAgIGRlZmluZShcImpxdWVyeS52YWxpZGF0ZS51bm9idHJ1c2l2ZVwiLCBbJ2pxdWVyeS12YWxpZGF0aW9uJ10sIGZhY3RvcnkpO1xyXG4gIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcclxuICAgIC8vIENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyAgICAgXHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5LXZhbGlkYXRpb24nKSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIEJyb3dzZXIgZ2xvYmFsXHJcbiAgICBqUXVlcnkudmFsaWRhdG9yLnVub2J0cnVzaXZlID0gZmFjdG9yeShqUXVlcnkpO1xyXG4gIH1cclxufShmdW5jdGlvbiAoJCkge1xyXG4gIHZhciAkalF2YWwgPSAkLnZhbGlkYXRvcixcclxuICAgIGFkYXB0ZXJzLFxyXG4gICAgZGF0YV92YWxpZGF0aW9uID0gXCJ1bm9idHJ1c2l2ZVZhbGlkYXRpb25cIjtcclxuXHJcbiAgZnVuY3Rpb24gc2V0VmFsaWRhdGlvblZhbHVlcyhvcHRpb25zLCBydWxlTmFtZSwgdmFsdWUpIHtcclxuICAgIG9wdGlvbnMucnVsZXNbcnVsZU5hbWVdID0gdmFsdWU7XHJcbiAgICBpZiAob3B0aW9ucy5tZXNzYWdlKSB7XHJcbiAgICAgIG9wdGlvbnMubWVzc2FnZXNbcnVsZU5hbWVdID0gb3B0aW9ucy5tZXNzYWdlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc3BsaXRBbmRUcmltKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgXCJcIikuc3BsaXQoL1xccyosXFxzKi9nKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGVzY2FwZUF0dHJpYnV0ZVZhbHVlKHZhbHVlKSB7XHJcbiAgICAvLyBBcyBtZW50aW9uZWQgb24gaHR0cDovL2FwaS5qcXVlcnkuY29tL2NhdGVnb3J5L3NlbGVjdG9ycy9cclxuICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC8oWyFcIiMkJSYnKCkqKywuLzo7PD0+P0BcXFtcXFxcXFxdXmB7fH1+XSkvZywgXCJcXFxcJDFcIik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRNb2RlbFByZWZpeChmaWVsZE5hbWUpIHtcclxuICAgIHJldHVybiBmaWVsZE5hbWUuc3Vic3RyKDAsIGZpZWxkTmFtZS5sYXN0SW5kZXhPZihcIi5cIikgKyAxKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFwcGVuZE1vZGVsUHJlZml4KHZhbHVlLCBwcmVmaXgpIHtcclxuICAgIGlmICh2YWx1ZS5pbmRleE9mKFwiKi5cIikgPT09IDApIHtcclxuICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKFwiKi5cIiwgcHJlZml4KTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uRXJyb3IoZXJyb3IsIGlucHV0RWxlbWVudCkgeyAgLy8gJ3RoaXMnIGlzIHRoZSBmb3JtIGVsZW1lbnRcclxuICAgIHZhciBjb250YWluZXIgPSAkKHRoaXMpLmZpbmQoXCJbZGF0YS12YWxtc2ctZm9yPSdcIiArIGVzY2FwZUF0dHJpYnV0ZVZhbHVlKGlucHV0RWxlbWVudFswXS5uYW1lKSArIFwiJ11cIiksXHJcbiAgICAgIHJlcGxhY2VBdHRyVmFsdWUgPSBjb250YWluZXIuYXR0cihcImRhdGEtdmFsbXNnLXJlcGxhY2VcIiksXHJcbiAgICAgIHJlcGxhY2UgPSByZXBsYWNlQXR0clZhbHVlID8gJC5wYXJzZUpTT04ocmVwbGFjZUF0dHJWYWx1ZSkgIT09IGZhbHNlIDogbnVsbDtcclxuXHJcbiAgICBjb250YWluZXIucmVtb3ZlQ2xhc3MoXCJmaWVsZC12YWxpZGF0aW9uLXZhbGlkXCIpLmFkZENsYXNzKFwiZmllbGQtdmFsaWRhdGlvbi1lcnJvclwiKTtcclxuICAgIGVycm9yLmRhdGEoXCJ1bm9idHJ1c2l2ZUNvbnRhaW5lclwiLCBjb250YWluZXIpO1xyXG5cclxuICAgIGlmIChyZXBsYWNlKSB7XHJcbiAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xyXG4gICAgICBlcnJvci5yZW1vdmVDbGFzcyhcImlucHV0LXZhbGlkYXRpb24tZXJyb3JcIikuYXBwZW5kVG8oY29udGFpbmVyKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBlcnJvci5oaWRlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvbkVycm9ycyhldmVudCwgdmFsaWRhdG9yKSB7ICAvLyAndGhpcycgaXMgdGhlIGZvcm0gZWxlbWVudFxyXG4gICAgdmFyIGNvbnRhaW5lciA9ICQodGhpcykuZmluZChcIltkYXRhLXZhbG1zZy1zdW1tYXJ5PXRydWVdXCIpLFxyXG4gICAgICBsaXN0ID0gY29udGFpbmVyLmZpbmQoXCJ1bFwiKTtcclxuXHJcbiAgICBpZiAobGlzdCAmJiBsaXN0Lmxlbmd0aCAmJiB2YWxpZGF0b3IuZXJyb3JMaXN0Lmxlbmd0aCkge1xyXG4gICAgICBsaXN0LmVtcHR5KCk7XHJcbiAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhcInZhbGlkYXRpb24tc3VtbWFyeS1lcnJvcnNcIikucmVtb3ZlQ2xhc3MoXCJ2YWxpZGF0aW9uLXN1bW1hcnktdmFsaWRcIik7XHJcblxyXG4gICAgICAkLmVhY2godmFsaWRhdG9yLmVycm9yTGlzdCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoXCI8bGkgLz5cIikuaHRtbCh0aGlzLm1lc3NhZ2UpLmFwcGVuZFRvKGxpc3QpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uU3VjY2VzcyhlcnJvcikgeyAgLy8gJ3RoaXMnIGlzIHRoZSBmb3JtIGVsZW1lbnRcclxuICAgIHZhciBjb250YWluZXIgPSBlcnJvci5kYXRhKFwidW5vYnRydXNpdmVDb250YWluZXJcIik7XHJcblxyXG4gICAgaWYgKGNvbnRhaW5lcikge1xyXG4gICAgICB2YXIgcmVwbGFjZUF0dHJWYWx1ZSA9IGNvbnRhaW5lci5hdHRyKFwiZGF0YS12YWxtc2ctcmVwbGFjZVwiKSxcclxuICAgICAgICByZXBsYWNlID0gcmVwbGFjZUF0dHJWYWx1ZSA/ICQucGFyc2VKU09OKHJlcGxhY2VBdHRyVmFsdWUpIDogbnVsbDtcclxuXHJcbiAgICAgIGNvbnRhaW5lci5hZGRDbGFzcyhcImZpZWxkLXZhbGlkYXRpb24tdmFsaWRcIikucmVtb3ZlQ2xhc3MoXCJmaWVsZC12YWxpZGF0aW9uLWVycm9yXCIpO1xyXG4gICAgICBlcnJvci5yZW1vdmVEYXRhKFwidW5vYnRydXNpdmVDb250YWluZXJcIik7XHJcblxyXG4gICAgICBpZiAocmVwbGFjZSkge1xyXG4gICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvblJlc2V0KGV2ZW50KSB7ICAvLyAndGhpcycgaXMgdGhlIGZvcm0gZWxlbWVudFxyXG4gICAgdmFyICRmb3JtID0gJCh0aGlzKSxcclxuICAgICAga2V5ID0gJ19fanF1ZXJ5X3Vub2J0cnVzaXZlX3ZhbGlkYXRpb25fZm9ybV9yZXNldCc7XHJcbiAgICBpZiAoJGZvcm0uZGF0YShrZXkpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIFNldCBhIGZsYWcgdGhhdCBpbmRpY2F0ZXMgd2UncmUgY3VycmVudGx5IHJlc2V0dGluZyB0aGUgZm9ybS5cclxuICAgICRmb3JtLmRhdGEoa2V5LCB0cnVlKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICRmb3JtLmRhdGEoXCJ2YWxpZGF0b3JcIikucmVzZXRGb3JtKCk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICAkZm9ybS5yZW1vdmVEYXRhKGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgJGZvcm0uZmluZChcIi52YWxpZGF0aW9uLXN1bW1hcnktZXJyb3JzXCIpXHJcbiAgICAgIC5hZGRDbGFzcyhcInZhbGlkYXRpb24tc3VtbWFyeS12YWxpZFwiKVxyXG4gICAgICAucmVtb3ZlQ2xhc3MoXCJ2YWxpZGF0aW9uLXN1bW1hcnktZXJyb3JzXCIpO1xyXG4gICAgJGZvcm0uZmluZChcIi5maWVsZC12YWxpZGF0aW9uLWVycm9yXCIpXHJcbiAgICAgIC5hZGRDbGFzcyhcImZpZWxkLXZhbGlkYXRpb24tdmFsaWRcIilcclxuICAgICAgLnJlbW92ZUNsYXNzKFwiZmllbGQtdmFsaWRhdGlvbi1lcnJvclwiKVxyXG4gICAgICAucmVtb3ZlRGF0YShcInVub2J0cnVzaXZlQ29udGFpbmVyXCIpXHJcbiAgICAgIC5maW5kKFwiPipcIikgIC8vIElmIHdlIHdlcmUgdXNpbmcgdmFsbXNnLXJlcGxhY2UsIGdldCB0aGUgdW5kZXJseWluZyBlcnJvclxyXG4gICAgICAucmVtb3ZlRGF0YShcInVub2J0cnVzaXZlQ29udGFpbmVyXCIpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdmFsaWRhdGlvbkluZm8oZm9ybSkge1xyXG4gICAgdmFyICRmb3JtID0gJChmb3JtKSxcclxuICAgICAgcmVzdWx0ID0gJGZvcm0uZGF0YShkYXRhX3ZhbGlkYXRpb24pLFxyXG4gICAgICBvblJlc2V0UHJveHkgPSAkLnByb3h5KG9uUmVzZXQsIGZvcm0pLFxyXG4gICAgICBkZWZhdWx0T3B0aW9ucyA9ICRqUXZhbC51bm9idHJ1c2l2ZS5vcHRpb25zIHx8IHt9LFxyXG4gICAgICBleGVjSW5Db250ZXh0ID0gZnVuY3Rpb24gKG5hbWUsIGFyZ3MpIHtcclxuICAgICAgICB2YXIgZnVuYyA9IGRlZmF1bHRPcHRpb25zW25hbWVdO1xyXG4gICAgICAgIGZ1bmMgJiYgJC5pc0Z1bmN0aW9uKGZ1bmMpICYmIGZ1bmMuYXBwbHkoZm9ybSwgYXJncyk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgcmVzdWx0ID0ge1xyXG4gICAgICAgIG9wdGlvbnM6IHsgIC8vIG9wdGlvbnMgc3RydWN0dXJlIHBhc3NlZCB0byBqUXVlcnkgVmFsaWRhdGUncyB2YWxpZGF0ZSgpIG1ldGhvZFxyXG4gICAgICAgICAgZXJyb3JDbGFzczogZGVmYXVsdE9wdGlvbnMuZXJyb3JDbGFzcyB8fCBcImlucHV0LXZhbGlkYXRpb24tZXJyb3JcIixcclxuICAgICAgICAgIGVycm9yRWxlbWVudDogZGVmYXVsdE9wdGlvbnMuZXJyb3JFbGVtZW50IHx8IFwic3BhblwiLFxyXG4gICAgICAgICAgZXJyb3JQbGFjZW1lbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgb25FcnJvci5hcHBseShmb3JtLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICBleGVjSW5Db250ZXh0KFwiZXJyb3JQbGFjZW1lbnRcIiwgYXJndW1lbnRzKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBpbnZhbGlkSGFuZGxlcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBvbkVycm9ycy5hcHBseShmb3JtLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICBleGVjSW5Db250ZXh0KFwiaW52YWxpZEhhbmRsZXJcIiwgYXJndW1lbnRzKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBtZXNzYWdlczoge30sXHJcbiAgICAgICAgICBydWxlczoge30sXHJcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG9uU3VjY2Vzcy5hcHBseShmb3JtLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICBleGVjSW5Db250ZXh0KFwic3VjY2Vzc1wiLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYXR0YWNoVmFsaWRhdGlvbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgJGZvcm1cclxuICAgICAgICAgICAgLm9mZihcInJlc2V0LlwiICsgZGF0YV92YWxpZGF0aW9uLCBvblJlc2V0UHJveHkpXHJcbiAgICAgICAgICAgIC5vbihcInJlc2V0LlwiICsgZGF0YV92YWxpZGF0aW9uLCBvblJlc2V0UHJveHkpXHJcbiAgICAgICAgICAgIC52YWxpZGF0ZSh0aGlzLm9wdGlvbnMpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmFsaWRhdGU6IGZ1bmN0aW9uICgpIHsgIC8vIGEgdmFsaWRhdGlvbiBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBieSB1bm9idHJ1c2l2ZSBBamF4XHJcbiAgICAgICAgICAkZm9ybS52YWxpZGF0ZSgpO1xyXG4gICAgICAgICAgcmV0dXJuICRmb3JtLnZhbGlkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICAkZm9ybS5kYXRhKGRhdGFfdmFsaWRhdGlvbiwgcmVzdWx0KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgJGpRdmFsLnVub2J0cnVzaXZlID0ge1xyXG4gICAgYWRhcHRlcnM6IFtdLFxyXG5cclxuICAgIHBhcnNlRWxlbWVudDogZnVuY3Rpb24gKGVsZW1lbnQsIHNraXBBdHRhY2gpIHtcclxuICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAvLy8gUGFyc2VzIGEgc2luZ2xlIEhUTUwgZWxlbWVudCBmb3IgdW5vYnRydXNpdmUgdmFsaWRhdGlvbiBhdHRyaWJ1dGVzLlxyXG4gICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAvLy8gPHBhcmFtIG5hbWU9XCJlbGVtZW50XCIgZG9tRWxlbWVudD1cInRydWVcIj5UaGUgSFRNTCBlbGVtZW50IHRvIGJlIHBhcnNlZC48L3BhcmFtPlxyXG4gICAgICAvLy8gPHBhcmFtIG5hbWU9XCJza2lwQXR0YWNoXCIgdHlwZT1cIkJvb2xlYW5cIj5bT3B0aW9uYWxdIHRydWUgdG8gc2tpcCBhdHRhY2hpbmcgdGhlXHJcbiAgICAgIC8vLyB2YWxpZGF0aW9uIHRvIHRoZSBmb3JtLiBJZiBwYXJzaW5nIGp1c3QgdGhpcyBzaW5nbGUgZWxlbWVudCwgeW91IHNob3VsZCBzcGVjaWZ5IHRydWUuXHJcbiAgICAgIC8vLyBJZiBwYXJzaW5nIHNldmVyYWwgZWxlbWVudHMsIHlvdSBzaG91bGQgc3BlY2lmeSBmYWxzZSwgYW5kIG1hbnVhbGx5IGF0dGFjaCB0aGUgdmFsaWRhdGlvblxyXG4gICAgICAvLy8gdG8gdGhlIGZvcm0gd2hlbiB5b3UgYXJlIGZpbmlzaGVkLiBUaGUgZGVmYXVsdCBpcyBmYWxzZS48L3BhcmFtPlxyXG4gICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpLFxyXG4gICAgICAgIGZvcm0gPSAkZWxlbWVudC5wYXJlbnRzKFwiZm9ybVwiKVswXSxcclxuICAgICAgICB2YWxJbmZvLCBydWxlcywgbWVzc2FnZXM7XHJcblxyXG4gICAgICBpZiAoIWZvcm0pIHsgIC8vIENhbm5vdCBkbyBjbGllbnQtc2lkZSB2YWxpZGF0aW9uIHdpdGhvdXQgYSBmb3JtXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YWxJbmZvID0gdmFsaWRhdGlvbkluZm8oZm9ybSk7XHJcbiAgICAgIHZhbEluZm8ub3B0aW9ucy5ydWxlc1tlbGVtZW50Lm5hbWVdID0gcnVsZXMgPSB7fTtcclxuICAgICAgdmFsSW5mby5vcHRpb25zLm1lc3NhZ2VzW2VsZW1lbnQubmFtZV0gPSBtZXNzYWdlcyA9IHt9O1xyXG5cclxuICAgICAgJC5lYWNoKHRoaXMuYWRhcHRlcnMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcHJlZml4ID0gXCJkYXRhLXZhbC1cIiArIHRoaXMubmFtZSxcclxuICAgICAgICAgIG1lc3NhZ2UgPSAkZWxlbWVudC5hdHRyKHByZWZpeCksXHJcbiAgICAgICAgICBwYXJhbVZhbHVlcyA9IHt9O1xyXG5cclxuICAgICAgICBpZiAobWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7ICAvLyBDb21wYXJlIGFnYWluc3QgdW5kZWZpbmVkLCBiZWNhdXNlIGFuIGVtcHR5IG1lc3NhZ2UgaXMgbGVnYWwgKGFuZCBmYWxzeSlcclxuICAgICAgICAgIHByZWZpeCArPSBcIi1cIjtcclxuXHJcbiAgICAgICAgICAkLmVhY2godGhpcy5wYXJhbXMsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcGFyYW1WYWx1ZXNbdGhpc10gPSAkZWxlbWVudC5hdHRyKHByZWZpeCArIHRoaXMpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgdGhpcy5hZGFwdCh7XHJcbiAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXHJcbiAgICAgICAgICAgIGZvcm06IGZvcm0sXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHBhcmFtczogcGFyYW1WYWx1ZXMsXHJcbiAgICAgICAgICAgIHJ1bGVzOiBydWxlcyxcclxuICAgICAgICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgJC5leHRlbmQocnVsZXMsIHsgXCJfX2R1bW15X19cIjogdHJ1ZSB9KTtcclxuXHJcbiAgICAgIGlmICghc2tpcEF0dGFjaCkge1xyXG4gICAgICAgIHZhbEluZm8uYXR0YWNoVmFsaWRhdGlvbigpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHBhcnNlOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcclxuICAgICAgLy8vIDxzdW1tYXJ5PlxyXG4gICAgICAvLy8gUGFyc2VzIGFsbCB0aGUgSFRNTCBlbGVtZW50cyBpbiB0aGUgc3BlY2lmaWVkIHNlbGVjdG9yLiBJdCBsb29rcyBmb3IgaW5wdXQgZWxlbWVudHMgZGVjb3JhdGVkXHJcbiAgICAgIC8vLyB3aXRoIHRoZSBbZGF0YS12YWw9dHJ1ZV0gYXR0cmlidXRlIHZhbHVlIGFuZCBlbmFibGVzIHZhbGlkYXRpb24gYWNjb3JkaW5nIHRvIHRoZSBkYXRhLXZhbC0qXHJcbiAgICAgIC8vLyBhdHRyaWJ1dGUgdmFsdWVzLlxyXG4gICAgICAvLy8gPC9zdW1tYXJ5PlxyXG4gICAgICAvLy8gPHBhcmFtIG5hbWU9XCJzZWxlY3RvclwiIHR5cGU9XCJTdHJpbmdcIj5BbnkgdmFsaWQgalF1ZXJ5IHNlbGVjdG9yLjwvcGFyYW0+XHJcblxyXG4gICAgICAvLyAkZm9ybXMgaW5jbHVkZXMgYWxsIGZvcm1zIGluIHNlbGVjdG9yJ3MgRE9NIGhpZXJhcmNoeSAocGFyZW50LCBjaGlsZHJlbiBhbmQgc2VsZikgdGhhdCBoYXZlIGF0IGxlYXN0IG9uZVxyXG4gICAgICAvLyBlbGVtZW50IHdpdGggZGF0YS12YWw9dHJ1ZVxyXG4gICAgICB2YXIgJHNlbGVjdG9yID0gJChzZWxlY3RvciksXHJcbiAgICAgICAgJGZvcm1zID0gJHNlbGVjdG9yLnBhcmVudHMoKVxyXG4gICAgICAgICAgLmFkZEJhY2soKVxyXG4gICAgICAgICAgLmZpbHRlcihcImZvcm1cIilcclxuICAgICAgICAgIC5hZGQoJHNlbGVjdG9yLmZpbmQoXCJmb3JtXCIpKVxyXG4gICAgICAgICAgLmhhcyhcIltkYXRhLXZhbD10cnVlXVwiKTtcclxuXHJcbiAgICAgICRzZWxlY3Rvci5maW5kKFwiW2RhdGEtdmFsPXRydWVdXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRqUXZhbC51bm9idHJ1c2l2ZS5wYXJzZUVsZW1lbnQodGhpcywgdHJ1ZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgJGZvcm1zLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbmZvID0gdmFsaWRhdGlvbkluZm8odGhpcyk7XHJcbiAgICAgICAgaWYgKGluZm8pIHtcclxuICAgICAgICAgIGluZm8uYXR0YWNoVmFsaWRhdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgYWRhcHRlcnMgPSAkalF2YWwudW5vYnRydXNpdmUuYWRhcHRlcnM7XHJcblxyXG4gIGFkYXB0ZXJzLmFkZCA9IGZ1bmN0aW9uIChhZGFwdGVyTmFtZSwgcGFyYW1zLCBmbikge1xyXG4gICAgLy8vIDxzdW1tYXJ5PkFkZHMgYSBuZXcgYWRhcHRlciB0byBjb252ZXJ0IHVub2J0cnVzaXZlIEhUTUwgaW50byBhIGpRdWVyeSBWYWxpZGF0ZSB2YWxpZGF0aW9uLjwvc3VtbWFyeT5cclxuICAgIC8vLyA8cGFyYW0gbmFtZT1cImFkYXB0ZXJOYW1lXCIgdHlwZT1cIlN0cmluZ1wiPlRoZSBuYW1lIG9mIHRoZSBhZGFwdGVyIHRvIGJlIGFkZGVkLiBUaGlzIG1hdGNoZXMgdGhlIG5hbWUgdXNlZFxyXG4gICAgLy8vIGluIHRoZSBkYXRhLXZhbC1ubm5uIEhUTUwgYXR0cmlidXRlICh3aGVyZSBubm5uIGlzIHRoZSBhZGFwdGVyIG5hbWUpLjwvcGFyYW0+XHJcbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJwYXJhbXNcIiB0eXBlPVwiQXJyYXlcIiBvcHRpb25hbD1cInRydWVcIj5bT3B0aW9uYWxdIEFuIGFycmF5IG9mIHBhcmFtZXRlciBuYW1lcyAoc3RyaW5ncykgdGhhdCB3aWxsXHJcbiAgICAvLy8gYmUgZXh0cmFjdGVkIGZyb20gdGhlIGRhdGEtdmFsLW5ubm4tbW1tbSBIVE1MIGF0dHJpYnV0ZXMgKHdoZXJlIG5ubm4gaXMgdGhlIGFkYXB0ZXIgbmFtZSwgYW5kXHJcbiAgICAvLy8gbW1tbSBpcyB0aGUgcGFyYW1ldGVyIG5hbWUpLjwvcGFyYW0+XHJcbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJmblwiIHR5cGU9XCJGdW5jdGlvblwiPlRoZSBmdW5jdGlvbiB0byBjYWxsLCB3aGljaCBhZGFwdHMgdGhlIHZhbHVlcyBmcm9tIHRoZSBIVE1MXHJcbiAgICAvLy8gYXR0cmlidXRlcyBpbnRvIGpRdWVyeSBWYWxpZGF0ZSBydWxlcyBhbmQvb3IgbWVzc2FnZXMuPC9wYXJhbT5cclxuICAgIC8vLyA8cmV0dXJucyB0eXBlPVwialF1ZXJ5LnZhbGlkYXRvci51bm9idHJ1c2l2ZS5hZGFwdGVyc1wiIC8+XHJcbiAgICBpZiAoIWZuKSB7ICAvLyBDYWxsZWQgd2l0aCBubyBwYXJhbXMsIGp1c3QgYSBmdW5jdGlvblxyXG4gICAgICBmbiA9IHBhcmFtcztcclxuICAgICAgcGFyYW1zID0gW107XHJcbiAgICB9XHJcbiAgICB0aGlzLnB1c2goeyBuYW1lOiBhZGFwdGVyTmFtZSwgcGFyYW1zOiBwYXJhbXMsIGFkYXB0OiBmbiB9KTtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH07XHJcblxyXG4gIGFkYXB0ZXJzLmFkZEJvb2wgPSBmdW5jdGlvbiAoYWRhcHRlck5hbWUsIHJ1bGVOYW1lKSB7XHJcbiAgICAvLy8gPHN1bW1hcnk+QWRkcyBhIG5ldyBhZGFwdGVyIHRvIGNvbnZlcnQgdW5vYnRydXNpdmUgSFRNTCBpbnRvIGEgalF1ZXJ5IFZhbGlkYXRlIHZhbGlkYXRpb24sIHdoZXJlXHJcbiAgICAvLy8gdGhlIGpRdWVyeSBWYWxpZGF0ZSB2YWxpZGF0aW9uIHJ1bGUgaGFzIG5vIHBhcmFtZXRlciB2YWx1ZXMuPC9zdW1tYXJ5PlxyXG4gICAgLy8vIDxwYXJhbSBuYW1lPVwiYWRhcHRlck5hbWVcIiB0eXBlPVwiU3RyaW5nXCI+VGhlIG5hbWUgb2YgdGhlIGFkYXB0ZXIgdG8gYmUgYWRkZWQuIFRoaXMgbWF0Y2hlcyB0aGUgbmFtZSB1c2VkXHJcbiAgICAvLy8gaW4gdGhlIGRhdGEtdmFsLW5ubm4gSFRNTCBhdHRyaWJ1dGUgKHdoZXJlIG5ubm4gaXMgdGhlIGFkYXB0ZXIgbmFtZSkuPC9wYXJhbT5cclxuICAgIC8vLyA8cGFyYW0gbmFtZT1cInJ1bGVOYW1lXCIgdHlwZT1cIlN0cmluZ1wiIG9wdGlvbmFsPVwidHJ1ZVwiPltPcHRpb25hbF0gVGhlIG5hbWUgb2YgdGhlIGpRdWVyeSBWYWxpZGF0ZSBydWxlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB2YWx1ZVxyXG4gICAgLy8vIG9mIGFkYXB0ZXJOYW1lIHdpbGwgYmUgdXNlZCBpbnN0ZWFkLjwvcGFyYW0+XHJcbiAgICAvLy8gPHJldHVybnMgdHlwZT1cImpRdWVyeS52YWxpZGF0b3IudW5vYnRydXNpdmUuYWRhcHRlcnNcIiAvPlxyXG4gICAgcmV0dXJuIHRoaXMuYWRkKGFkYXB0ZXJOYW1lLCBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsIHJ1bGVOYW1lIHx8IGFkYXB0ZXJOYW1lLCB0cnVlKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGFkYXB0ZXJzLmFkZE1pbk1heCA9IGZ1bmN0aW9uIChhZGFwdGVyTmFtZSwgbWluUnVsZU5hbWUsIG1heFJ1bGVOYW1lLCBtaW5NYXhSdWxlTmFtZSwgbWluQXR0cmlidXRlLCBtYXhBdHRyaWJ1dGUpIHtcclxuICAgIC8vLyA8c3VtbWFyeT5BZGRzIGEgbmV3IGFkYXB0ZXIgdG8gY29udmVydCB1bm9idHJ1c2l2ZSBIVE1MIGludG8gYSBqUXVlcnkgVmFsaWRhdGUgdmFsaWRhdGlvbiwgd2hlcmVcclxuICAgIC8vLyB0aGUgalF1ZXJ5IFZhbGlkYXRlIHZhbGlkYXRpb24gaGFzIHRocmVlIHBvdGVudGlhbCBydWxlcyAob25lIGZvciBtaW4tb25seSwgb25lIGZvciBtYXgtb25seSwgYW5kXHJcbiAgICAvLy8gb25lIGZvciBtaW4tYW5kLW1heCkuIFRoZSBIVE1MIHBhcmFtZXRlcnMgYXJlIGV4cGVjdGVkIHRvIGJlIG5hbWVkIC1taW4gYW5kIC1tYXguPC9zdW1tYXJ5PlxyXG4gICAgLy8vIDxwYXJhbSBuYW1lPVwiYWRhcHRlck5hbWVcIiB0eXBlPVwiU3RyaW5nXCI+VGhlIG5hbWUgb2YgdGhlIGFkYXB0ZXIgdG8gYmUgYWRkZWQuIFRoaXMgbWF0Y2hlcyB0aGUgbmFtZSB1c2VkXHJcbiAgICAvLy8gaW4gdGhlIGRhdGEtdmFsLW5ubm4gSFRNTCBhdHRyaWJ1dGUgKHdoZXJlIG5ubm4gaXMgdGhlIGFkYXB0ZXIgbmFtZSkuPC9wYXJhbT5cclxuICAgIC8vLyA8cGFyYW0gbmFtZT1cIm1pblJ1bGVOYW1lXCIgdHlwZT1cIlN0cmluZ1wiPlRoZSBuYW1lIG9mIHRoZSBqUXVlcnkgVmFsaWRhdGUgcnVsZSB0byBiZSB1c2VkIHdoZW4geW91IG9ubHlcclxuICAgIC8vLyBoYXZlIGEgbWluaW11bSB2YWx1ZS48L3BhcmFtPlxyXG4gICAgLy8vIDxwYXJhbSBuYW1lPVwibWF4UnVsZU5hbWVcIiB0eXBlPVwiU3RyaW5nXCI+VGhlIG5hbWUgb2YgdGhlIGpRdWVyeSBWYWxpZGF0ZSBydWxlIHRvIGJlIHVzZWQgd2hlbiB5b3Ugb25seVxyXG4gICAgLy8vIGhhdmUgYSBtYXhpbXVtIHZhbHVlLjwvcGFyYW0+XHJcbiAgICAvLy8gPHBhcmFtIG5hbWU9XCJtaW5NYXhSdWxlTmFtZVwiIHR5cGU9XCJTdHJpbmdcIj5UaGUgbmFtZSBvZiB0aGUgalF1ZXJ5IFZhbGlkYXRlIHJ1bGUgdG8gYmUgdXNlZCB3aGVuIHlvdVxyXG4gICAgLy8vIGhhdmUgYm90aCBhIG1pbmltdW0gYW5kIG1heGltdW0gdmFsdWUuPC9wYXJhbT5cclxuICAgIC8vLyA8cGFyYW0gbmFtZT1cIm1pbkF0dHJpYnV0ZVwiIHR5cGU9XCJTdHJpbmdcIiBvcHRpb25hbD1cInRydWVcIj5bT3B0aW9uYWxdIFRoZSBuYW1lIG9mIHRoZSBIVE1MIGF0dHJpYnV0ZSB0aGF0XHJcbiAgICAvLy8gY29udGFpbnMgdGhlIG1pbmltdW0gdmFsdWUuIFRoZSBkZWZhdWx0IGlzIFwibWluXCIuPC9wYXJhbT5cclxuICAgIC8vLyA8cGFyYW0gbmFtZT1cIm1heEF0dHJpYnV0ZVwiIHR5cGU9XCJTdHJpbmdcIiBvcHRpb25hbD1cInRydWVcIj5bT3B0aW9uYWxdIFRoZSBuYW1lIG9mIHRoZSBIVE1MIGF0dHJpYnV0ZSB0aGF0XHJcbiAgICAvLy8gY29udGFpbnMgdGhlIG1heGltdW0gdmFsdWUuIFRoZSBkZWZhdWx0IGlzIFwibWF4XCIuPC9wYXJhbT5cclxuICAgIC8vLyA8cmV0dXJucyB0eXBlPVwialF1ZXJ5LnZhbGlkYXRvci51bm9idHJ1c2l2ZS5hZGFwdGVyc1wiIC8+XHJcbiAgICByZXR1cm4gdGhpcy5hZGQoYWRhcHRlck5hbWUsIFttaW5BdHRyaWJ1dGUgfHwgXCJtaW5cIiwgbWF4QXR0cmlidXRlIHx8IFwibWF4XCJdLCBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICB2YXIgbWluID0gb3B0aW9ucy5wYXJhbXMubWluLFxyXG4gICAgICAgIG1heCA9IG9wdGlvbnMucGFyYW1zLm1heDtcclxuXHJcbiAgICAgIGlmIChtaW4gJiYgbWF4KSB7XHJcbiAgICAgICAgc2V0VmFsaWRhdGlvblZhbHVlcyhvcHRpb25zLCBtaW5NYXhSdWxlTmFtZSwgW21pbiwgbWF4XSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAobWluKSB7XHJcbiAgICAgICAgc2V0VmFsaWRhdGlvblZhbHVlcyhvcHRpb25zLCBtaW5SdWxlTmFtZSwgbWluKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChtYXgpIHtcclxuICAgICAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsIG1heFJ1bGVOYW1lLCBtYXgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBhZGFwdGVycy5hZGRTaW5nbGVWYWwgPSBmdW5jdGlvbiAoYWRhcHRlck5hbWUsIGF0dHJpYnV0ZSwgcnVsZU5hbWUpIHtcclxuICAgIC8vLyA8c3VtbWFyeT5BZGRzIGEgbmV3IGFkYXB0ZXIgdG8gY29udmVydCB1bm9idHJ1c2l2ZSBIVE1MIGludG8gYSBqUXVlcnkgVmFsaWRhdGUgdmFsaWRhdGlvbiwgd2hlcmVcclxuICAgIC8vLyB0aGUgalF1ZXJ5IFZhbGlkYXRlIHZhbGlkYXRpb24gcnVsZSBoYXMgYSBzaW5nbGUgdmFsdWUuPC9zdW1tYXJ5PlxyXG4gICAgLy8vIDxwYXJhbSBuYW1lPVwiYWRhcHRlck5hbWVcIiB0eXBlPVwiU3RyaW5nXCI+VGhlIG5hbWUgb2YgdGhlIGFkYXB0ZXIgdG8gYmUgYWRkZWQuIFRoaXMgbWF0Y2hlcyB0aGUgbmFtZSB1c2VkXHJcbiAgICAvLy8gaW4gdGhlIGRhdGEtdmFsLW5ubm4gSFRNTCBhdHRyaWJ1dGUod2hlcmUgbm5ubiBpcyB0aGUgYWRhcHRlciBuYW1lKS48L3BhcmFtPlxyXG4gICAgLy8vIDxwYXJhbSBuYW1lPVwiYXR0cmlidXRlXCIgdHlwZT1cIlN0cmluZ1wiPltPcHRpb25hbF0gVGhlIG5hbWUgb2YgdGhlIEhUTUwgYXR0cmlidXRlIHRoYXQgY29udGFpbnMgdGhlIHZhbHVlLlxyXG4gICAgLy8vIFRoZSBkZWZhdWx0IGlzIFwidmFsXCIuPC9wYXJhbT5cclxuICAgIC8vLyA8cGFyYW0gbmFtZT1cInJ1bGVOYW1lXCIgdHlwZT1cIlN0cmluZ1wiIG9wdGlvbmFsPVwidHJ1ZVwiPltPcHRpb25hbF0gVGhlIG5hbWUgb2YgdGhlIGpRdWVyeSBWYWxpZGF0ZSBydWxlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB2YWx1ZVxyXG4gICAgLy8vIG9mIGFkYXB0ZXJOYW1lIHdpbGwgYmUgdXNlZCBpbnN0ZWFkLjwvcGFyYW0+XHJcbiAgICAvLy8gPHJldHVybnMgdHlwZT1cImpRdWVyeS52YWxpZGF0b3IudW5vYnRydXNpdmUuYWRhcHRlcnNcIiAvPlxyXG4gICAgcmV0dXJuIHRoaXMuYWRkKGFkYXB0ZXJOYW1lLCBbYXR0cmlidXRlIHx8IFwidmFsXCJdLCBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsIHJ1bGVOYW1lIHx8IGFkYXB0ZXJOYW1lLCBvcHRpb25zLnBhcmFtc1thdHRyaWJ1dGVdKTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gICRqUXZhbC5hZGRNZXRob2QoXCJfX2R1bW15X19cIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50LCBwYXJhbXMpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0pO1xyXG5cclxuICAkalF2YWwuYWRkTWV0aG9kKFwicmVnZXhcIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50LCBwYXJhbXMpIHtcclxuICAgIHZhciBtYXRjaDtcclxuICAgIGlmICh0aGlzLm9wdGlvbmFsKGVsZW1lbnQpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIG1hdGNoID0gbmV3IFJlZ0V4cChwYXJhbXMpLmV4ZWModmFsdWUpO1xyXG4gICAgcmV0dXJuIChtYXRjaCAmJiAobWF0Y2guaW5kZXggPT09IDApICYmIChtYXRjaFswXS5sZW5ndGggPT09IHZhbHVlLmxlbmd0aCkpO1xyXG4gIH0pO1xyXG5cclxuICAkalF2YWwuYWRkTWV0aG9kKFwibm9uYWxwaGFtaW5cIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50LCBub25hbHBoYW1pbikge1xyXG4gICAgdmFyIG1hdGNoO1xyXG4gICAgaWYgKG5vbmFscGhhbWluKSB7XHJcbiAgICAgIG1hdGNoID0gdmFsdWUubWF0Y2goL1xcVy9nKTtcclxuICAgICAgbWF0Y2ggPSBtYXRjaCAmJiBtYXRjaC5sZW5ndGggPj0gbm9uYWxwaGFtaW47XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWF0Y2g7XHJcbiAgfSk7XHJcblxyXG4gIGlmICgkalF2YWwubWV0aG9kcy5leHRlbnNpb24pIHtcclxuICAgIGFkYXB0ZXJzLmFkZFNpbmdsZVZhbChcImFjY2VwdFwiLCBcIm1pbXR5cGVcIik7XHJcbiAgICBhZGFwdGVycy5hZGRTaW5nbGVWYWwoXCJleHRlbnNpb25cIiwgXCJleHRlbnNpb25cIik7XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LCB3aGVuIHRoZSAnZXh0ZW5zaW9uJyB2YWxpZGF0aW9uIG1ldGhvZCBkb2VzIG5vdCBleGlzdCwgc3VjaCBhcyB3aXRoIHZlcnNpb25zXHJcbiAgICAvLyBvZiBKUXVlcnkgVmFsaWRhdGlvbiBwbHVnaW4gcHJpb3IgdG8gMS4xMCwgd2Ugc2hvdWxkIHVzZSB0aGUgJ2FjY2VwdCcgbWV0aG9kIGZvclxyXG4gICAgLy8gdmFsaWRhdGluZyB0aGUgZXh0ZW5zaW9uLCBhbmQgaWdub3JlIG1pbWUtdHlwZSB2YWxpZGF0aW9ucyBhcyB0aGV5IGFyZSBub3Qgc3VwcG9ydGVkLlxyXG4gICAgYWRhcHRlcnMuYWRkU2luZ2xlVmFsKFwiZXh0ZW5zaW9uXCIsIFwiZXh0ZW5zaW9uXCIsIFwiYWNjZXB0XCIpO1xyXG4gIH1cclxuXHJcbiAgYWRhcHRlcnMuYWRkU2luZ2xlVmFsKFwicmVnZXhcIiwgXCJwYXR0ZXJuXCIpO1xyXG4gIGFkYXB0ZXJzLmFkZEJvb2woXCJjcmVkaXRjYXJkXCIpLmFkZEJvb2woXCJkYXRlXCIpLmFkZEJvb2woXCJkaWdpdHNcIikuYWRkQm9vbChcImVtYWlsXCIpLmFkZEJvb2woXCJudW1iZXJcIikuYWRkQm9vbChcInVybFwiKTtcclxuICBhZGFwdGVycy5hZGRNaW5NYXgoXCJsZW5ndGhcIiwgXCJtaW5sZW5ndGhcIiwgXCJtYXhsZW5ndGhcIiwgXCJyYW5nZWxlbmd0aFwiKS5hZGRNaW5NYXgoXCJyYW5nZVwiLCBcIm1pblwiLCBcIm1heFwiLCBcInJhbmdlXCIpO1xyXG4gIGFkYXB0ZXJzLmFkZE1pbk1heChcIm1pbmxlbmd0aFwiLCBcIm1pbmxlbmd0aFwiKS5hZGRNaW5NYXgoXCJtYXhsZW5ndGhcIiwgXCJtaW5sZW5ndGhcIiwgXCJtYXhsZW5ndGhcIik7XHJcbiAgYWRhcHRlcnMuYWRkKFwiZXF1YWx0b1wiLCBbXCJvdGhlclwiXSwgZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIHZhciBwcmVmaXggPSBnZXRNb2RlbFByZWZpeChvcHRpb25zLmVsZW1lbnQubmFtZSksXHJcbiAgICAgIG90aGVyID0gb3B0aW9ucy5wYXJhbXMub3RoZXIsXHJcbiAgICAgIGZ1bGxPdGhlck5hbWUgPSBhcHBlbmRNb2RlbFByZWZpeChvdGhlciwgcHJlZml4KSxcclxuICAgICAgZWxlbWVudCA9ICQob3B0aW9ucy5mb3JtKS5maW5kKFwiOmlucHV0XCIpLmZpbHRlcihcIltuYW1lPSdcIiArIGVzY2FwZUF0dHJpYnV0ZVZhbHVlKGZ1bGxPdGhlck5hbWUpICsgXCInXVwiKVswXTtcclxuXHJcbiAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsIFwiZXF1YWxUb1wiLCBlbGVtZW50KTtcclxuICB9KTtcclxuICBhZGFwdGVycy5hZGQoXCJyZXF1aXJlZFwiLCBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgLy8galF1ZXJ5IFZhbGlkYXRlIGVxdWF0ZXMgXCJyZXF1aXJlZFwiIHdpdGggXCJtYW5kYXRvcnlcIiBmb3IgY2hlY2tib3ggZWxlbWVudHNcclxuICAgIGlmIChvcHRpb25zLmVsZW1lbnQudGFnTmFtZS50b1VwcGVyQ2FzZSgpICE9PSBcIklOUFVUXCIgfHwgb3B0aW9ucy5lbGVtZW50LnR5cGUudG9VcHBlckNhc2UoKSAhPT0gXCJDSEVDS0JPWFwiKSB7XHJcbiAgICAgIHNldFZhbGlkYXRpb25WYWx1ZXMob3B0aW9ucywgXCJyZXF1aXJlZFwiLCB0cnVlKTtcclxuICAgIH1cclxuICB9KTtcclxuICBhZGFwdGVycy5hZGQoXCJyZW1vdGVcIiwgW1widXJsXCIsIFwidHlwZVwiLCBcImFkZGl0aW9uYWxmaWVsZHNcIl0sIGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICB2YXIgdmFsdWUgPSB7XHJcbiAgICAgIHVybDogb3B0aW9ucy5wYXJhbXMudXJsLFxyXG4gICAgICB0eXBlOiBvcHRpb25zLnBhcmFtcy50eXBlIHx8IFwiR0VUXCIsXHJcbiAgICAgIGRhdGE6IHt9XHJcbiAgICB9LFxyXG4gICAgICBwcmVmaXggPSBnZXRNb2RlbFByZWZpeChvcHRpb25zLmVsZW1lbnQubmFtZSk7XHJcblxyXG4gICAgJC5lYWNoKHNwbGl0QW5kVHJpbShvcHRpb25zLnBhcmFtcy5hZGRpdGlvbmFsZmllbGRzIHx8IG9wdGlvbnMuZWxlbWVudC5uYW1lKSwgZnVuY3Rpb24gKGksIGZpZWxkTmFtZSkge1xyXG4gICAgICB2YXIgcGFyYW1OYW1lID0gYXBwZW5kTW9kZWxQcmVmaXgoZmllbGROYW1lLCBwcmVmaXgpO1xyXG4gICAgICB2YWx1ZS5kYXRhW3BhcmFtTmFtZV0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZpZWxkID0gJChvcHRpb25zLmZvcm0pLmZpbmQoXCI6aW5wdXRcIikuZmlsdGVyKFwiW25hbWU9J1wiICsgZXNjYXBlQXR0cmlidXRlVmFsdWUocGFyYW1OYW1lKSArIFwiJ11cIik7XHJcbiAgICAgICAgLy8gRm9yIGNoZWNrYm94ZXMgYW5kIHJhZGlvIGJ1dHRvbnMsIG9ubHkgcGljayB1cCB2YWx1ZXMgZnJvbSBjaGVja2VkIGZpZWxkcy5cclxuICAgICAgICBpZiAoZmllbGQuaXMoXCI6Y2hlY2tib3hcIikpIHtcclxuICAgICAgICAgIHJldHVybiBmaWVsZC5maWx0ZXIoXCI6Y2hlY2tlZFwiKS52YWwoKSB8fCBmaWVsZC5maWx0ZXIoXCI6aGlkZGVuXCIpLnZhbCgpIHx8ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChmaWVsZC5pcyhcIjpyYWRpb1wiKSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZpZWxkLmZpbHRlcihcIjpjaGVja2VkXCIpLnZhbCgpIHx8ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmllbGQudmFsKCk7XHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsIFwicmVtb3RlXCIsIHZhbHVlKTtcclxuICB9KTtcclxuICBhZGFwdGVycy5hZGQoXCJwYXNzd29yZFwiLCBbXCJtaW5cIiwgXCJub25hbHBoYW1pblwiLCBcInJlZ2V4XCJdLCBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgaWYgKG9wdGlvbnMucGFyYW1zLm1pbikge1xyXG4gICAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsIFwibWlubGVuZ3RoXCIsIG9wdGlvbnMucGFyYW1zLm1pbik7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5wYXJhbXMubm9uYWxwaGFtaW4pIHtcclxuICAgICAgc2V0VmFsaWRhdGlvblZhbHVlcyhvcHRpb25zLCBcIm5vbmFscGhhbWluXCIsIG9wdGlvbnMucGFyYW1zLm5vbmFscGhhbWluKTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLnBhcmFtcy5yZWdleCkge1xyXG4gICAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsIFwicmVnZXhcIiwgb3B0aW9ucy5wYXJhbXMucmVnZXgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIGFkYXB0ZXJzLmFkZChcImZpbGVleHRlbnNpb25zXCIsIFtcImV4dGVuc2lvbnNcIl0sIGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICBzZXRWYWxpZGF0aW9uVmFsdWVzKG9wdGlvbnMsIFwiZXh0ZW5zaW9uXCIsIG9wdGlvbnMucGFyYW1zLmV4dGVuc2lvbnMpO1xyXG4gIH0pO1xyXG4gIFxyXG5cclxuICAvLyBSZW1vdmUgYXV0b21hdGljIHBhcnNpbmcgb2YgZG9jdW1lbnQgYW5kIHJlbHkgb24gb3VyIGN1c3RvbSBKU1xyXG4gIC8vJChmdW5jdGlvbiAoKSB7XHJcbiAgLy8gICRqUXZhbC51bm9idHJ1c2l2ZS5wYXJzZShkb2N1bWVudCk7XHJcbiAgLy99KTtcclxuXHJcbiAgcmV0dXJuICRqUXZhbC51bm9idHJ1c2l2ZTtcclxufSkpOyIsIihmdW5jdGlvbigkKSB7XHJcbiAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gIC8vIHNldCB2YWxpZCAvIGVycm9yIGNsYXNzZXMgZm9yIHRoZSBpbnB1dCB0byBiZSBiczQgY2xhc3Nlc1xyXG4gIHZhciBzZXR0aW5ncyA9IHtcclxuICAgIHZhbGlkQ2xhc3M6IFwiaXMtdmFsaWRcIixcclxuICAgIGVycm9yQ2xhc3M6IFwiaXMtaW52YWxpZFwiXHJcblxyXG4gIH07XHJcbiAgJC52YWxpZGF0b3Iuc2V0RGVmYXVsdHMoc2V0dGluZ3MpO1xyXG4gICQudmFsaWRhdG9yLnVub2J0cnVzaXZlLm9wdGlvbnMgPSBzZXR0aW5ncztcclxuXHJcbiAgLy9JRSBQb2x5ZmlsbCBmb3IgZm9yRWFjaCBvbiBOb2RlTGlzdFxyXG4gIGlmICh3aW5kb3cuTm9kZUxpc3QgJiYgIU5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoKSB7XHJcbiAgICBOb2RlTGlzdC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgIHRoaXNBcmcgPSB0aGlzQXJnIHx8IHdpbmRvdztcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB0aGlzW2ldLCBpLCB0aGlzKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGluaXRGb3JtKGZvcm0pIHtcclxuXHJcbiAgICBsZXQgJGZvcm0gPSAkKGZvcm0pO1xyXG4gICAgLy8gcGFyc2UgdGhlIGZvcm0gd2l0aCB1bm9idHJ1c2l2ZSBsaWJyYXJ5IFxyXG4gICAgJC52YWxpZGF0b3IudW5vYnRydXNpdmUucGFyc2UoJGZvcm0pO1xyXG4gICAgY29uc3QgZm9ybUlkID0gJGZvcm0uYXR0cihcImlkXCIpO1xyXG5cclxuICAgICRmb3JtLnN1Ym1pdChmdW5jdGlvbiAoZXZlbnQpIHsgICAgICAgIFxyXG4gICAgICAgIGlmICgkZm9ybS52YWxpZCgpKSB7XHJcbiAgICAgICAgICAvLyBmb3JtIGhhcyBiZWVuIHZhbGlkYXRlZCBieSBqUXVlcnkgdmFsaWRhdGlvblxyXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgLy8gZGlzYWJsZSBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIGRhdGEtZGlzYWJsZS1zdWJtaXQgYXR0cmlidXRlXHJcbiAgICAgICAgICBjb25zdCB0b0Rpc2FibGUgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1kaXNhYmxlLXN1Ym1pdD0ndHJ1ZSddXCIpO1xyXG4gICAgICAgICAgdG9EaXNhYmxlLmZvckVhY2goeCA9PiB4LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKSk7XHJcblxyXG4gICAgICAgICAgY29uc3Qgc2VyaWFsaXplZEZvcm0gPSAkZm9ybS5zZXJpYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAvLyBQb3N0IHRvIHRoZSBmb3JtIGNvbnRyb2xsZXJcclxuICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICB1cmw6IGZvcm0uYWN0aW9uLFxyXG4gICAgICAgICAgICBkYXRhOiBzZXJpYWxpemVkRm9ybSxcclxuICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcblxuXG4gICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gU2VydmVyIHNpZGUgdmFsaWRhdGlvbiBjYW4gb2NjdXIsIGZvcm0gaXMgcmUtcmVuZGVyZWRcclxuICAgICAgICAgICAgICAgICRmb3JtLnJlcGxhY2VXaXRoKGRhdGEuaHRtbCk7XHJcbiAgICAgICAgICAgICAgICAvLyBuZWVkIHRvIHJlcGFyc2UgdGhlIGZvcm1cclxuICAgICAgICAgICAgICAgIGluaXRGb3JtKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvcm1JZCkpO1xuICAgICAgICAgICAgICAgIC8vVE9ETzogZm9jdXMgb24gZmlyc3QgZXJyb3Igb3IgdmFsaWRhdGlvbiBzdW1tYXJ5XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gaWYgdGhlIHNlcnZlciBzZW5kcyBhIHJlZGlyZWN0LCByZWxvYWQgdGhlIHdpbmRvd1xuICAgICAgICAgICAgICBpZiAoZGF0YS5yZWRpcmVjdCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gZGF0YS5yZWRpcmVjdDtcclxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy9UT0RPOiBIYW5kbGUgZGVmYXVsdCBzdWNjZXNzIGNhc2UsIG1heWJlIHNob3cgc29tZVxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyKSB7XHJcbiAgICAgICAgICAgICAgLy8gdG9kbzogaGFuZGxlIHRoaXMgY2FzZSBncmFjZWZ1bGx5LCB1c3VhbGx5IGluIHRoZSBjYXNlIG9mIHNlcnZlciBlcnJvci5cclxuICAgICAgICAgICAgICBjb25zdCBkYXRhID0geGhyLnJlc3BvbnNlSlNPTjtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBsb29rIGZvciBhbGwgYWpheCBmb3JtcyBvbiBsb2FkIGFuZCBpbml0aWFsaXplIHRoZW1cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYWpheC1mb3JtXCIpLmZvckVhY2goaW5pdEZvcm0pO1xyXG4gIH0pO1xyXG59KShqUXVlcnkpO1xyXG4iXX0=
