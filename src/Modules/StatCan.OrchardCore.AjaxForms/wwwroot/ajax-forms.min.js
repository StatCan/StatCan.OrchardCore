function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"use strict";window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var r=0;r<this.length;r++)e.call(t,this[r],r,this)}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),e.fn.serializeObject=function(){var t={},r=this.serializeArray();return e.each(r,(function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""})),t},e(document).ready((function(){var t=document.documentElement.lang;document.querySelectorAll(".ajax-form").forEach((function(r){var o=e(r),s=r.querySelector(".form-server-messages");s||(s=o.append("<div></div>"));var a=r.elements;r.addEventListener("submit",(function(i){if(i.preventDefault(),i.stopPropagation(),r.checkValidity()){var n=r.querySelectorAll("[data-disable-submit='true']");n.forEach((function(e){return e.setAttribute("disabled",!0)}));var l=o.serialize();if(r.dataset.debugValues){var c=r.querySelector(".debug-values");c||(c=o.append('<div class="debug-values"></div>'));var u=e('<div class="alert alert-warning" role="alert">                 <p>Debug values: </p><div><pre>'+l.replace(/[&]/g,"\n")+"</pre></div>                 </div>");c.innerHTML=u.prop("outerHTML")}e.ajax({type:"POST",url:r.action,data:l,cache:!1,dataType:"json",success:function(r){var o;r&&(r.redirect&&setTimeout((function(){window.location.href=r.redirect}),2e3),r.success&&("object"===_typeof(r.success)?o=r.success[t]:"string"==typeof r.success&&(o=r.success)));var a=e('<div class="alert alert-success" role="alert">'+(o||"Please specify a default success message!!")+"</div>");s.innerHTML=a.prop("outerHTML")},error:function(r){var o,a=r.responseJSON;a&&(a.redirect&&setTimeout((function(){window.location.href=a.redirect}),2e3),a.error&&("object"===_typeof(a.error)?o=a.error[t]:"string"==typeof a.error&&(o=a.error)));var i=e('<div class="alert alert-danger" role="alert">'+(o||"Please specify a default error message!!")+"</div>");n.forEach((function(e){return e.removeAttribute("disabled")})),s.innerHTML=i.prop("outerHTML")}})}else{for(var d=0;d<a.length;d+=1){var p=a[d],f=p.closest(".form-control-wrapper");f&&(p.validity.valid?(f.classList.remove("invalid"),f.classList.add("valid")):(f.classList.remove("valid"),f.classList.add("invalid")))}o.find(":invalid").first().focus()}r.classList.add("was-validated")}),!1)}))}))}(jQuery);
