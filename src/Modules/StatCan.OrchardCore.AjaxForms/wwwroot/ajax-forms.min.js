function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}!function(a){"function"==typeof define&&define.amd?define("jquery.validate.unobtrusive",["jquery-validation"],a):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=a(require("jquery-validation")):jQuery.validator.unobtrusive=a(jQuery)}((function(a){var e,t=a.validator;function n(a,e,t){a.rules[e]=t,a.message&&(a.messages[e]=a.message)}function r(a){return a.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function i(a){return a.substr(0,a.lastIndexOf(".")+1)}function o(a,e){return 0===a.indexOf("*.")&&(a=a.replace("*.",e)),a}function d(e,t){var n=a(this).find("[data-valmsg-for='"+r(t[0].name)+"']"),i=n.attr("data-valmsg-replace"),o=i?!1!==a.parseJSON(i):null;n.removeClass("field-validation-valid").addClass("field-validation-error"),e.data("unobtrusiveContainer",n),o?(n.empty(),e.removeClass("input-validation-error").appendTo(n)):e.hide()}function s(e,t){var n=a(this).find("[data-valmsg-summary=true]"),r=n.find("ul");r&&r.length&&t.errorList.length&&(r.empty(),n.addClass("validation-summary-errors").removeClass("validation-summary-valid"),a.each(t.errorList,(function(){a("<li />").html(this.message).appendTo(r)})))}function l(e){var t=e.data("unobtrusiveContainer");if(t){var n=t.attr("data-valmsg-replace"),r=n?a.parseJSON(n):null;t.addClass("field-validation-valid").removeClass("field-validation-error"),e.removeData("unobtrusiveContainer"),r&&t.empty()}}function u(e){var t=a(this),n="__jquery_unobtrusive_validation_form_reset";if(!t.data(n)){t.data(n,!0);try{t.data("validator").resetForm()}finally{t.removeData(n)}t.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors"),t.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}}function m(e){var n=a(e),r=n.data("unobtrusiveValidation"),i=a.proxy(u,e),o=t.unobtrusive.options||{},m=function(t,n){var r=o[t];r&&a.isFunction(r)&&r.apply(e,n)};return r||(r={options:{errorClass:o.errorClass||"input-validation-error",errorElement:o.errorElement||"span",errorPlacement:function(){d.apply(e,arguments),m("errorPlacement",arguments)},invalidHandler:function(){s.apply(e,arguments),m("invalidHandler",arguments)},messages:{},rules:{},success:function(){l.apply(e,arguments),m("success",arguments)}},attachValidation:function(){n.off("reset.unobtrusiveValidation",i).on("reset.unobtrusiveValidation",i).validate(this.options)},validate:function(){return n.validate(),n.valid()}},n.data("unobtrusiveValidation",r)),r}return t.unobtrusive={adapters:[],parseElement:function(e,t){var n,r,i,o=a(e),d=o.parents("form")[0];d&&((n=m(d)).options.rules[e.name]=r={},n.options.messages[e.name]=i={},a.each(this.adapters,(function(){var t="data-val-"+this.name,n=o.attr(t),s={};void 0!==n&&(t+="-",a.each(this.params,(function(){s[this]=o.attr(t+this)})),this.adapt({element:e,form:d,message:n,params:s,rules:r,messages:i}))})),a.extend(r,{__dummy__:!0}),t||n.attachValidation())},parse:function(e){var n=a(e),r=n.parents().addBack().filter("form").add(n.find("form")).has("[data-val=true]");n.find("[data-val=true]").each((function(){t.unobtrusive.parseElement(this,!0)})),r.each((function(){var a=m(this);a&&a.attachValidation()}))}},(e=t.unobtrusive.adapters).add=function(a,e,t){return t||(t=e,e=[]),this.push({name:a,params:e,adapt:t}),this},e.addBool=function(a,e){return this.add(a,(function(t){n(t,e||a,!0)}))},e.addMinMax=function(a,e,t,r,i,o){return this.add(a,[i||"min",o||"max"],(function(a){var i=a.params.min,o=a.params.max;i&&o?n(a,r,[i,o]):i?n(a,e,i):o&&n(a,t,o)}))},e.addSingleVal=function(a,e,t){return this.add(a,[e||"val"],(function(r){n(r,t||a,r.params[e])}))},t.addMethod("__dummy__",(function(a,e,t){return!0})),t.addMethod("regex",(function(a,e,t){var n;return!!this.optional(e)||(n=new RegExp(t).exec(a))&&0===n.index&&n[0].length===a.length})),t.addMethod("nonalphamin",(function(a,e,t){var n;return t&&(n=(n=a.match(/\W/g))&&n.length>=t),n})),t.methods.extension?(e.addSingleVal("accept","mimtype"),e.addSingleVal("extension","extension")):e.addSingleVal("extension","extension","accept"),e.addSingleVal("regex","pattern"),e.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),e.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),e.addMinMax("minlength","minlength").addMinMax("maxlength","minlength","maxlength"),e.add("equalto",["other"],(function(e){var t=i(e.element.name),d=o(e.params.other,t);n(e,"equalTo",a(e.form).find(":input").filter("[name='"+r(d)+"']")[0])})),e.add("required",(function(a){"INPUT"===a.element.tagName.toUpperCase()&&"CHECKBOX"===a.element.type.toUpperCase()||n(a,"required",!0)})),e.add("remote",["url","type","additionalfields"],(function(e){var t={url:e.params.url,type:e.params.type||"GET",data:{}},d=i(e.element.name);a.each(function(a){return a.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}(e.params.additionalfields||e.element.name),(function(n,i){var s=o(i,d);t.data[s]=function(){var t=a(e.form).find(":input").filter("[name='"+r(s)+"']");return t.is(":checkbox")?t.filter(":checked").val()||t.filter(":hidden").val()||"":t.is(":radio")?t.filter(":checked").val()||"":t.val()}})),n(e,"remote",t)})),e.add("password",["min","nonalphamin","regex"],(function(a){a.params.min&&n(a,"minlength",a.params.min),a.params.nonalphamin&&n(a,"nonalphamin",a.params.nonalphamin),a.params.regex&&n(a,"regex",a.params.regex)})),e.add("fileextensions",["extensions"],(function(a){n(a,"extension",a.params.extensions)})),t.unobtrusive})),function(a){"use strict";var e={errorClass:"is-invalid",onkeyup:!1,onfocusout:!1,onclick:!1};function t(e){var n=a(e);a.validator.unobtrusive.parse(n);var r=n.attr("id");n.submit((function(i){if(n.valid()){i.preventDefault(),i.stopPropagation(),e.querySelectorAll("[data-disable-submit='true']").forEach((function(a){return a.setAttribute("disabled",!0)}));var o=n.serialize();a.ajax({type:"POST",url:e.action,data:o,cache:!1,dataType:"json",success:function(a){a.error&&(n.replaceWith(a.html),t(document.getElementById(r))),a.redirect&&(window.location.href=a.redirect)},error:function(a){var e=a.responseJSON;console.log("error",e)}})}}))}a.validator.setDefaults(e),a.validator.unobtrusive.options=e,window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(a,e){e=e||window;for(var t=0;t<this.length;t++)a.call(e,this[t],t,this)}),a(document).ready((function(){document.querySelectorAll(".ajax-form").forEach(t)}))}(jQuery);
